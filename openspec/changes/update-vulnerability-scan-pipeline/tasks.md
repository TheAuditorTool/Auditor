## 0. Verification (SOP v4.20)
- [ ] 0.1 Re-read `teamsop.md`, `openspec/project.md`, and `verification.md` before touching code.
- [ ] 0.2 Capture refreshed evidence in `verification.md` after inspecting updated indexer and scanner modules.
- [ ] 0.3 Confirm `.pf/raw` artifact expectations with a dry-run on fixtures before implementation.

## 1. Indexing Coverage
- [ ] 1.1 Extend extractors to write Python dependency manifests into `package_configs` and validate schema compatibility.
- [ ] 1.2 Add regression fixtures ensuring `aud index` records both Node and Python dependencies in the database.

## 2. Scanner Data Sources
- [ ] 2.1 Update `VulnerabilityScanner._load_packages_from_db` to reconcile DB packages with parsed dependency lists.
- [ ] 2.2 Instrument discrepancy logs so auditors see when fallbacks were required.
- [ ] 2.3 Ensure native tool commands receive the augmented inventory (Python + Node) during scans.

## 3. Artifact Production & Error Handling
- [ ] 3.1 Emit `.pf/raw/vulnerabilities.json` on every run with success/failure metadata and zero-findings payloads.
- [ ] 3.2 Propagate tool failures (missing binaries, non-zero exits) as structured errors that fail `aud deps --vuln-scan` and pipeline phases.
- [ ] 3.3 Update pipeline summary to reflect scan status counts and surface blocking errors in the final report.

## 4. Documentation & Tests
- [ ] 4.1 Refresh security scanning documentation to describe the database + fallback behavior and required prerequisites.
- [ ] 4.2 Add integration tests covering Python-only, Node-only, and mixed repositories to prove artifact emission and failure handling.
- [ ] 4.3 Run `openspec validate update-vulnerability-scan-pipeline --strict`, `pytest`, `ruff`, and `mypy` for affected modules.
