[Indexer] Monorepo detected. Using whitelist for 2 src directories
[Indexer] Monorepo detected. Using whitelist for 2 src directories
[Indexer] Processing 340 files...
[Indexer] Batch processing 319 JavaScript/TypeScript files...
[DEBUG] Found 0 cached tsconfig files
[DEBUG] Loaded configs for: []
Warning: Semantic parser failed for C:\Users\santa\Desktop\plant\frontend\src\pages\AuditTrail.tsx: Batch TypeScript compiler failed (exit code 1): {"success":false,"error":"Invalid string length","stack":"RangeError: Invalid string length\n    at JSON.stringify (<anonymous>)\n    at main (file:///C:/Users/santa/Desktop/plant/.pf/tsc_batch_helper.js:799:43)"}, falling back to individual parsing
Warning: Semantic parser failed for C:\Users\santa\Desktop\plant\frontend\src\pages\BatchManagement.tsx: Batch TypeScript compiler failed (exit code 1): {"success":false,"error":"Invalid string length","stack":"RangeError: Invalid string length\n    at JSON.stringify (<anonymous>)\n    at main (file:///C:/Users/santa/Desktop/plant/.pf/tsc_batch_helper.js:799:43)"}, falling back to individual parsing
Warning: Semantic parser failed for C:\Users\santa\Desktop\plant\frontend\src\pages\CultivationDashboard.tsx: Batch TypeScript compiler failed (exit code 1): {"success":false,"error":"Invalid string length","stack":"RangeError: Invalid string length\n    at JSON.stringify (<anonymous>)\n    at main (file:///C:/Users/santa/Desktop/plant/.pf/tsc_batch_helper.js:799:43)"}, falling back to individual parsing
Warning: Semantic parser failed for C:\Users\santa\Desktop\plant\frontend\src\pages\Dashboard.tsx: Batch TypeScript compiler failed (exit code 1): {"success":false,"error":"Invalid string length","stack":"RangeError: Invalid string length\n    at JSON.stringify (<anonymous>)\n    at main (file:///C:/Users/santa/Desktop/plant/.pf/tsc_batch_helper.js:799:43)"}, falling back to individual parsing
Warning: Semantic parser failed for C:\Users\santa\Desktop\plant\frontend\src\pages\DestructionManagement.tsx: Batch TypeScript compiler failed (exit code 1): {"success":false,"error":"Invalid string length","stack":"RangeError: Invalid string length\n    at JSON.stringify (<anonymous>)\n    at main (file:///C:/Users/santa/Desktop/plant/.pf/tsc_batch_helper.js:799:43)"}, falling back to individual parsing
Warning: Semantic parser failed for C:\Users\santa\Desktop\plant\frontend\src\pages\FacilityManagement.tsx: Batch TypeScript compiler failed (exit code 1): {"success":false,"error":"Invalid string length","stack":"RangeError: Invalid string length\n    at JSON.stringify (<anonymous>)\n    at main (file:///C:/Users/santa/Desktop/plant/.pf/tsc_batch_helper.js:799:43)"}, falling back to individual parsing
Warning: Semantic parser failed for C:\Users\santa\Desktop\plant\frontend\src\pages\HarvestManagement.tsx: Batch TypeScript compiler failed (exit code 1): {"success":false,"error":"Invalid string length","stack":"RangeError: Invalid string length\n    at JSON.stringify (<anonymous>)\n    at main (file:///C:/Users/santa/Desktop/plant/.pf/tsc_batch_helper.js:799:43)"}, falling back to individual parsing
Warning: Semantic parser failed for C:\Users\santa\Desktop\plant\frontend\src\pages\LocationManagement.tsx: Batch TypeScript compiler failed (exit code 1): {"success":false,"error":"Invalid string length","stack":"RangeError: Invalid string length\n    at JSON.stringify (<anonymous>)\n    at main (file:///C:/Users/santa/Desktop/plant/.pf/tsc_batch_helper.js:799:43)"}, falling back to individual parsing
Warning: Semantic parser failed for C:\Users\santa\Desktop\plant\frontend\src\pages\ReportsAnalytics.tsx: Batch TypeScript compiler failed (exit code 1): {"success":false,"error":"Invalid string length","stack":"RangeError: Invalid string length\n    at JSON.stringify (<anonymous>)\n    at main (file:///C:/Users/santa/Desktop/plant/.pf/tsc_batch_helper.js:799:43)"}, falling back to individual parsing
Warning: Semantic parser failed for C:\Users\santa\Desktop\plant\frontend\src\pages\SOPManagement.tsx: Batch TypeScript compiler failed (exit code 1): {"success":false,"error":"Invalid string length","stack":"RangeError: Invalid string length\n    at JSON.stringify (<anonymous>)\n    at main (file:///C:/Users/santa/Desktop/plant/.pf/tsc_batch_helper.js:799:43)"}, falling back to individual parsing
Warning: Semantic parser failed for C:\Users\santa\Desktop\plant\frontend\src\pages\Settings.tsx: Batch TypeScript compiler failed (exit code 1): {"success":false,"error":"Invalid string length","stack":"RangeError: Invalid string length\n    at JSON.stringify (<anonymous>)\n    at main (file:///C:/Users/santa/Desktop/plant/.pf/tsc_batch_helper.js:799:43)"}, falling back to individual parsing
Warning: Semantic parser failed for C:\Users\santa\Desktop\plant\frontend\src\pages\SuperAdminDashboard.tsx: Batch TypeScript compiler failed (exit code 1): {"success":false,"error":"Invalid string length","stack":"RangeError: Invalid string length\n    at JSON.stringify (<anonymous>)\n    at main (file:///C:/Users/santa/Desktop/plant/.pf/tsc_batch_helper.js:799:43)"}, falling back to individual parsing
Warning: Semantic parser failed for C:\Users\santa\Desktop\plant\frontend\src\pages\SuperAdminLogin.tsx: Batch TypeScript compiler failed (exit code 1): {"success":false,"error":"Invalid string length","stack":"RangeError: Invalid string length\n    at JSON.stringify (<anonymous>)\n    at main (file:///C:/Users/santa/Desktop/plant/.pf/tsc_batch_helper.js:799:43)"}, falling back to individual parsing
Warning: Semantic parser failed for C:\Users\santa\Desktop\plant\frontend\src\pages\WorkerLogin.tsx: Batch TypeScript compiler failed (exit code 1): {"success":false,"error":"Invalid string length","stack":"RangeError: Invalid string length\n    at JSON.stringify (<anonymous>)\n    at main (file:///C:/Users/santa/Desktop/plant/.pf/tsc_batch_helper.js:799:43)"}, falling back to individual parsing
Warning: Semantic parser failed for C:\Users\santa\Desktop\plant\frontend\src\pages\ZonesManagement.tsx: Batch TypeScript compiler failed (exit code 1): {"success":false,"error":"Invalid string length","stack":"RangeError: Invalid string length\n    at JSON.stringify (<anonymous>)\n    at main (file:///C:/Users/santa/Desktop/plant/.pf/tsc_batch_helper.js:799:43)"}, falling back to individual parsing
Warning: Semantic parser failed for C:\Users\santa\Desktop\plant\frontend\src\pages\genetics\GeneticsManagement.tsx: Batch TypeScript compiler failed (exit code 1): {"success":false,"error":"Invalid string length","stack":"RangeError: Invalid string length\n    at JSON.stringify (<anonymous>)\n    at main (file:///C:/Users/santa/Desktop/plant/.pf/tsc_batch_helper.js:799:43)"}, falling back to individual parsing
Warning: Semantic parser failed for C:\Users\santa\Desktop\plant\frontend\src\pages\genetics\GeneticsProfile.tsx: Batch TypeScript compiler failed (exit code 1): {"success":false,"error":"Invalid string length","stack":"RangeError: Invalid string length\n    at JSON.stringify (<anonymous>)\n    at main (file:///C:/Users/santa/Desktop/plant/.pf/tsc_batch_helper.js:799:43)"}, falling back to individual parsing
Warning: Semantic parser failed for C:\Users\santa\Desktop\plant\frontend\src\pages\genetics\index.ts: Batch TypeScript compiler failed (exit code 1): {"success":false,"error":"Invalid string length","stack":"RangeError: Invalid string length\n    at JSON.stringify (<anonymous>)\n    at main (file:///C:/Users/santa/Desktop/plant/.pf/tsc_batch_helper.js:799:43)"}, falling back to individual parsing
Warning: Semantic parser failed for C:\Users\santa\Desktop\plant\frontend\src\pages\operations\OperationForm.tsx: Batch TypeScript compiler failed (exit code 1): {"success":false,"error":"Invalid string length","stack":"RangeError: Invalid string length\n    at JSON.stringify (<anonymous>)\n    at main (file:///C:/Users/santa/Desktop/plant/.pf/tsc_batch_helper.js:799:43)"}, falling back to individual parsing

[DEBUG] DUPLICATE ASSIGNMENT DETECTED:
[DEBUG] Total assignments in batch: 2929
[DEBUG] DUPLICATE #23:
  File: backend/src/controllers/account.controller.ts
  Line: 11
  Target: query
  First occurrence: batch index 12
    - source_expr: validation.params.pagination.parse(req.query)
    - in_function: AccountController.list
  Second occurrence: batch index 23
    - source_expr: validation.params.pagination.parse(req.query)
    - in_function: AccountController.list

[DEBUG] DUPLICATE #24:
  File: backend/src/controllers/account.controller.ts
  Line: 12
  Target: offset
  First occurrence: batch index 13
    - source_expr: this.getOffset(query.page, query.limit)
    - in_function: AccountController.list
  Second occurrence: batch index 24
    - source_expr: this.getOffset(query.page, query.limit)
    - in_function: AccountController.list

[DEBUG] DUPLICATE #25:
  File: backend/src/controllers/account.controller.ts
  Line: 15
  Target: result
  First occurrence: batch index 14
    - source_expr: await accountService.listAccounts({
      limit: query.limit,
      offset
    })
    - in_function: AccountController.list
  Second occurrence: batch index 25
    - source_expr: await accountService.listAccounts({
      limit: query.limit,
      offset
    })
    - in_function: AccountController.list

[DEBUG] DUPLICATE #26:
  File: backend/src/controllers/account.controller.ts
  Line: 20
  Target: meta
  First occurrence: batch index 15
    - source_expr: this.getPaginationMeta(result.count, query.page, query.limit)
    - in_function: AccountController.list
  Second occurrence: batch index 26
    - source_expr: this.getPaginationMeta(result.count, query.page, query.limit)
    - in_function: AccountController.list

[DEBUG] DUPLICATE #27:
  File: backend/src/controllers/account.controller.ts
  Line: 25
  Target: { accountId }
  First occurrence: batch index 16
    - source_expr: this.getTenantContext(req)
    - in_function: AccountController.getById
  Second occurrence: batch index 27
    - source_expr: this.getTenantContext(req)
    - in_function: AccountController.getById

[DEBUG] DUPLICATE #28:
  File: backend/src/controllers/account.controller.ts
  Line: 27
  Target: id
  First occurrence: batch index 17
    - source_expr: req.params.id || accountId
    - in_function: AccountController.getById
  Second occurrence: batch index 28
    - source_expr: req.params.id || accountId
    - in_function: AccountController.getById

[DEBUG] DUPLICATE #29:
  File: backend/src/controllers/account.controller.ts
  Line: 28
  Target: entity
  First occurrence: batch index 18
    - source_expr: await accountService.getAccount(id)
    - in_function: AccountController.getById
  Second occurrence: batch index 29
    - source_expr: await accountService.getAccount(id)
    - in_function: AccountController.getById

[DEBUG] DUPLICATE #30:
  File: backend/src/controllers/account.controller.ts
  Line: 34
  Target: entity
  First occurrence: batch index 19
    - source_expr: await accountService.createAccount(req.body, 'system')
    - in_function: AccountController.create
  Second occurrence: batch index 30
    - source_expr: await accountService.createAccount(req.body, 'system')
    - in_function: AccountController.create

[DEBUG] DUPLICATE #31:
  File: backend/src/controllers/account.controller.ts
  Line: 39
  Target: { accountId }
  First occurrence: batch index 20
    - source_expr: this.getTenantContext(req)
    - in_function: AccountController.update
  Second occurrence: batch index 31
    - source_expr: this.getTenantContext(req)
    - in_function: AccountController.update

[DEBUG] DUPLICATE #32:
  File: backend/src/controllers/account.controller.ts
  Line: 40
  Target: entity
  First occurrence: batch index 21
    - source_expr: await accountService.updateAccount(accountId, req.body, 'system')
    - in_function: AccountController.update
  Second occurrence: batch index 32
    - source_expr: await accountService.updateAccount(accountId, req.body, 'system')
    - in_function: AccountController.update

[DEBUG] DUPLICATE #33:
  File: backend/src/controllers/account.controller.ts
  Line: 45
  Target: { accountId }
  First occurrence: batch index 22
    - source_expr: this.getTenantContext(req)
    - in_function: AccountController.delete
  Second occurrence: batch index 33
    - source_expr: this.getTenantContext(req)
    - in_function: AccountController.delete

[DEBUG] DUPLICATE #65:
  File: backend/src/controllers/area.controller.ts
  Line: 15
  Target: { accountId }
  First occurrence: batch index 35
    - source_expr: this.getTenantContext(req)
    - in_function: AreaController./**
   * List all areas
   */
  list
  Second occurrence: batch index 65
    - source_expr: this.getTenantContext(req)
    - in_function: AreaController./**
   * List all areas
   */
  list

[DEBUG] DUPLICATE #66:
  File: backend/src/controllers/area.controller.ts
  Line: 18
  Target: query
  First occurrence: batch index 36
    - source_expr: validation.query.areaList.parse(req.query)
    - in_function: AreaController./**
   * List all areas
   */
  list
  Second occurrence: batch index 66
    - source_expr: validation.query.areaList.parse(req.query)
    - in_function: AreaController./**
   * List all areas
   */
  list

[DEBUG] DUPLICATE #67:
  File: backend/src/controllers/area.controller.ts
  Line: 19
  Target: offset
  First occurrence: batch index 37
    - source_expr: this.getOffset(query.page, query.limit)
    - in_function: AreaController./**
   * List all areas
   */
  list
  Second occurrence: batch index 67
    - source_expr: this.getOffset(query.page, query.limit)
    - in_function: AreaController./**
   * List all areas
   */
  list

[DEBUG] DUPLICATE #68:
  File: backend/src/controllers/area.controller.ts
  Line: 22
  Target: filters: { zone_id?: string; type?: string; limit?: number; offset?: number }
  First occurrence: batch index 38
    - source_expr: {
      limit: query.limit,
      offset
    }
    - in_function: AreaController./**
   * List all areas
   */
  list
  Second occurrence: batch index 68
    - source_expr: {
      limit: query.limit,
      offset
    }
    - in_function: AreaController./**
   * List all areas
   */
  list

[DEBUG] DUPLICATE #69:
  File: backend/src/controllers/area.controller.ts
  Line: 31
  Target: result
  First occurrence: batch index 39
    - source_expr: await areaService.listAreas(accountId, filters)
    - in_function: AreaController./**
   * List all areas
   */
  list
  Second occurrence: batch index 69
    - source_expr: await areaService.listAreas(accountId, filters)
    - in_function: AreaController./**
   * List all areas
   */
  list

[DEBUG] DUPLICATE #70:
  File: backend/src/controllers/area.controller.ts
  Line: 33
  Target: meta
  First occurrence: batch index 40
    - source_expr: this.getPaginationMeta(result.total, query.page, query.limit)
    - in_function: AreaController./**
   * List all areas
   */
  list
  Second occurrence: batch index 70
    - source_expr: this.getPaginationMeta(result.total, query.page, query.limit)
    - in_function: AreaController./**
   * List all areas
   */
  list

[DEBUG] DUPLICATE #71:
  File: backend/src/controllers/area.controller.ts
  Line: 41
  Target: { accountId }
  First occurrence: batch index 41
    - source_expr: this.getTenantContext(req)
    - in_function: AreaController./**
   * Get area by ID
   */
  getById
  Second occurrence: batch index 71
    - source_expr: this.getTenantContext(req)
    - in_function: AreaController./**
   * Get area by ID
   */
  getById

[DEBUG] DUPLICATE #72:
  File: backend/src/controllers/area.controller.ts
  Line: 43
  Target: area
  First occurrence: batch index 42
    - source_expr: await areaService.getArea(accountId, req.params.id)
    - in_function: AreaController./**
   * Get area by ID
   */
  getById
  Second occurrence: batch index 72
    - source_expr: await areaService.getArea(accountId, req.params.id)
    - in_function: AreaController./**
   * Get area by ID
   */
  getById

[DEBUG] DUPLICATE #73:
  File: backend/src/controllers/area.controller.ts
  Line: 52
  Target: { accountId, userId }
  First occurrence: batch index 43
    - source_expr: this.getTenantContext(req)
    - in_function: AreaController./**
   * Create area (requires zone_id in body)
   */
  create
  Second occurrence: batch index 73
    - source_expr: this.getTenantContext(req)
    - in_function: AreaController./**
   * Create area (requires zone_id in body)
   */
  create

[DEBUG] DUPLICATE #74:
  File: backend/src/controllers/area.controller.ts
  Line: 53
  Target: area
  First occurrence: batch index 44
    - source_expr: await areaService.createArea(accountId, req.body, userId!)
    - in_function: AreaController./**
   * Create area (requires zone_id in body)
   */
  create
  Second occurrence: batch index 74
    - source_expr: await areaService.createArea(accountId, req.body, userId!)
    - in_function: AreaController./**
   * Create area (requires zone_id in body)
   */
  create

[DEBUG] DUPLICATE #75:
  File: backend/src/controllers/area.controller.ts
  Line: 61
  Target: { accountId, userId }
  First occurrence: batch index 45
    - source_expr: this.getTenantContext(req)
    - in_function: AreaController./**
   * Update area
   */
  update
  Second occurrence: batch index 75
    - source_expr: this.getTenantContext(req)
    - in_function: AreaController./**
   * Update area
   */
  update

[DEBUG] DUPLICATE #76:
  File: backend/src/controllers/area.controller.ts
  Line: 62
  Target: area
  First occurrence: batch index 46
    - source_expr: await areaService.updateArea(accountId, req.params.id, req.body, userId!)
    - in_function: AreaController./**
   * Update area
   */
  update
  Second occurrence: batch index 76
    - source_expr: await areaService.updateArea(accountId, req.params.id, req.body, userId!)
    - in_function: AreaController./**
   * Update area
   */
  update

[DEBUG] DUPLICATE #77:
  File: backend/src/controllers/area.controller.ts
  Line: 70
  Target: { accountId, userId }
  First occurrence: batch index 47
    - source_expr: this.getTenantContext(req)
    - in_function: AreaController./**
   * Delete area (soft delete)
   */
  delete
  Second occurrence: batch index 77
    - source_expr: this.getTenantContext(req)
    - in_function: AreaController./**
   * Delete area (soft delete)
   */
  delete

[DEBUG] DUPLICATE #78:
  File: backend/src/controllers/area.controller.ts
  Line: 85
  Target: { accountId, userId }
  First occurrence: batch index 48
    - source_expr: this.getTenantContext(req)
    - in_function: AreaController./**
   * ================== PARTITION ENDPOINTS ==================
   * Manage batch partitions within areas
   */

  /**
   * Add partition to area
   * POST /api/areas/:id/partitions
   */
  addPartition
  Second occurrence: batch index 78
    - source_expr: this.getTenantContext(req)
    - in_function: AreaController./**
   * ================== PARTITION ENDPOINTS ==================
   * Manage batch partitions within areas
   */

  /**
   * Add partition to area
   * POST /api/areas/:id/partitions
   */
  addPartition

[DEBUG] DUPLICATE #79:
  File: backend/src/controllers/area.controller.ts
  Line: 86
  Target: { id }
  First occurrence: batch index 49
    - source_expr: req.params
    - in_function: AreaController./**
   * ================== PARTITION ENDPOINTS ==================
   * Manage batch partitions within areas
   */

  /**
   * Add partition to area
   * POST /api/areas/:id/partitions
   */
  addPartition
  Second occurrence: batch index 79
    - source_expr: req.params
    - in_function: AreaController./**
   * ================== PARTITION ENDPOINTS ==================
   * Manage batch partitions within areas
   */

  /**
   * Add partition to area
   * POST /api/areas/:id/partitions
   */
  addPartition

[DEBUG] DUPLICATE #80:
  File: backend/src/controllers/area.controller.ts
  Line: 89
  Target: partitionData
  First occurrence: batch index 50
    - source_expr: {
      area_id: id,
      ...req.body
    }
    - in_function: AreaController./**
   * ================== PARTITION ENDPOINTS ==================
   * Manage batch partitions within areas
   */

  /**
   * Add partition to area
   * POST /api/areas/:id/partitions
   */
  addPartition
  Second occurrence: batch index 80
    - source_expr: {
      area_id: id,
      ...req.body
    }
    - in_function: AreaController./**
   * ================== PARTITION ENDPOINTS ==================
   * Manage batch partitions within areas
   */

  /**
   * Add partition to area
   * POST /api/areas/:id/partitions
   */
  addPartition

[DEBUG] DUPLICATE #81:
  File: backend/src/controllers/area.controller.ts
  Line: 94
  Target: area
  First occurrence: batch index 51
    - source_expr: await areaService.addPartition(
      accountId,
      id,
      partitionData,
      userId!
 
    - in_function: AreaController./**
   * ================== PARTITION ENDPOINTS ==================
   * Manage batch partitions within areas
   */

  /**
   * Add partition to area
   * POST /api/areas/:id/partitions
   */
  addPartition
  Second occurrence: batch index 81
    - source_expr: await areaService.addPartition(
      accountId,
      id,
      partitionData,
      userId!
 
    - in_function: AreaController./**
   * ================== PARTITION ENDPOINTS ==================
   * Manage batch partitions within areas
   */

  /**
   * Add partition to area
   * POST /api/areas/:id/partitions
   */
  addPartition

[DEBUG] DUPLICATE #82:
  File: backend/src/controllers/area.controller.ts
  Line: 109
  Target: { accountId, userId }
  First occurrence: batch index 52
    - source_expr: this.getTenantContext(req)
    - in_function: AreaController./**
   * Remove partition from area
   * DELETE /api/areas/:id/partitions/:batchId
   */
  removePartition
  Second occurrence: batch index 82
    - source_expr: this.getTenantContext(req)
    - in_function: AreaController./**
   * Remove partition from area
   * DELETE /api/areas/:id/partitions/:batchId
   */
  removePartition

[DEBUG] DUPLICATE #83:
  File: backend/src/controllers/area.controller.ts
  Line: 110
  Target: { id, batchId }
  First occurrence: batch index 53
    - source_expr: req.params
    - in_function: AreaController./**
   * Remove partition from area
   * DELETE /api/areas/:id/partitions/:batchId
   */
  removePartition
  Second occurrence: batch index 83
    - source_expr: req.params
    - in_function: AreaController./**
   * Remove partition from area
   * DELETE /api/areas/:id/partitions/:batchId
   */
  removePartition

[DEBUG] DUPLICATE #84:
  File: backend/src/controllers/area.controller.ts
  Line: 112
  Target: area
  First occurrence: batch index 54
    - source_expr: await areaService.removePartition(
      accountId,
      id,
      batchId,
      userId!
    
    - in_function: AreaController./**
   * Remove partition from area
   * DELETE /api/areas/:id/partitions/:batchId
   */
  removePartition
  Second occurrence: batch index 84
    - source_expr: await areaService.removePartition(
      accountId,
      id,
      batchId,
      userId!
    
    - in_function: AreaController./**
   * Remove partition from area
   * DELETE /api/areas/:id/partitions/:batchId
   */
  removePartition

[DEBUG] DUPLICATE #85:
  File: backend/src/controllers/area.controller.ts
  Line: 127
  Target: { accountId, userId }
  First occurrence: batch index 55
    - source_expr: this.getTenantContext(req)
    - in_function: AreaController./**
   * Update partition positions
   * PUT /api/areas/:id/partitions/:batchId
   */
  updatePartition
  Second occurrence: batch index 85
    - source_expr: this.getTenantContext(req)
    - in_function: AreaController./**
   * Update partition positions
   * PUT /api/areas/:id/partitions/:batchId
   */
  updatePartition

[DEBUG] DUPLICATE #86:
  File: backend/src/controllers/area.controller.ts
  Line: 128
  Target: { id, batchId }
  First occurrence: batch index 56
    - source_expr: req.params
    - in_function: AreaController./**
   * Update partition positions
   * PUT /api/areas/:id/partitions/:batchId
   */
  updatePartition
  Second occurrence: batch index 86
    - source_expr: req.params
    - in_function: AreaController./**
   * Update partition positions
   * PUT /api/areas/:id/partitions/:batchId
   */
  updatePartition

[DEBUG] DUPLICATE #87:
  File: backend/src/controllers/area.controller.ts
  Line: 129
  Target: { start_position, end_position }
  First occurrence: batch index 57
    - source_expr: req.body
    - in_function: AreaController./**
   * Update partition positions
   * PUT /api/areas/:id/partitions/:batchId
   */
  updatePartition
  Second occurrence: batch index 87
    - source_expr: req.body
    - in_function: AreaController./**
   * Update partition positions
   * PUT /api/areas/:id/partitions/:batchId
   */
  updatePartition

[DEBUG] DUPLICATE #88:
  File: backend/src/controllers/area.controller.ts
  Line: 131
  Target: area
  First occurrence: batch index 58
    - source_expr: await areaService.updatePartitionPositions(
      accountId,
      id,
      batchId,
      star
    - in_function: AreaController./**
   * Update partition positions
   * PUT /api/areas/:id/partitions/:batchId
   */
  updatePartition
  Second occurrence: batch index 88
    - source_expr: await areaService.updatePartitionPositions(
      accountId,
      id,
      batchId,
      star
    - in_function: AreaController./**
   * Update partition positions
   * PUT /api/areas/:id/partitions/:batchId
   */
  updatePartition

[DEBUG] DUPLICATE #89:
  File: backend/src/controllers/area.controller.ts
  Line: 148
  Target: { accountId }
  First occurrence: batch index 59
    - source_expr: this.getTenantContext(req)
    - in_function: AreaController./**
   * Get area occupancy visualization
   * GET /api/areas/:id/occupancy
   */
  getOccupancy
  Second occurrence: batch index 89
    - source_expr: this.getTenantContext(req)
    - in_function: AreaController./**
   * Get area occupancy visualization
   * GET /api/areas/:id/occupancy
   */
  getOccupancy

[DEBUG] DUPLICATE #90:
  File: backend/src/controllers/area.controller.ts
  Line: 149
  Target: { id }
  First occurrence: batch index 60
    - source_expr: req.params
    - in_function: AreaController./**
   * Get area occupancy visualization
   * GET /api/areas/:id/occupancy
   */
  getOccupancy
  Second occurrence: batch index 90
    - source_expr: req.params
    - in_function: AreaController./**
   * Get area occupancy visualization
   * GET /api/areas/:id/occupancy
   */
  getOccupancy

[DEBUG] DUPLICATE #91:
  File: backend/src/controllers/area.controller.ts
  Line: 151
  Target: occupancy
  First occurrence: batch index 61
    - source_expr: await areaService.getAreaOccupancy(accountId, id)
    - in_function: AreaController./**
   * Get area occupancy visualization
   * GET /api/areas/:id/occupancy
   */
  getOccupancy
  Second occurrence: batch index 91
    - source_expr: await areaService.getAreaOccupancy(accountId, id)
    - in_function: AreaController./**
   * Get area occupancy visualization
   * GET /api/areas/:id/occupancy
   */
  getOccupancy

[DEBUG] DUPLICATE #92:
  File: backend/src/controllers/area.controller.ts
  Line: 161
  Target: { accountId }
  First occurrence: batch index 62
    - source_expr: this.getTenantContext(req)
    - in_function: AreaController./**
   * Get areas containing a specific batch
   * GET /api/areas/batch/:batchId
   */
  getAreasByBatch
  Second occurrence: batch index 92
    - source_expr: this.getTenantContext(req)
    - in_function: AreaController./**
   * Get areas containing a specific batch
   * GET /api/areas/batch/:batchId
   */
  getAreasByBatch

[DEBUG] DUPLICATE #93:
  File: backend/src/controllers/area.controller.ts
  Line: 162
  Target: { batchId }
  First occurrence: batch index 63
    - source_expr: req.params
    - in_function: AreaController./**
   * Get areas containing a specific batch
   * GET /api/areas/batch/:batchId
   */
  getAreasByBatch
  Second occurrence: batch index 93
    - source_expr: req.params
    - in_function: AreaController./**
   * Get areas containing a specific batch
   * GET /api/areas/batch/:batchId
   */
  getAreasByBatch

[DEBUG] DUPLICATE #94:
  File: backend/src/controllers/area.controller.ts
  Line: 164
  Target: areas
  First occurrence: batch index 64
    - source_expr: await areaService.getAreasByBatch(accountId, batchId)
    - in_function: AreaController./**
   * Get areas containing a specific batch
   * GET /api/areas/batch/:batchId
   */
  getAreasByBatch
  Second occurrence: batch index 94
    - source_expr: await areaService.getAreasByBatch(accountId, batchId)
    - in_function: AreaController./**
   * Get areas containing a specific batch
   * GET /api/areas/batch/:batchId
   */
  getAreasByBatch

[DEBUG] DUPLICATE #125:
  File: backend/src/controllers/attachment.controller.ts
  Line: 21
  Target: { accountId, userId }
  First occurrence: batch index 95
    - source_expr: this.getTenantContext(req)
    - in_function: AttachmentController.upload
  Second occurrence: batch index 125
    - source_expr: this.getTenantContext(req)
    - in_function: AttachmentController.upload

[DEBUG] DUPLICATE #126:
  File: backend/src/controllers/attachment.controller.ts
  Line: 22
  Target: { entityType, entityId }
  First occurrence: batch index 96
    - source_expr: req.body
    - in_function: AttachmentController.upload
  Second occurrence: batch index 126
    - source_expr: req.body
    - in_function: AttachmentController.upload

[DEBUG] DUPLICATE #127:
  File: backend/src/controllers/attachment.controller.ts
  Line: 23
  Target: file
  First occurrence: batch index 97
    - source_expr: req.file
    - in_function: AttachmentController.upload
  Second occurrence: batch index 127
    - source_expr: req.file
    - in_function: AttachmentController.upload

[DEBUG] DUPLICATE #128:
  File: backend/src/controllers/attachment.controller.ts
  Line: 31
  Target: attachment
  First occurrence: batch index 98
    - source_expr: await attachmentService.uploadFile(
        accountId,
        {
          entityType,
         
    - in_function: AttachmentController.upload
  Second occurrence: batch index 128
    - source_expr: await attachmentService.uploadFile(
        accountId,
        {
          entityType,
         
    - in_function: AttachmentController.upload

[DEBUG] DUPLICATE #129:
  File: backend/src/controllers/attachment.controller.ts
  Line: 63
  Target: { accountId, userId }
  First occurrence: batch index 99
    - source_expr: this.getTenantContext(req)
    - in_function: AttachmentController.uploadBatch
  Second occurrence: batch index 129
    - source_expr: this.getTenantContext(req)
    - in_function: AttachmentController.uploadBatch

[DEBUG] DUPLICATE #130:
  File: backend/src/controllers/attachment.controller.ts
  Line: 64
  Target: { entityType, entityId }
  First occurrence: batch index 100
    - source_expr: req.body
    - in_function: AttachmentController.uploadBatch
  Second occurrence: batch index 130
    - source_expr: req.body
    - in_function: AttachmentController.uploadBatch

[DEBUG] DUPLICATE #131:
  File: backend/src/controllers/attachment.controller.ts
  Line: 65
  Target: files
  First occurrence: batch index 101
    - source_expr: req.files as Express.Multer.File[]
    - in_function: AttachmentController.uploadBatch
  Second occurrence: batch index 131
    - source_expr: req.files as Express.Multer.File[]
    - in_function: AttachmentController.uploadBatch

[DEBUG] DUPLICATE #132:
  File: backend/src/controllers/attachment.controller.ts
  Line: 75
  Target: attachments
  First occurrence: batch index 102
    - source_expr: await Promise.all(
        files.map(file =>
          attachmentService.uploadFile(
            
    - in_function: AttachmentController.uploadBatch
  Second occurrence: batch index 132
    - source_expr: await Promise.all(
        files.map(file =>
          attachmentService.uploadFile(
            
    - in_function: AttachmentController.uploadBatch

[DEBUG] DUPLICATE #133:
  File: backend/src/controllers/attachment.controller.ts
  Line: 109
  Target: { accountId, userId }
  First occurrence: batch index 103
    - source_expr: this.getTenantContext(req)
    - in_function: AttachmentController.download
  Second occurrence: batch index 133
    - source_expr: this.getTenantContext(req)
    - in_function: AttachmentController.download

[DEBUG] DUPLICATE #134:
  File: backend/src/controllers/attachment.controller.ts
  Line: 110
  Target: { id }
  First occurrence: batch index 104
    - source_expr: req.params
    - in_function: AttachmentController.download
  Second occurrence: batch index 134
    - source_expr: req.params
    - in_function: AttachmentController.download

[DEBUG] DUPLICATE #135:
  File: backend/src/controllers/attachment.controller.ts
  Line: 112
  Target: fileData
  First occurrence: batch index 105
    - source_expr: await attachmentService.downloadFile(
        accountId,
        id
      )
    - in_function: AttachmentController.download
  Second occurrence: batch index 135
    - source_expr: await attachmentService.downloadFile(
        accountId,
        id
      )
    - in_function: AttachmentController.download

[DEBUG] DUPLICATE #136:
  File: backend/src/controllers/attachment.controller.ts
  Line: 145
  Target: { accountId }
  First occurrence: batch index 106
    - source_expr: this.getTenantContext(req)
    - in_function: AttachmentController.view
  Second occurrence: batch index 136
    - source_expr: this.getTenantContext(req)
    - in_function: AttachmentController.view

[DEBUG] DUPLICATE #137:
  File: backend/src/controllers/attachment.controller.ts
  Line: 146
  Target: { id }
  First occurrence: batch index 107
    - source_expr: req.params
    - in_function: AttachmentController.view
  Second occurrence: batch index 137
    - source_expr: req.params
    - in_function: AttachmentController.view

[DEBUG] DUPLICATE #138:
  File: backend/src/controllers/attachment.controller.ts
  Line: 148
  Target: fileData
  First occurrence: batch index 108
    - source_expr: await attachmentService.downloadFile(
        accountId,
        id
      )
    - in_function: AttachmentController.view
  Second occurrence: batch index 138
    - source_expr: await attachmentService.downloadFile(
        accountId,
        id
      )
    - in_function: AttachmentController.view

[DEBUG] DUPLICATE #139:
  File: backend/src/controllers/attachment.controller.ts
  Line: 174
  Target: { accountId }
  First occurrence: batch index 109
    - source_expr: this.getTenantContext(req)
    - in_function: AttachmentController.thumbnail
  Second occurrence: batch index 139
    - source_expr: this.getTenantContext(req)
    - in_function: AttachmentController.thumbnail

[DEBUG] DUPLICATE #140:
  File: backend/src/controllers/attachment.controller.ts
  Line: 175
  Target: { id }
  First occurrence: batch index 110
    - source_expr: req.params
    - in_function: AttachmentController.thumbnail
  Second occurrence: batch index 140
    - source_expr: req.params
    - in_function: AttachmentController.thumbnail

[DEBUG] DUPLICATE #141:
  File: backend/src/controllers/attachment.controller.ts
  Line: 177
  Target: thumbnailBuffer
  First occurrence: batch index 111
    - source_expr: await attachmentService.getThumbnail(
        accountId,
        id
      )
    - in_function: AttachmentController.thumbnail
  Second occurrence: batch index 141
    - source_expr: await attachmentService.getThumbnail(
        accountId,
        id
      )
    - in_function: AttachmentController.thumbnail

[DEBUG] DUPLICATE #142:
  File: backend/src/controllers/attachment.controller.ts
  Line: 207
  Target: { accountId }
  First occurrence: batch index 112
    - source_expr: this.getTenantContext(req)
    - in_function: AttachmentController.getById
  Second occurrence: batch index 142
    - source_expr: this.getTenantContext(req)
    - in_function: AttachmentController.getById

[DEBUG] DUPLICATE #143:
  File: backend/src/controllers/attachment.controller.ts
  Line: 208
  Target: { id }
  First occurrence: batch index 113
    - source_expr: req.params
    - in_function: AttachmentController.getById
  Second occurrence: batch index 143
    - source_expr: req.params
    - in_function: AttachmentController.getById

[DEBUG] DUPLICATE #144:
  File: backend/src/controllers/attachment.controller.ts
  Line: 210
  Target: attachment
  First occurrence: batch index 114
    - source_expr: await attachmentService.findById(
        accountId,
        id
      )
    - in_function: AttachmentController.getById
  Second occurrence: batch index 144
    - source_expr: await attachmentService.findById(
        accountId,
        id
      )
    - in_function: AttachmentController.getById

[DEBUG] DUPLICATE #145:
  File: backend/src/controllers/attachment.controller.ts
  Line: 216
  Target: responseData
  First occurrence: batch index 115
    - source_expr: {
        ...attachment.toJSON(),
        file_data: undefined,
        thumbnail_data: undefined
    - in_function: AttachmentController.getById
  Second occurrence: batch index 145
    - source_expr: {
        ...attachment.toJSON(),
        file_data: undefined,
        thumbnail_data: undefined
    - in_function: AttachmentController.getById

[DEBUG] DUPLICATE #146:
  File: backend/src/controllers/attachment.controller.ts
  Line: 234
  Target: { accountId }
  First occurrence: batch index 116
    - source_expr: this.getTenantContext(req)
    - in_function: AttachmentController.listByEntity
  Second occurrence: batch index 146
    - source_expr: this.getTenantContext(req)
    - in_function: AttachmentController.listByEntity

[DEBUG] DUPLICATE #147:
  File: backend/src/controllers/attachment.controller.ts
  Line: 237
  Target: query
  First occurrence: batch index 117
    - source_expr: validation.query.attachmentList.parse(req.query)
    - in_function: AttachmentController.listByEntity
  Second occurrence: batch index 147
    - source_expr: validation.query.attachmentList.parse(req.query)
    - in_function: AttachmentController.listByEntity

[DEBUG] DUPLICATE #148:
  File: backend/src/controllers/attachment.controller.ts
  Line: 238
  Target: { entity_type, entity_id }
  First occurrence: batch index 118
    - source_expr: query
    - in_function: AttachmentController.listByEntity
  Second occurrence: batch index 148
    - source_expr: query
    - in_function: AttachmentController.listByEntity

[DEBUG] DUPLICATE #149:
  File: backend/src/controllers/attachment.controller.ts
  Line: 244
  Target: attachments
  First occurrence: batch index 119
    - source_expr: await attachmentService.findByEntity(
        accountId,
        entity_type,
        entity_id

    - in_function: AttachmentController.listByEntity
  Second occurrence: batch index 149
    - source_expr: await attachmentService.findByEntity(
        accountId,
        entity_type,
        entity_id

    - in_function: AttachmentController.listByEntity

[DEBUG] DUPLICATE #150:
  File: backend/src/controllers/attachment.controller.ts
  Line: 251
  Target: responseData
  First occurrence: batch index 120
    - source_expr: attachments.map(a => ({
        ...a.toJSON(),
        file_data: undefined,
        thumbnail_da
    - in_function: AttachmentController.listByEntity
  Second occurrence: batch index 150
    - source_expr: attachments.map(a => ({
        ...a.toJSON(),
        file_data: undefined,
        thumbnail_da
    - in_function: AttachmentController.listByEntity

[DEBUG] DUPLICATE #151:
  File: backend/src/controllers/attachment.controller.ts
  Line: 269
  Target: { accountId, userId }
  First occurrence: batch index 121
    - source_expr: this.getTenantContext(req)
    - in_function: AttachmentController.delete
  Second occurrence: batch index 151
    - source_expr: this.getTenantContext(req)
    - in_function: AttachmentController.delete

[DEBUG] DUPLICATE #152:
  File: backend/src/controllers/attachment.controller.ts
  Line: 270
  Target: { id }
  First occurrence: batch index 122
    - source_expr: req.params
    - in_function: AttachmentController.delete
  Second occurrence: batch index 152
    - source_expr: req.params
    - in_function: AttachmentController.delete

[DEBUG] DUPLICATE #153:
  File: backend/src/controllers/attachment.controller.ts
  Line: 296
  Target: { accountId }
  First occurrence: batch index 123
    - source_expr: this.getTenantContext(req)
    - in_function: AttachmentController.getStats
  Second occurrence: batch index 153
    - source_expr: this.getTenantContext(req)
    - in_function: AttachmentController.getStats

[DEBUG] DUPLICATE #154:
  File: backend/src/controllers/attachment.controller.ts
  Line: 297
  Target: stats
  First occurrence: batch index 124
    - source_expr: await attachmentService.getStorageStats(accountId)
    - in_function: AttachmentController.getStats
  Second occurrence: batch index 154
    - source_expr: await attachmentService.getStorageStats(accountId)
    - in_function: AttachmentController.getStats

[DEBUG] DUPLICATE #188:
  File: backend/src/controllers/audit.controller.ts
  Line: 13
  Target: { accountId }
  First occurrence: batch index 157
    - source_expr: this.getTenantContext(req)
    - in_function: AuditController.list
  Second occurrence: batch index 188
    - source_expr: this.getTenantContext(req)
    - in_function: AuditController.list

[DEBUG] DUPLICATE #189:
  File: backend/src/controllers/audit.controller.ts
  Line: 16
  Target: query
  First occurrence: batch index 158
    - source_expr: validation.query.auditList.parse(req.query)
    - in_function: AuditController.list
  Second occurrence: batch index 189
    - source_expr: validation.query.auditList.parse(req.query)
    - in_function: AuditController.list

[DEBUG] DUPLICATE #190:
  File: backend/src/controllers/audit.controller.ts
  Line: 17
  Target: offset
  First occurrence: batch index 159
    - source_expr: this.getOffset(query.page, query.limit)
    - in_function: AuditController.list
  Second occurrence: batch index 190
    - source_expr: this.getOffset(query.page, query.limit)
    - in_function: AuditController.list

[DEBUG] DUPLICATE #191:
  File: backend/src/controllers/audit.controller.ts
  Line: 19
  Target: result
  First occurrence: batch index 160
    - source_expr: await auditService.queryLogs(accountId, {
      limit: query.limit,
      offset,
      start_dat
    - in_function: AuditController.list
  Second occurrence: batch index 191
    - source_expr: await auditService.queryLogs(accountId, {
      limit: query.limit,
      offset,
      start_dat
    - in_function: AuditController.list

[DEBUG] DUPLICATE #192:
  File: backend/src/controllers/audit.controller.ts
  Line: 30
  Target: { User }
  First occurrence: batch index 161
    - source_expr: await import('@models/user.model')
    - in_function: AuditController.list
  Second occurrence: batch index 192
    - source_expr: await import('@models/user.model')
    - in_function: AuditController.list

[DEBUG] DUPLICATE #193:
  File: backend/src/controllers/audit.controller.ts
  Line: 31
  Target: { Worker }
  First occurrence: batch index 162
    - source_expr: await import('@models/worker.model')
    - in_function: AuditController.list
  Second occurrence: batch index 193
    - source_expr: await import('@models/worker.model')
    - in_function: AuditController.list

[DEBUG] DUPLICATE #194:
  File: backend/src/controllers/audit.controller.ts
  Line: 34
  Target: userIds
  First occurrence: batch index 163
    - source_expr: [...new Set(result.logs.map(log => log.user_id).filter(Boolean))]
    - in_function: AuditController.list
  Second occurrence: batch index 194
    - source_expr: [...new Set(result.logs.map(log => log.user_id).filter(Boolean))]
    - in_function: AuditController.list

[DEBUG] DUPLICATE #195:
  File: backend/src/controllers/audit.controller.ts
  Line: 37
  Target: [users, workers]
  First occurrence: batch index 164
    - source_expr: await Promise.all([
      User.findAll({
        where: { id: userIds, account_id: accountId },
 
    - in_function: AuditController.list
  Second occurrence: batch index 195
    - source_expr: await Promise.all([
      User.findAll({
        where: { id: userIds, account_id: accountId },
 
    - in_function: AuditController.list

[DEBUG] DUPLICATE #196:
  File: backend/src/controllers/audit.controller.ts
  Line: 49
  Target: userMap
  First occurrence: batch index 165
    - source_expr: new Map(users.map(u => [u.id, {
      name: `${u.first_name} ${u.last_name}`.trim() || u.email,
  
    - in_function: AuditController.list
  Second occurrence: batch index 196
    - source_expr: new Map(users.map(u => [u.id, {
      name: `${u.first_name} ${u.last_name}`.trim() || u.email,
  
    - in_function: AuditController.list

[DEBUG] DUPLICATE #197:
  File: backend/src/controllers/audit.controller.ts
  Line: 54
  Target: workerMap
  First occurrence: batch index 166
    - source_expr: new Map(workers.map(w => [w.id, {
      name: w.name || `${w.first_name} ${w.last_name}`.trim() || 
    - in_function: AuditController.list
  Second occurrence: batch index 197
    - source_expr: new Map(workers.map(w => [w.id, {
      name: w.name || `${w.first_name} ${w.last_name}`.trim() || 
    - in_function: AuditController.list

[DEBUG] DUPLICATE #198:
  File: backend/src/controllers/audit.controller.ts
  Line: 60
  Target: enhancedLogs
  First occurrence: batch index 167
    - source_expr: result.logs.map(log => ({
      ...log.toJSON(),
      user_display: userMap.get(log.user_id) || w
    - in_function: AuditController.list
  Second occurrence: batch index 198
    - source_expr: result.logs.map(log => ({
      ...log.toJSON(),
      user_display: userMap.get(log.user_id) || w
    - in_function: AuditController.list

[DEBUG] DUPLICATE #199:
  File: backend/src/controllers/audit.controller.ts
  Line: 68
  Target: meta
  First occurrence: batch index 168
    - source_expr: this.getPaginationMeta(result.total, query.page, query.limit)
    - in_function: AuditController.list
  Second occurrence: batch index 199
    - source_expr: this.getPaginationMeta(result.total, query.page, query.limit)
    - in_function: AuditController.list

[DEBUG] DUPLICATE #200:
  File: backend/src/controllers/audit.controller.ts
  Line: 73
  Target: { accountId }
  First occurrence: batch index 169
    - source_expr: this.getTenantContext(req)
    - in_function: AuditController.getById
  Second occurrence: batch index 200
    - source_expr: this.getTenantContext(req)
    - in_function: AuditController.getById

[DEBUG] DUPLICATE #201:
  File: backend/src/controllers/audit.controller.ts
  Line: 74
  Target: result
  First occurrence: batch index 170
    - source_expr: await auditService.queryLogs(accountId, {
      record_id: req.params.id,
      limit: 1
    })
    - in_function: AuditController.getById
  Second occurrence: batch index 201
    - source_expr: await auditService.queryLogs(accountId, {
      record_id: req.params.id,
      limit: 1
    })
    - in_function: AuditController.getById

[DEBUG] DUPLICATE #202:
  File: backend/src/controllers/audit.controller.ts
  Line: 92
  Target: { accountId }
  First occurrence: batch index 171
    - source_expr: this.getTenantContext(req)
    - in_function: AuditController./**
   * Export audit logs in various formats (CSV, JSON, PDF)
   * POST /api/v1/audit-logs/export
   */
  export
  Second occurrence: batch index 202
    - source_expr: this.getTenantContext(req)
    - in_function: AuditController./**
   * Export audit logs in various formats (CSV, JSON, PDF)
   * POST /api/v1/audit-logs/export
   */
  export

[DEBUG] DUPLICATE #203:
  File: backend/src/controllers/audit.controller.ts
  Line: 93
  Target: { format
  First occurrence: batch index 172
    - source_expr: 'csv', ...filters } = req.body
    - in_function: AuditController./**
   * Export audit logs in various formats (CSV, JSON, PDF)
   * POST /api/v1/audit-logs/export
   */
  export
  Second occurrence: batch index 203
    - source_expr: 'csv', ...filters } = req.body
    - in_function: AuditController./**
   * Export audit logs in various formats (CSV, JSON, PDF)
   * POST /api/v1/audit-logs/export
   */
  export

[DEBUG] DUPLICATE #204:
  File: backend/src/controllers/audit.controller.ts
  Line: 96
  Target: result
  First occurrence: batch index 173
    - source_expr: await auditService.queryLogs(accountId, {
      start_date: filters.start_date ? new Date(filters.s
    - in_function: AuditController./**
   * Export audit logs in various formats (CSV, JSON, PDF)
   * POST /api/v1/audit-logs/export
   */
  export
  Second occurrence: batch index 204
    - source_expr: await auditService.queryLogs(accountId, {
      start_date: filters.start_date ? new Date(filters.s
    - in_function: AuditController./**
   * Export audit logs in various formats (CSV, JSON, PDF)
   * POST /api/v1/audit-logs/export
   */
  export

[DEBUG] DUPLICATE #205:
  File: backend/src/controllers/audit.controller.ts
  Line: 107
  Target: csv
  First occurrence: batch index 174
    - source_expr: this.generateCSV(result.logs)
    - in_function: AuditController./**
   * Export audit logs in various formats (CSV, JSON, PDF)
   * POST /api/v1/audit-logs/export
   */
  export
  Second occurrence: batch index 205
    - source_expr: this.generateCSV(result.logs)
    - in_function: AuditController./**
   * Export audit logs in various formats (CSV, JSON, PDF)
   * POST /api/v1/audit-logs/export
   */
  export

[DEBUG] DUPLICATE #206:
  File: backend/src/controllers/audit.controller.ts
  Line: 143
  Target: headers
  First occurrence: batch index 175
    - source_expr: [
      'Timestamp',
      'User',
      'Operation',
      'Table',
      'Record ID',
      
    - in_function: AuditController.generateCSV
  Second occurrence: batch index 206
    - source_expr: [
      'Timestamp',
      'User',
      'Operation',
      'Table',
      'Record ID',
      
    - in_function: AuditController.generateCSV

[DEBUG] DUPLICATE #207:
  File: backend/src/controllers/audit.controller.ts
  Line: 155
  Target: rows
  First occurrence: batch index 176
    - source_expr: logs.map(log => {
      return [
        log.timestamp,
        log.user_id,
        log.operati
    - in_function: AuditController.generateCSV
  Second occurrence: batch index 207
    - source_expr: logs.map(log => {
      return [
        log.timestamp,
        log.user_id,
        log.operati
    - in_function: AuditController.generateCSV

[DEBUG] DUPLICATE #208:
  File: backend/src/controllers/audit.controller.ts
  Line: 167
  Target: str
  First occurrence: batch index 177
    - source_expr: String(field)
    - in_function: AuditController.generateCSV
  Second occurrence: batch index 208
    - source_expr: String(field)
    - in_function: AuditController.generateCSV

[DEBUG] DUPLICATE #209:
  File: backend/src/controllers/audit.controller.ts
  Line: 185
  Target: { accountId }
  First occurrence: batch index 178
    - source_expr: this.getTenantContext(req)
    - in_function: AuditController.// Audit logs are read-only

  /**
   * Get audit log statistics
   * GET /api/v1/audit-logs/stats
   */
  stats
  Second occurrence: batch index 209
    - source_expr: this.getTenantContext(req)
    - in_function: AuditController.// Audit logs are read-only

  /**
   * Get audit log statistics
   * GET /api/v1/audit-logs/stats
   */
  stats

[DEBUG] DUPLICATE #210:
  File: backend/src/controllers/audit.controller.ts
  Line: 188
  Target: totalResult
  First occurrence: batch index 179
    - source_expr: await auditService.queryLogs(accountId, {
      limit: 1
    })
    - in_function: AuditController.// Audit logs are read-only

  /**
   * Get audit log statistics
   * GET /api/v1/audit-logs/stats
   */
  stats
  Second occurrence: batch index 210
    - source_expr: await auditService.queryLogs(accountId, {
      limit: 1
    })
    - in_function: AuditController.// Audit logs are read-only

  /**
   * Get audit log statistics
   * GET /api/v1/audit-logs/stats
   */
  stats

[DEBUG] DUPLICATE #211:
  File: backend/src/controllers/audit.controller.ts
  Line: 193
  Target: today
  First occurrence: batch index 180
    - source_expr: new Date()
    - in_function: AuditController.// Audit logs are read-only

  /**
   * Get audit log statistics
   * GET /api/v1/audit-logs/stats
   */
  stats
  Second occurrence: batch index 211
    - source_expr: new Date()
    - in_function: AuditController.// Audit logs are read-only

  /**
   * Get audit log statistics
   * GET /api/v1/audit-logs/stats
   */
  stats

[DEBUG] DUPLICATE #212:
  File: backend/src/controllers/audit.controller.ts
  Line: 195
  Target: todayResult
  First occurrence: batch index 181
    - source_expr: await auditService.queryLogs(accountId, {
      start_date: today,
      limit: 1
    })
    - in_function: AuditController.// Audit logs are read-only

  /**
   * Get audit log statistics
   * GET /api/v1/audit-logs/stats
   */
  stats
  Second occurrence: batch index 212
    - source_expr: await auditService.queryLogs(accountId, {
      start_date: today,
      limit: 1
    })
    - in_function: AuditController.// Audit logs are read-only

  /**
   * Get audit log statistics
   * GET /api/v1/audit-logs/stats
   */
  stats

[DEBUG] DUPLICATE #213:
  File: backend/src/controllers/audit.controller.ts
  Line: 201
  Target: yesterday
  First occurrence: batch index 182
    - source_expr: new Date()
    - in_function: AuditController.// Audit logs are read-only

  /**
   * Get audit log statistics
   * GET /api/v1/audit-logs/stats
   */
  stats
  Second occurrence: batch index 213
    - source_expr: new Date()
    - in_function: AuditController.// Audit logs are read-only

  /**
   * Get audit log statistics
   * GET /api/v1/audit-logs/stats
   */
  stats

[DEBUG] DUPLICATE #214:
  File: backend/src/controllers/audit.controller.ts
  Line: 203
  Target: activeUsersResult
  First occurrence: batch index 183
    - source_expr: await auditService.queryLogs(accountId, {
      start_date: yesterday,
      limit: 100
    })
    - in_function: AuditController.// Audit logs are read-only

  /**
   * Get audit log statistics
   * GET /api/v1/audit-logs/stats
   */
  stats
  Second occurrence: batch index 214
    - source_expr: await auditService.queryLogs(accountId, {
      start_date: yesterday,
      limit: 100
    })
    - in_function: AuditController.// Audit logs are read-only

  /**
   * Get audit log statistics
   * GET /api/v1/audit-logs/stats
   */
  stats

[DEBUG] DUPLICATE #215:
  File: backend/src/controllers/audit.controller.ts
  Line: 209
  Target: uniqueUsers
  First occurrence: batch index 184
    - source_expr: new Set(activeUsersResult.logs.map(log => log.user_id))
    - in_function: AuditController.// Audit logs are read-only

  /**
   * Get audit log statistics
   * GET /api/v1/audit-logs/stats
   */
  stats
  Second occurrence: batch index 215
    - source_expr: new Set(activeUsersResult.logs.map(log => log.user_id))
    - in_function: AuditController.// Audit logs are read-only

  /**
   * Get audit log statistics
   * GET /api/v1/audit-logs/stats
   */
  stats

[DEBUG] DUPLICATE #216:
  File: backend/src/controllers/audit.controller.ts
  Line: 212
  Target: operationCounts: Record<string, number>
  First occurrence: batch index 185
    - source_expr: {}
    - in_function: AuditController.// Audit logs are read-only

  /**
   * Get audit log statistics
   * GET /api/v1/audit-logs/stats
   */
  stats
  Second occurrence: batch index 216
    - source_expr: {}
    - in_function: AuditController.// Audit logs are read-only

  /**
   * Get audit log statistics
   * GET /api/v1/audit-logs/stats
   */
  stats

[DEBUG] DUPLICATE #217:
  File: backend/src/controllers/audit.controller.ts
  Line: 213
  Target: recentLogs
  First occurrence: batch index 186
    - source_expr: await auditService.queryLogs(accountId, {
      limit: 1000
    })
    - in_function: AuditController.// Audit logs are read-only

  /**
   * Get audit log statistics
   * GET /api/v1/audit-logs/stats
   */
  stats
  Second occurrence: batch index 217
    - source_expr: await auditService.queryLogs(accountId, {
      limit: 1000
    })
    - in_function: AuditController.// Audit logs are read-only

  /**
   * Get audit log statistics
   * GET /api/v1/audit-logs/stats
   */
  stats

[DEBUG] DUPLICATE #218:
  File: backend/src/controllers/audit.controller.ts
  Line: 221
  Target: stats
  First occurrence: batch index 187
    - source_expr: {
      total_events: totalResult.total,
      todays_events: todayResult.total,
      active_use
    - in_function: AuditController.// Audit logs are read-only

  /**
   * Get audit log statistics
   * GET /api/v1/audit-logs/stats
   */
  stats
  Second occurrence: batch index 218
    - source_expr: {
      total_events: totalResult.total,
      todays_events: todayResult.total,
      active_use
    - in_function: AuditController.// Audit logs are read-only

  /**
   * Get audit log statistics
   * GET /api/v1/audit-logs/stats
   */
  stats

[DEBUG] DUPLICATE #233:
  File: backend/src/controllers/auth.controller.ts
  Line: 21
  Target: { email, password, username, account_name, first_name, last_name }
  First occurrence: batch index 219
    - source_expr: req.body
    - in_function: AuthController.register
  Second occurrence: batch index 233
    - source_expr: req.body
    - in_function: AuthController.register

[DEBUG] DUPLICATE #234:
  File: backend/src/controllers/auth.controller.ts
  Line: 23
  Target: { user, tokens }
  First occurrence: batch index 220
    - source_expr: await authService.register({
        email,
        password,
        username,
        account_
    - in_function: AuthController.register
  Second occurrence: batch index 234
    - source_expr: await authService.register({
        email,
        password,
        username,
        account_
    - in_function: AuthController.register

[DEBUG] DUPLICATE #235:
  File: backend/src/controllers/auth.controller.ts
  Line: 36
  Target: csrfToken
  First occurrence: batch index 221
    - source_expr: generateCSRFToken(req, res)
    - in_function: AuthController.register
  Second occurrence: batch index 235
    - source_expr: generateCSRFToken(req, res)
    - in_function: AuthController.register

[DEBUG] DUPLICATE #236:
  File: backend/src/controllers/auth.controller.ts
  Line: 58
  Target: { email, password }
  First occurrence: batch index 222
    - source_expr: req.body
    - in_function: AuthController.login
  Second occurrence: batch index 236
    - source_expr: req.body
    - in_function: AuthController.login

[DEBUG] DUPLICATE #237:
  File: backend/src/controllers/auth.controller.ts
  Line: 60
  Target: { user, tokens }
  First occurrence: batch index 223
    - source_expr: await authService.login({ email, password })
    - in_function: AuthController.login
  Second occurrence: batch index 237
    - source_expr: await authService.login({ email, password })
    - in_function: AuthController.login

[DEBUG] DUPLICATE #238:
  File: backend/src/controllers/auth.controller.ts
  Line: 66
  Target: csrfToken
  First occurrence: batch index 224
    - source_expr: generateCSRFToken(req, res)
    - in_function: AuthController.login
  Second occurrence: batch index 238
    - source_expr: generateCSRFToken(req, res)
    - in_function: AuthController.login

[DEBUG] DUPLICATE #239:
  File: backend/src/controllers/auth.controller.ts
  Line: 88
  Target: { worker_code, pin }
  First occurrence: batch index 225
    - source_expr: req.body
    - in_function: AuthController.loginWorker
  Second occurrence: batch index 239
    - source_expr: req.body
    - in_function: AuthController.loginWorker

[DEBUG] DUPLICATE #240:
  File: backend/src/controllers/auth.controller.ts
  Line: 90
  Target: { worker, tokens }
  First occurrence: batch index 226
    - source_expr: await authService.loginWorker({
        worker_code,
        pin
      })
    - in_function: AuthController.loginWorker
  Second occurrence: batch index 240
    - source_expr: await authService.loginWorker({
        worker_code,
        pin
      })
    - in_function: AuthController.loginWorker

[DEBUG] DUPLICATE #241:
  File: backend/src/controllers/auth.controller.ts
  Line: 99
  Target: csrfToken
  First occurrence: batch index 227
    - source_expr: generateCSRFToken(req, res)
    - in_function: AuthController.loginWorker
  Second occurrence: batch index 241
    - source_expr: generateCSRFToken(req, res)
    - in_function: AuthController.loginWorker

[DEBUG] DUPLICATE #242:
  File: backend/src/controllers/auth.controller.ts
  Line: 121
  Target: refreshToken
  First occurrence: batch index 228
    - source_expr: (req.cookies as Record<string, string> | undefined)?.refreshToken
    - in_function: AuthController.refreshToken
  Second occurrence: batch index 242
    - source_expr: (req.cookies as Record<string, string> | undefined)?.refreshToken
    - in_function: AuthController.refreshToken

[DEBUG] DUPLICATE #243:
  File: backend/src/controllers/auth.controller.ts
  Line: 127
  Target: tokens
  First occurrence: batch index 229
    - source_expr: await authService.refreshToken(refreshToken)
    - in_function: AuthController.refreshToken
  Second occurrence: batch index 243
    - source_expr: await authService.refreshToken(refreshToken)
    - in_function: AuthController.refreshToken

[DEBUG] DUPLICATE #244:
  File: backend/src/controllers/auth.controller.ts
  Line: 133
  Target: csrfToken
  First occurrence: batch index 230
    - source_expr: generateCSRFToken(req, res)
    - in_function: AuthController.refreshToken
  Second occurrence: batch index 244
    - source_expr: generateCSRFToken(req, res)
    - in_function: AuthController.refreshToken

[DEBUG] DUPLICATE #245:
  File: backend/src/controllers/auth.controller.ts
  Line: 155
  Target: userId
  First occurrence: batch index 231
    - source_expr: req.userId
    - in_function: AuthController.logout
  Second occurrence: batch index 245
    - source_expr: req.userId
    - in_function: AuthController.logout

[DEBUG] DUPLICATE #246:
  File: backend/src/controllers/auth.controller.ts
  Line: 181
  Target: user
  First occurrence: batch index 232
    - source_expr: req.user
    - in_function: AuthController./**
   * Get current user
   * GET /api/auth/me
   */
  getCurrentUser
  Second occurrence: batch index 246
    - source_expr: req.user
    - in_function: AuthController./**
   * Get current user
   * GET /api/auth/me
   */
  getCurrentUser

[DEBUG] DUPLICATE #258:
  File: backend/src/controllers/base.controller.ts
  Line: 25
  Target: response: ApiResponse<T>
  First occurrence: batch index 247
    - source_expr: {
      success: true,
      data
    }
    - in_function: BaseController.sendSuccess
  Second occurrence: batch index 258
    - source_expr: {
      success: true,
      data
    }
    - in_function: BaseController.sendSuccess

[DEBUG] DUPLICATE #259:
  File: backend/src/controllers/base.controller.ts
  Line: 45
  Target: code
  First occurrence: batch index 248
    - source_expr: error instanceof AppError ? error.statusCode : StatusCodes.INTERNAL_SERVER_ERROR
    - in_function: BaseController.sendError
  Second occurrence: batch index 259
    - source_expr: error instanceof AppError ? error.statusCode : StatusCodes.INTERNAL_SERVER_ERROR
    - in_function: BaseController.sendError

[DEBUG] DUPLICATE #260:
  File: backend/src/controllers/base.controller.ts
  Line: 46
  Target: response: ApiResponse<null>
  First occurrence: batch index 249
    - source_expr: {
      success: false,
      error: {
        code: error.name || 'ERROR',  // Optional code fie
    - in_function: BaseController.sendError
  Second occurrence: batch index 260
    - source_expr: {
      success: false,
      error: {
        code: error.name || 'ERROR',  // Optional code fie
    - in_function: BaseController.sendError

[DEBUG] DUPLICATE #261:
  File: backend/src/controllers/base.controller.ts
  Line: 63
  Target: page
  First occurrence: batch index 250
    - source_expr: Math.max(1, query.page || 1)
    - in_function: BaseController.getPagination
  Second occurrence: batch index 261
    - source_expr: Math.max(1, query.page || 1)
    - in_function: BaseController.getPagination

[DEBUG] DUPLICATE #262:
  File: backend/src/controllers/base.controller.ts
  Line: 64
  Target: limit
  First occurrence: batch index 251
    - source_expr: Math.min(100, Math.max(1, query.limit || 20))
    - in_function: BaseController.getPagination
  Second occurrence: batch index 262
    - source_expr: Math.min(100, Math.max(1, query.limit || 20))
    - in_function: BaseController.getPagination

[DEBUG] DUPLICATE #263:
  File: backend/src/controllers/base.controller.ts
  Line: 65
  Target: sort
  First occurrence: batch index 252
    - source_expr: query.sort || 'created_at'
    - in_function: BaseController.getPagination
  Second occurrence: batch index 263
    - source_expr: query.sort || 'created_at'
    - in_function: BaseController.getPagination

[DEBUG] DUPLICATE #264:
  File: backend/src/controllers/base.controller.ts
  Line: 66
  Target: order
  First occurrence: batch index 253
    - source_expr: (query.order?.toUpperCase() === 'ASC' ? 'ASC' : 'DESC') as 'ASC' | 'DESC'
    - in_function: BaseController.getPagination
  Second occurrence: batch index 264
    - source_expr: (query.order?.toUpperCase() === 'ASC' ? 'ASC' : 'DESC') as 'ASC' | 'DESC'
    - in_function: BaseController.getPagination

[DEBUG] DUPLICATE #265:
  File: backend/src/controllers/base.controller.ts
  Line: 79
  Target: pages
  First occurrence: batch index 254
    - source_expr: Math.ceil(total / limit)
    - in_function: BaseController.getPaginationMeta
  Second occurrence: batch index 265
    - source_expr: Math.ceil(total / limit)
    - in_function: BaseController.getPaginationMeta

[DEBUG] DUPLICATE #266:
  File: backend/src/controllers/base.controller.ts
  Line: 102
  Target: { accountId, userId, facilityId }
  First occurrence: batch index 255
    - source_expr: req
    - in_function: BaseController.getTenantContext
  Second occurrence: batch index 266
    - source_expr: req
    - in_function: BaseController.getTenantContext

[DEBUG] DUPLICATE #267:
  File: backend/src/controllers/base.controller.ts
  Line: 186
  Target: { accountId, userId }
  First occurrence: batch index 256
    - source_expr: this.getTenantContext(req)
    - in_function: BaseController.callService
  Second occurrence: batch index 267
    - source_expr: this.getTenantContext(req)
    - in_function: BaseController.callService

[DEBUG] DUPLICATE #268:
  File: backend/src/controllers/base.controller.ts
  Line: 189
  Target: methodName
  First occurrence: batch index 257
    - source_expr: serviceMethod.name
    - in_function: BaseController.callService
  Second occurrence: batch index 268
    - source_expr: serviceMethod.name
    - in_function: BaseController.callService

[DEBUG] DUPLICATE #304:
  File: backend/src/controllers/batch.controller.ts
  Line: 22
  Target: controller
  First occurrence: batch index 269
    - source_expr: new BatchController()
    - in_function: BatchController.create
  Second occurrence: batch index 304
    - source_expr: new BatchController()
    - in_function: BatchController.create

[DEBUG] DUPLICATE #305:
  File: backend/src/controllers/batch.controller.ts
  Line: 23
  Target: { accountId, userId }
  First occurrence: batch index 270
    - source_expr: controller.getTenantContext(req)
    - in_function: BatchController.create
  Second occurrence: batch index 305
    - source_expr: controller.getTenantContext(req)
    - in_function: BatchController.create

[DEBUG] DUPLICATE #306:
  File: backend/src/controllers/batch.controller.ts
  Line: 26
  Target: batch
  First occurrence: batch index 271
    - source_expr: await controller.batchService.createBatch(
        accountId,
        req.body.facility_id,
     
    - in_function: BatchController.create
  Second occurrence: batch index 306
    - source_expr: await controller.batchService.createBatch(
        accountId,
        req.body.facility_id,
     
    - in_function: BatchController.create

[DEBUG] DUPLICATE #307:
  File: backend/src/controllers/batch.controller.ts
  Line: 45
  Target: controller
  First occurrence: batch index 272
    - source_expr: new BatchController()
    - in_function: BatchController.getById
  Second occurrence: batch index 307
    - source_expr: new BatchController()
    - in_function: BatchController.getById

[DEBUG] DUPLICATE #308:
  File: backend/src/controllers/batch.controller.ts
  Line: 46
  Target: { accountId }
  First occurrence: batch index 273
    - source_expr: controller.getTenantContext(req)
    - in_function: BatchController.getById
  Second occurrence: batch index 308
    - source_expr: controller.getTenantContext(req)
    - in_function: BatchController.getById

[DEBUG] DUPLICATE #309:
  File: backend/src/controllers/batch.controller.ts
  Line: 47
  Target: { id }
  First occurrence: batch index 274
    - source_expr: req.params
    - in_function: BatchController.getById
  Second occurrence: batch index 309
    - source_expr: req.params
    - in_function: BatchController.getById

[DEBUG] DUPLICATE #310:
  File: backend/src/controllers/batch.controller.ts
  Line: 50
  Target: batch
  First occurrence: batch index 275
    - source_expr: await controller.batchService.getBatchWithDetails(accountId, id)
    - in_function: BatchController.getById
  Second occurrence: batch index 310
    - source_expr: await controller.batchService.getBatchWithDetails(accountId, id)
    - in_function: BatchController.getById

[DEBUG] DUPLICATE #311:
  File: backend/src/controllers/batch.controller.ts
  Line: 63
  Target: controller
  First occurrence: batch index 276
    - source_expr: new BatchController()
    - in_function: BatchController.list
  Second occurrence: batch index 311
    - source_expr: new BatchController()
    - in_function: BatchController.list

[DEBUG] DUPLICATE #312:
  File: backend/src/controllers/batch.controller.ts
  Line: 64
  Target: { accountId }
  First occurrence: batch index 277
    - source_expr: controller.getTenantContext(req)
    - in_function: BatchController.list
  Second occurrence: batch index 312
    - source_expr: controller.getTenantContext(req)
    - in_function: BatchController.list

[DEBUG] DUPLICATE #313:
  File: backend/src/controllers/batch.controller.ts
  Line: 67
  Target: query
  First occurrence: batch index 278
    - source_expr: req.query
    - in_function: BatchController.list
  Second occurrence: batch index 313
    - source_expr: req.query
    - in_function: BatchController.list

[DEBUG] DUPLICATE #314:
  File: backend/src/controllers/batch.controller.ts
  Line: 70
  Target: batches
  First occurrence: batch index 279
    - source_expr: await controller.batchService.listBatches(
        accountId,
        query.facility_id, // Now pr
    - in_function: BatchController.list
  Second occurrence: batch index 314
    - source_expr: await controller.batchService.listBatches(
        accountId,
        query.facility_id, // Now pr
    - in_function: BatchController.list

[DEBUG] DUPLICATE #315:
  File: backend/src/controllers/batch.controller.ts
  Line: 98
  Target: controller
  First occurrence: batch index 280
    - source_expr: new BatchController()
    - in_function: BatchController.getByQRCode
  Second occurrence: batch index 315
    - source_expr: new BatchController()
    - in_function: BatchController.getByQRCode

[DEBUG] DUPLICATE #316:
  File: backend/src/controllers/batch.controller.ts
  Line: 99
  Target: { accountId }
  First occurrence: batch index 281
    - source_expr: controller.getTenantContext(req)
    - in_function: BatchController.getByQRCode
  Second occurrence: batch index 316
    - source_expr: controller.getTenantContext(req)
    - in_function: BatchController.getByQRCode

[DEBUG] DUPLICATE #317:
  File: backend/src/controllers/batch.controller.ts
  Line: 100
  Target: { qrCode }
  First occurrence: batch index 282
    - source_expr: req.params
    - in_function: BatchController.getByQRCode
  Second occurrence: batch index 317
    - source_expr: req.params
    - in_function: BatchController.getByQRCode

[DEBUG] DUPLICATE #318:
  File: backend/src/controllers/batch.controller.ts
  Line: 103
  Target: batch
  First occurrence: batch index 283
    - source_expr: await controller.batchService.getBatchByQRCode(accountId, qrCode)
    - in_function: BatchController.getByQRCode
  Second occurrence: batch index 318
    - source_expr: await controller.batchService.getBatchByQRCode(accountId, qrCode)
    - in_function: BatchController.getByQRCode

[DEBUG] DUPLICATE #319:
  File: backend/src/controllers/batch.controller.ts
  Line: 116
  Target: controller
  First occurrence: batch index 284
    - source_expr: new BatchController()
    - in_function: BatchController.changeStage
  Second occurrence: batch index 319
    - source_expr: new BatchController()
    - in_function: BatchController.changeStage

[DEBUG] DUPLICATE #320:
  File: backend/src/controllers/batch.controller.ts
  Line: 117
  Target: { accountId, userId }
  First occurrence: batch index 285
    - source_expr: controller.getTenantContext(req)
    - in_function: BatchController.changeStage
  Second occurrence: batch index 320
    - source_expr: controller.getTenantContext(req)
    - in_function: BatchController.changeStage

[DEBUG] DUPLICATE #321:
  File: backend/src/controllers/batch.controller.ts
  Line: 118
  Target: { id }
  First occurrence: batch index 286
    - source_expr: req.params
    - in_function: BatchController.changeStage
  Second occurrence: batch index 321
    - source_expr: req.params
    - in_function: BatchController.changeStage

[DEBUG] DUPLICATE #322:
  File: backend/src/controllers/batch.controller.ts
  Line: 119
  Target: { new_stage }
  First occurrence: batch index 287
    - source_expr: req.body
    - in_function: BatchController.changeStage
  Second occurrence: batch index 322
    - source_expr: req.body
    - in_function: BatchController.changeStage

[DEBUG] DUPLICATE #323:
  File: backend/src/controllers/batch.controller.ts
  Line: 121
  Target: batch
  First occurrence: batch index 288
    - source_expr: await controller.batchService.changeStage(
        accountId,
        id,
        new_stage,
   
    - in_function: BatchController.changeStage
  Second occurrence: batch index 323
    - source_expr: await controller.batchService.changeStage(
        accountId,
        id,
        new_stage,
   
    - in_function: BatchController.changeStage

[DEBUG] DUPLICATE #324:
  File: backend/src/controllers/batch.controller.ts
  Line: 143
  Target: controller
  First occurrence: batch index 289
    - source_expr: new BatchController()
    - in_function: BatchController.moveBatch
  Second occurrence: batch index 324
    - source_expr: new BatchController()
    - in_function: BatchController.moveBatch

[DEBUG] DUPLICATE #325:
  File: backend/src/controllers/batch.controller.ts
  Line: 144
  Target: { accountId, userId }
  First occurrence: batch index 290
    - source_expr: controller.getTenantContext(req)
    - in_function: BatchController.moveBatch
  Second occurrence: batch index 325
    - source_expr: controller.getTenantContext(req)
    - in_function: BatchController.moveBatch

[DEBUG] DUPLICATE #326:
  File: backend/src/controllers/batch.controller.ts
  Line: 145
  Target: { id }
  First occurrence: batch index 291
    - source_expr: req.params
    - in_function: BatchController.moveBatch
  Second occurrence: batch index 326
    - source_expr: req.params
    - in_function: BatchController.moveBatch

[DEBUG] DUPLICATE #327:
  File: backend/src/controllers/batch.controller.ts
  Line: 146
  Target: { to_zone_id }
  First occurrence: batch index 292
    - source_expr: req.body
    - in_function: BatchController.moveBatch
  Second occurrence: batch index 327
    - source_expr: req.body
    - in_function: BatchController.moveBatch

[DEBUG] DUPLICATE #328:
  File: backend/src/controllers/batch.controller.ts
  Line: 149
  Target: batch
  First occurrence: batch index 293
    - source_expr: await controller.batchService.moveBatch(accountId, id, to_zone_id, userId)
    - in_function: BatchController.moveBatch
  Second occurrence: batch index 328
    - source_expr: await controller.batchService.moveBatch(accountId, id, to_zone_id, userId)
    - in_function: BatchController.moveBatch

[DEBUG] DUPLICATE #329:
  File: backend/src/controllers/batch.controller.ts
  Line: 162
  Target: controller
  First occurrence: batch index 294
    - source_expr: new BatchController()
    - in_function: BatchController.splitBatch
  Second occurrence: batch index 329
    - source_expr: new BatchController()
    - in_function: BatchController.splitBatch

[DEBUG] DUPLICATE #330:
  File: backend/src/controllers/batch.controller.ts
  Line: 163
  Target: { accountId, userId }
  First occurrence: batch index 295
    - source_expr: controller.getTenantContext(req)
    - in_function: BatchController.splitBatch
  Second occurrence: batch index 330
    - source_expr: controller.getTenantContext(req)
    - in_function: BatchController.splitBatch

[DEBUG] DUPLICATE #331:
  File: backend/src/controllers/batch.controller.ts
  Line: 164
  Target: { id }
  First occurrence: batch index 296
    - source_expr: req.params
    - in_function: BatchController.splitBatch
  Second occurrence: batch index 331
    - source_expr: req.params
    - in_function: BatchController.splitBatch

[DEBUG] DUPLICATE #332:
  File: backend/src/controllers/batch.controller.ts
  Line: 165
  Target: { splits }
  First occurrence: batch index 297
    - source_expr: req.body
    - in_function: BatchController.splitBatch
  Second occurrence: batch index 332
    - source_expr: req.body
    - in_function: BatchController.splitBatch

[DEBUG] DUPLICATE #333:
  File: backend/src/controllers/batch.controller.ts
  Line: 168
  Target: newBatches
  First occurrence: batch index 298
    - source_expr: await controller.batchService.splitBatch(accountId, id, splits, userId)
    - in_function: BatchController.splitBatch
  Second occurrence: batch index 333
    - source_expr: await controller.batchService.splitBatch(accountId, id, splits, userId)
    - in_function: BatchController.splitBatch

[DEBUG] DUPLICATE #334:
  File: backend/src/controllers/batch.controller.ts
  Line: 187
  Target: controller
  First occurrence: batch index 299
    - source_expr: new BatchController()
    - in_function: BatchController.getQRCodes
  Second occurrence: batch index 334
    - source_expr: new BatchController()
    - in_function: BatchController.getQRCodes

[DEBUG] DUPLICATE #335:
  File: backend/src/controllers/batch.controller.ts
  Line: 188
  Target: { accountId }
  First occurrence: batch index 300
    - source_expr: controller.getTenantContext(req)
    - in_function: BatchController.getQRCodes
  Second occurrence: batch index 335
    - source_expr: controller.getTenantContext(req)
    - in_function: BatchController.getQRCodes

[DEBUG] DUPLICATE #336:
  File: backend/src/controllers/batch.controller.ts
  Line: 189
  Target: { id }
  First occurrence: batch index 301
    - source_expr: req.params
    - in_function: BatchController.getQRCodes
  Second occurrence: batch index 336
    - source_expr: req.params
    - in_function: BatchController.getQRCodes

[DEBUG] DUPLICATE #337:
  File: backend/src/controllers/batch.controller.ts
  Line: 192
  Target: batch
  First occurrence: batch index 302
    - source_expr: await controller.batchService.getBatchWithDetails(accountId, id)
    - in_function: BatchController.getQRCodes
  Second occurrence: batch index 337
    - source_expr: await controller.batchService.getBatchWithDetails(accountId, id)
    - in_function: BatchController.getQRCodes

[DEBUG] DUPLICATE #338:
  File: backend/src/controllers/batch.controller.ts
  Line: 196
  Target: qrData
  First occurrence: batch index 303
    - source_expr: {
        batch_id: batch.id,
        batch_number: batch.batch_number,
        qr_code: batch.qr
    - in_function: BatchController.getQRCodes
  Second occurrence: batch index 338
    - source_expr: {
        batch_id: batch.id,
        batch_number: batch.batch_number,
        qr_code: batch.qr
    - in_function: BatchController.getQRCodes

[DEBUG] DUPLICATE #359:
  File: backend/src/controllers/compliance.controller.ts
  Line: 29
  Target: accountId: string
  First occurrence: batch index 339
    - source_expr: req.accountId
    - in_function: ComplianceController.generateReport
  Second occurrence: batch index 359
    - source_expr: req.accountId
    - in_function: ComplianceController.generateReport

[DEBUG] DUPLICATE #360:
  File: backend/src/controllers/compliance.controller.ts
  Line: 32
  Target: query
  First occurrence: batch index 340
    - source_expr: validation.query.complianceList.parse(req.query)
    - in_function: ComplianceController.generateReport
  Second occurrence: batch index 360
    - source_expr: validation.query.complianceList.parse(req.query)
    - in_function: ComplianceController.generateReport

[DEBUG] DUPLICATE #361:
  File: backend/src/controllers/compliance.controller.ts
  Line: 33
  Target: filters: ComplianceFilters
  First occurrence: batch index 341
    - source_expr: {
        facilityId: query.facility_id,
        locationId: query.location_id,
        zoneId: q
    - in_function: ComplianceController.generateReport
  Second occurrence: batch index 361
    - source_expr: {
        facilityId: query.facility_id,
        locationId: query.location_id,
        zoneId: q
    - in_function: ComplianceController.generateReport

[DEBUG] DUPLICATE #362:
  File: backend/src/controllers/compliance.controller.ts
  Line: 47
  Target: report
  First occurrence: batch index 342
    - source_expr: await this.reportService.generateAuditReport(accountId, filters)
    - in_function: ComplianceController.generateReport
  Second occurrence: batch index 362
    - source_expr: await this.reportService.generateAuditReport(accountId, filters)
    - in_function: ComplianceController.generateReport

[DEBUG] DUPLICATE #363:
  File: backend/src/controllers/compliance.controller.ts
  Line: 67
  Target: accountId: string
  First occurrence: batch index 343
    - source_expr: req.accountId
    - in_function: ComplianceController.generatePDF
  Second occurrence: batch index 363
    - source_expr: req.accountId
    - in_function: ComplianceController.generatePDF

[DEBUG] DUPLICATE #364:
  File: backend/src/controllers/compliance.controller.ts
  Line: 76
  Target: query
  First occurrence: batch index 344
    - source_expr: validation.query.complianceList.parse(req.query)
    - in_function: ComplianceController.generatePDF
  Second occurrence: batch index 364
    - source_expr: validation.query.complianceList.parse(req.query)
    - in_function: ComplianceController.generatePDF

[DEBUG] DUPLICATE #365:
  File: backend/src/controllers/compliance.controller.ts
  Line: 77
  Target: filters: ComplianceFilters
  First occurrence: batch index 345
    - source_expr: {
        facilityId: query.facility_id,
        locationId: query.location_id,
        zoneId: q
    - in_function: ComplianceController.generatePDF
  Second occurrence: batch index 365
    - source_expr: {
        facilityId: query.facility_id,
        locationId: query.location_id,
        zoneId: q
    - in_function: ComplianceController.generatePDF

[DEBUG] DUPLICATE #366:
  File: backend/src/controllers/compliance.controller.ts
  Line: 91
  Target: report
  First occurrence: batch index 346
    - source_expr: await this.reportService.generateAuditReport(accountId, filters)
    - in_function: ComplianceController.generatePDF
  Second occurrence: batch index 366
    - source_expr: await this.reportService.generateAuditReport(accountId, filters)
    - in_function: ComplianceController.generatePDF

[DEBUG] DUPLICATE #367:
  File: backend/src/controllers/compliance.controller.ts
  Line: 94
  Target: pdf
  First occurrence: batch index 347
    - source_expr: await this.pdfService.generateComplianceReport(
        report,
        req.user && 'first_name' i
    - in_function: ComplianceController.generatePDF
  Second occurrence: batch index 367
    - source_expr: await this.pdfService.generateComplianceReport(
        report,
        req.user && 'first_name' i
    - in_function: ComplianceController.generatePDF

[DEBUG] DUPLICATE #368:
  File: backend/src/controllers/compliance.controller.ts
  Line: 121
  Target: accountId: string
  First occurrence: batch index 348
    - source_expr: req.accountId
    - in_function: ComplianceController.generateGenealogyReport
  Second occurrence: batch index 368
    - source_expr: req.accountId
    - in_function: ComplianceController.generateGenealogyReport

[DEBUG] DUPLICATE #369:
  File: backend/src/controllers/compliance.controller.ts
  Line: 123
  Target: { batchId }
  First occurrence: batch index 349
    - source_expr: req.params
    - in_function: ComplianceController.generateGenealogyReport
  Second occurrence: batch index 369
    - source_expr: req.params
    - in_function: ComplianceController.generateGenealogyReport

[DEBUG] DUPLICATE #370:
  File: backend/src/controllers/compliance.controller.ts
  Line: 130
  Target: report
  First occurrence: batch index 350
    - source_expr: await complianceReportService.generateBatchGenealogyReport(accountId, batchId)
    - in_function: ComplianceController.generateGenealogyReport
  Second occurrence: batch index 370
    - source_expr: await complianceReportService.generateBatchGenealogyReport(accountId, batchId)
    - in_function: ComplianceController.generateGenealogyReport

[DEBUG] DUPLICATE #371:
  File: backend/src/controllers/compliance.controller.ts
  Line: 147
  Target: accountId: string
  First occurrence: batch index 351
    - source_expr: req.accountId
    - in_function: ComplianceController.generateOperationSummary
  Second occurrence: batch index 371
    - source_expr: req.accountId
    - in_function: ComplianceController.generateOperationSummary

[DEBUG] DUPLICATE #372:
  File: backend/src/controllers/compliance.controller.ts
  Line: 150
  Target: query
  First occurrence: batch index 352
    - source_expr: validation.query.complianceList.parse(req.query)
    - in_function: ComplianceController.generateOperationSummary
  Second occurrence: batch index 372
    - source_expr: validation.query.complianceList.parse(req.query)
    - in_function: ComplianceController.generateOperationSummary

[DEBUG] DUPLICATE #373:
  File: backend/src/controllers/compliance.controller.ts
  Line: 151
  Target: startDate
  First occurrence: batch index 353
    - source_expr: query.start_date ? new Date(query.start_date) : undefined
    - in_function: ComplianceController.generateOperationSummary
  Second occurrence: batch index 373
    - source_expr: query.start_date ? new Date(query.start_date) : undefined
    - in_function: ComplianceController.generateOperationSummary

[DEBUG] DUPLICATE #374:
  File: backend/src/controllers/compliance.controller.ts
  Line: 152
  Target: endDate
  First occurrence: batch index 354
    - source_expr: query.end_date ? new Date(query.end_date) : undefined
    - in_function: ComplianceController.generateOperationSummary
  Second occurrence: batch index 374
    - source_expr: query.end_date ? new Date(query.end_date) : undefined
    - in_function: ComplianceController.generateOperationSummary

[DEBUG] DUPLICATE #375:
  File: backend/src/controllers/compliance.controller.ts
  Line: 160
  Target: summary
  First occurrence: batch index 355
    - source_expr: await complianceReportService.generateOperationSummary(
        accountId,
        startDate,
   
    - in_function: ComplianceController.generateOperationSummary
  Second occurrence: batch index 375
    - source_expr: await complianceReportService.generateOperationSummary(
        accountId,
        startDate,
   
    - in_function: ComplianceController.generateOperationSummary

[DEBUG] DUPLICATE #376:
  File: backend/src/controllers/compliance.controller.ts
  Line: 182
  Target: accountId: string
  First occurrence: batch index 356
    - source_expr: req.accountId
    - in_function: ComplianceController.getAuditTrail
  Second occurrence: batch index 376
    - source_expr: req.accountId
    - in_function: ComplianceController.getAuditTrail

[DEBUG] DUPLICATE #377:
  File: backend/src/controllers/compliance.controller.ts
  Line: 184
  Target: { entityType, entityId }
  First occurrence: batch index 357
    - source_expr: req.params
    - in_function: ComplianceController.getAuditTrail
  Second occurrence: batch index 377
    - source_expr: req.params
    - in_function: ComplianceController.getAuditTrail

[DEBUG] DUPLICATE #378:
  File: backend/src/controllers/compliance.controller.ts
  Line: 191
  Target: trail
  First occurrence: batch index 358
    - source_expr: await complianceReportService.getAuditTrail(accountId, entityType, entityId)
    - in_function: ComplianceController.getAuditTrail
  Second occurrence: batch index 378
    - source_expr: await complianceReportService.getAuditTrail(accountId, entityType, entityId)
    - in_function: ComplianceController.getAuditTrail

[DEBUG] DUPLICATE #389:
  File: backend/src/controllers/dashboard.controller.ts
  Line: 21
  Target: controller
  First occurrence: batch index 380
    - source_expr: new DashboardController()
    - in_function: DashboardController.getStats
  Second occurrence: batch index 389
    - source_expr: new DashboardController()
    - in_function: DashboardController.getStats

[DEBUG] DUPLICATE #390:
  File: backend/src/controllers/dashboard.controller.ts
  Line: 22
  Target: { accountId }
  First occurrence: batch index 381
    - source_expr: controller.getTenantContext(req)
    - in_function: DashboardController.getStats
  Second occurrence: batch index 390
    - source_expr: controller.getTenantContext(req)
    - in_function: DashboardController.getStats

[DEBUG] DUPLICATE #391:
  File: backend/src/controllers/dashboard.controller.ts
  Line: 24
  Target: stats
  First occurrence: batch index 382
    - source_expr: await controller.dashboardService.getDashboardStats(accountId)
    - in_function: DashboardController.getStats
  Second occurrence: batch index 391
    - source_expr: await controller.dashboardService.getDashboardStats(accountId)
    - in_function: DashboardController.getStats

[DEBUG] DUPLICATE #392:
  File: backend/src/controllers/dashboard.controller.ts
  Line: 37
  Target: controller
  First occurrence: batch index 383
    - source_expr: new DashboardController()
    - in_function: DashboardController.getRecentActivities
  Second occurrence: batch index 392
    - source_expr: new DashboardController()
    - in_function: DashboardController.getRecentActivities

[DEBUG] DUPLICATE #393:
  File: backend/src/controllers/dashboard.controller.ts
  Line: 38
  Target: { accountId }
  First occurrence: batch index 384
    - source_expr: controller.getTenantContext(req)
    - in_function: DashboardController.getRecentActivities
  Second occurrence: batch index 393
    - source_expr: controller.getTenantContext(req)
    - in_function: DashboardController.getRecentActivities

[DEBUG] DUPLICATE #394:
  File: backend/src/controllers/dashboard.controller.ts
  Line: 40
  Target: activities
  First occurrence: batch index 385
    - source_expr: await controller.dashboardService.getRecentActivities(accountId)
    - in_function: DashboardController.getRecentActivities
  Second occurrence: batch index 394
    - source_expr: await controller.dashboardService.getRecentActivities(accountId)
    - in_function: DashboardController.getRecentActivities

[DEBUG] DUPLICATE #395:
  File: backend/src/controllers/dashboard.controller.ts
  Line: 53
  Target: controller
  First occurrence: batch index 386
    - source_expr: new DashboardController()
    - in_function: DashboardController.getMetrics
  Second occurrence: batch index 395
    - source_expr: new DashboardController()
    - in_function: DashboardController.getMetrics

[DEBUG] DUPLICATE #396:
  File: backend/src/controllers/dashboard.controller.ts
  Line: 54
  Target: { accountId }
  First occurrence: batch index 387
    - source_expr: controller.getTenantContext(req)
    - in_function: DashboardController.getMetrics
  Second occurrence: batch index 396
    - source_expr: controller.getTenantContext(req)
    - in_function: DashboardController.getMetrics

[DEBUG] DUPLICATE #397:
  File: backend/src/controllers/dashboard.controller.ts
  Line: 56
  Target: metrics
  First occurrence: batch index 388
    - source_expr: await controller.dashboardService.getDetailedMetrics(accountId)
    - in_function: DashboardController.getMetrics
  Second occurrence: batch index 397
    - source_expr: await controller.dashboardService.getDetailedMetrics(accountId)
    - in_function: DashboardController.getMetrics

[DEBUG] DUPLICATE #416:
  File: backend/src/controllers/destruction.controller.ts
  Line: 12
  Target: { accountId }
  First occurrence: batch index 399
    - source_expr: this.getTenantContext(req)
    - in_function: DestructionController.list
  Second occurrence: batch index 416
    - source_expr: this.getTenantContext(req)
    - in_function: DestructionController.list

[DEBUG] DUPLICATE #417:
  File: backend/src/controllers/destruction.controller.ts
  Line: 15
  Target: query
  First occurrence: batch index 400
    - source_expr: validation.params.pagination.parse(req.query)
    - in_function: DestructionController.list
  Second occurrence: batch index 417
    - source_expr: validation.params.pagination.parse(req.query)
    - in_function: DestructionController.list

[DEBUG] DUPLICATE #418:
  File: backend/src/controllers/destruction.controller.ts
  Line: 16
  Target: offset
  First occurrence: batch index 401
    - source_expr: this.getOffset(query.page, query.limit)
    - in_function: DestructionController.list
  Second occurrence: batch index 418
    - source_expr: this.getOffset(query.page, query.limit)
    - in_function: DestructionController.list

[DEBUG] DUPLICATE #419:
  File: backend/src/controllers/destruction.controller.ts
  Line: 18
  Target: result
  First occurrence: batch index 402
    - source_expr: await destructionService.findAll(accountId, {
      limit: query.limit,
      offset,
      order
    - in_function: DestructionController.list
  Second occurrence: batch index 419
    - source_expr: await destructionService.findAll(accountId, {
      limit: query.limit,
      offset,
      order
    - in_function: DestructionController.list

[DEBUG] DUPLICATE #420:
  File: backend/src/controllers/destruction.controller.ts
  Line: 24
  Target: meta
  First occurrence: batch index 403
    - source_expr: this.getPaginationMeta(result.count, query.page, query.limit)
    - in_function: DestructionController.list
  Second occurrence: batch index 420
    - source_expr: this.getPaginationMeta(result.count, query.page, query.limit)
    - in_function: DestructionController.list

[DEBUG] DUPLICATE #421:
  File: backend/src/controllers/destruction.controller.ts
  Line: 29
  Target: { accountId }
  First occurrence: batch index 404
    - source_expr: this.getTenantContext(req)
    - in_function: DestructionController.getById
  Second occurrence: batch index 421
    - source_expr: this.getTenantContext(req)
    - in_function: DestructionController.getById

[DEBUG] DUPLICATE #422:
  File: backend/src/controllers/destruction.controller.ts
  Line: 30
  Target: entity
  First occurrence: batch index 405
    - source_expr: await destructionService.findById(accountId, req.params.id)
    - in_function: DestructionController.getById
  Second occurrence: batch index 422
    - source_expr: await destructionService.findById(accountId, req.params.id)
    - in_function: DestructionController.getById

[DEBUG] DUPLICATE #423:
  File: backend/src/controllers/destruction.controller.ts
  Line: 35
  Target: { accountId, userId }
  First occurrence: batch index 406
    - source_expr: this.getTenantContext(req)
    - in_function: DestructionController.create
  Second occurrence: batch index 423
    - source_expr: this.getTenantContext(req)
    - in_function: DestructionController.create

[DEBUG] DUPLICATE #424:
  File: backend/src/controllers/destruction.controller.ts
  Line: 36
  Target: entity
  First occurrence: batch index 407
    - source_expr: await destructionService.create(accountId, req.body, userId!)
    - in_function: DestructionController.create
  Second occurrence: batch index 424
    - source_expr: await destructionService.create(accountId, req.body, userId!)
    - in_function: DestructionController.create

[DEBUG] DUPLICATE #425:
  File: backend/src/controllers/destruction.controller.ts
  Line: 41
  Target: { accountId, userId }
  First occurrence: batch index 408
    - source_expr: this.getTenantContext(req)
    - in_function: DestructionController.update
  Second occurrence: batch index 425
    - source_expr: this.getTenantContext(req)
    - in_function: DestructionController.update

[DEBUG] DUPLICATE #426:
  File: backend/src/controllers/destruction.controller.ts
  Line: 42
  Target: entity
  First occurrence: batch index 409
    - source_expr: await destructionService.update(accountId, req.params.id, req.body, userId!)
    - in_function: DestructionController.update
  Second occurrence: batch index 426
    - source_expr: await destructionService.update(accountId, req.params.id, req.body, userId!)
    - in_function: DestructionController.update

[DEBUG] DUPLICATE #427:
  File: backend/src/controllers/destruction.controller.ts
  Line: 47
  Target: { accountId, userId }
  First occurrence: batch index 410
    - source_expr: this.getTenantContext(req)
    - in_function: DestructionController.delete
  Second occurrence: batch index 427
    - source_expr: this.getTenantContext(req)
    - in_function: DestructionController.delete

[DEBUG] DUPLICATE #428:
  File: backend/src/controllers/destruction.controller.ts
  Line: 53
  Target: { accountId }
  First occurrence: batch index 411
    - source_expr: this.getTenantContext(req)
    - in_function: DestructionController.getStats
  Second occurrence: batch index 428
    - source_expr: this.getTenantContext(req)
    - in_function: DestructionController.getStats

[DEBUG] DUPLICATE #429:
  File: backend/src/controllers/destruction.controller.ts
  Line: 55
  Target: filters
  First occurrence: batch index 412
    - source_expr: {
      start_date: req.query.start_date ? new Date(req.query.start_date) : undefined,
      end_d
    - in_function: DestructionController.getStats
  Second occurrence: batch index 429
    - source_expr: {
      start_date: req.query.start_date ? new Date(req.query.start_date) : undefined,
      end_d
    - in_function: DestructionController.getStats

[DEBUG] DUPLICATE #430:
  File: backend/src/controllers/destruction.controller.ts
  Line: 60
  Target: stats
  First occurrence: batch index 413
    - source_expr: await destructionService.getDestructionStats(accountId, filters)
    - in_function: DestructionController.getStats
  Second occurrence: batch index 430
    - source_expr: await destructionService.getDestructionStats(accountId, filters)
    - in_function: DestructionController.getStats

[DEBUG] DUPLICATE #431:
  File: backend/src/controllers/destruction.controller.ts
  Line: 65
  Target: { accountId, userId }
  First occurrence: batch index 414
    - source_expr: this.getTenantContext(req)
    - in_function: DestructionController.exportReport
  Second occurrence: batch index 431
    - source_expr: this.getTenantContext(req)
    - in_function: DestructionController.exportReport

[DEBUG] DUPLICATE #432:
  File: backend/src/controllers/destruction.controller.ts
  Line: 67
  Target: report
  First occurrence: batch index 415
    - source_expr: await destructionService.exportDestructionReport(
      accountId,
      {
        start_date: ne
    - in_function: DestructionController.exportReport
  Second occurrence: batch index 432
    - source_expr: await destructionService.exportDestructionReport(
      accountId,
      {
        start_date: ne
    - in_function: DestructionController.exportReport

[DEBUG] DUPLICATE #460:
  File: backend/src/controllers/export.controller.ts
  Line: 25
  Target: accountId: string
  First occurrence: batch index 433
    - source_expr: req.accountId
    - in_function: ExportController.exportPlants
  Second occurrence: batch index 460
    - source_expr: req.accountId
    - in_function: ExportController.exportPlants

[DEBUG] DUPLICATE #461:
  File: backend/src/controllers/export.controller.ts
  Line: 28
  Target: query
  First occurrence: batch index 434
    - source_expr: validation.query.exportList.parse(req.query)
    - in_function: ExportController.exportPlants
  Second occurrence: batch index 461
    - source_expr: validation.query.exportList.parse(req.query)
    - in_function: ExportController.exportPlants

[DEBUG] DUPLICATE #462:
  File: backend/src/controllers/export.controller.ts
  Line: 29
  Target: { format
  First occurrence: batch index 435
    - source_expr: 'csv' } = query
    - in_function: ExportController.exportPlants
  Second occurrence: batch index 462
    - source_expr: 'csv' } = query
    - in_function: ExportController.exportPlants

[DEBUG] DUPLICATE #463:
  File: backend/src/controllers/export.controller.ts
  Line: 30
  Target: filters
  First occurrence: batch index 436
    - source_expr: { ...query }
    - in_function: ExportController.exportPlants
  Second occurrence: batch index 463
    - source_expr: { ...query }
    - in_function: ExportController.exportPlants

[DEBUG] DUPLICATE #464:
  File: backend/src/controllers/export.controller.ts
  Line: 34
  Target: data
  First occurrence: batch index 437
    - source_expr: await this.service.exportPlants(accountId, filters, { format })
    - in_function: ExportController.exportPlants
  Second occurrence: batch index 464
    - source_expr: await this.service.exportPlants(accountId, filters, { format })
    - in_function: ExportController.exportPlants

[DEBUG] DUPLICATE #465:
  File: backend/src/controllers/export.controller.ts
  Line: 61
  Target: accountId: string
  First occurrence: batch index 438
    - source_expr: req.accountId
    - in_function: ExportController.exportBatches
  Second occurrence: batch index 465
    - source_expr: req.accountId
    - in_function: ExportController.exportBatches

[DEBUG] DUPLICATE #466:
  File: backend/src/controllers/export.controller.ts
  Line: 64
  Target: query
  First occurrence: batch index 439
    - source_expr: validation.query.exportList.parse(req.query)
    - in_function: ExportController.exportBatches
  Second occurrence: batch index 466
    - source_expr: validation.query.exportList.parse(req.query)
    - in_function: ExportController.exportBatches

[DEBUG] DUPLICATE #467:
  File: backend/src/controllers/export.controller.ts
  Line: 65
  Target: { format
  First occurrence: batch index 440
    - source_expr: 'csv', start_date, end_date } = query
    - in_function: ExportController.exportBatches
  Second occurrence: batch index 467
    - source_expr: 'csv', start_date, end_date } = query
    - in_function: ExportController.exportBatches

[DEBUG] DUPLICATE #468:
  File: backend/src/controllers/export.controller.ts
  Line: 66
  Target: filters
  First occurrence: batch index 441
    - source_expr: {
        ...query,
        startDate: start_date ? new Date(start_date) : undefined,
        end
    - in_function: ExportController.exportBatches
  Second occurrence: batch index 468
    - source_expr: {
        ...query,
        startDate: start_date ? new Date(start_date) : undefined,
        end
    - in_function: ExportController.exportBatches

[DEBUG] DUPLICATE #469:
  File: backend/src/controllers/export.controller.ts
  Line: 74
  Target: data
  First occurrence: batch index 442
    - source_expr: await this.service.exportBatches(accountId, filters, { format })
    - in_function: ExportController.exportBatches
  Second occurrence: batch index 469
    - source_expr: await this.service.exportBatches(accountId, filters, { format })
    - in_function: ExportController.exportBatches

[DEBUG] DUPLICATE #470:
  File: backend/src/controllers/export.controller.ts
  Line: 101
  Target: accountId: string
  First occurrence: batch index 443
    - source_expr: req.accountId
    - in_function: ExportController.exportOperations
  Second occurrence: batch index 470
    - source_expr: req.accountId
    - in_function: ExportController.exportOperations

[DEBUG] DUPLICATE #471:
  File: backend/src/controllers/export.controller.ts
  Line: 104
  Target: query
  First occurrence: batch index 444
    - source_expr: validation.query.exportList.parse(req.query)
    - in_function: ExportController.exportOperations
  Second occurrence: batch index 471
    - source_expr: validation.query.exportList.parse(req.query)
    - in_function: ExportController.exportOperations

[DEBUG] DUPLICATE #472:
  File: backend/src/controllers/export.controller.ts
  Line: 105
  Target: { format
  First occurrence: batch index 445
    - source_expr: 'csv', start_date, end_date } = query
    - in_function: ExportController.exportOperations
  Second occurrence: batch index 472
    - source_expr: 'csv', start_date, end_date } = query
    - in_function: ExportController.exportOperations

[DEBUG] DUPLICATE #473:
  File: backend/src/controllers/export.controller.ts
  Line: 106
  Target: filters
  First occurrence: batch index 446
    - source_expr: {
        ...query,
        startDate: start_date ? new Date(start_date) : undefined,
        end
    - in_function: ExportController.exportOperations
  Second occurrence: batch index 473
    - source_expr: {
        ...query,
        startDate: start_date ? new Date(start_date) : undefined,
        end
    - in_function: ExportController.exportOperations

[DEBUG] DUPLICATE #474:
  File: backend/src/controllers/export.controller.ts
  Line: 114
  Target: data
  First occurrence: batch index 447
    - source_expr: await this.service.exportOperations(accountId, filters, { format })
    - in_function: ExportController.exportOperations
  Second occurrence: batch index 474
    - source_expr: await this.service.exportOperations(accountId, filters, { format })
    - in_function: ExportController.exportOperations

[DEBUG] DUPLICATE #475:
  File: backend/src/controllers/export.controller.ts
  Line: 141
  Target: accountId: string
  First occurrence: batch index 448
    - source_expr: req.accountId
    - in_function: ExportController.exportAuditLogs
  Second occurrence: batch index 475
    - source_expr: req.accountId
    - in_function: ExportController.exportAuditLogs

[DEBUG] DUPLICATE #476:
  File: backend/src/controllers/export.controller.ts
  Line: 144
  Target: query
  First occurrence: batch index 449
    - source_expr: validation.query.exportList.parse(req.query)
    - in_function: ExportController.exportAuditLogs
  Second occurrence: batch index 476
    - source_expr: validation.query.exportList.parse(req.query)
    - in_function: ExportController.exportAuditLogs

[DEBUG] DUPLICATE #477:
  File: backend/src/controllers/export.controller.ts
  Line: 145
  Target: { format
  First occurrence: batch index 450
    - source_expr: 'csv', start_date, end_date } = query
    - in_function: ExportController.exportAuditLogs
  Second occurrence: batch index 477
    - source_expr: 'csv', start_date, end_date } = query
    - in_function: ExportController.exportAuditLogs

[DEBUG] DUPLICATE #478:
  File: backend/src/controllers/export.controller.ts
  Line: 146
  Target: filters
  First occurrence: batch index 451
    - source_expr: {
        ...query,
        startDate: start_date ? new Date(start_date) : undefined,
        end
    - in_function: ExportController.exportAuditLogs
  Second occurrence: batch index 478
    - source_expr: {
        ...query,
        startDate: start_date ? new Date(start_date) : undefined,
        end
    - in_function: ExportController.exportAuditLogs

[DEBUG] DUPLICATE #479:
  File: backend/src/controllers/export.controller.ts
  Line: 154
  Target: data
  First occurrence: batch index 452
    - source_expr: await this.service.exportAuditLogs(accountId, filters, { format })
    - in_function: ExportController.exportAuditLogs
  Second occurrence: batch index 479
    - source_expr: await this.service.exportAuditLogs(accountId, filters, { format })
    - in_function: ExportController.exportAuditLogs

[DEBUG] DUPLICATE #480:
  File: backend/src/controllers/export.controller.ts
  Line: 181
  Target: accountId: string
  First occurrence: batch index 453
    - source_expr: req.accountId
    - in_function: ExportController.exportFacilityHierarchy
  Second occurrence: batch index 480
    - source_expr: req.accountId
    - in_function: ExportController.exportFacilityHierarchy

[DEBUG] DUPLICATE #481:
  File: backend/src/controllers/export.controller.ts
  Line: 184
  Target: query
  First occurrence: batch index 454
    - source_expr: validation.query.exportList.parse(req.query)
    - in_function: ExportController.exportFacilityHierarchy
  Second occurrence: batch index 481
    - source_expr: validation.query.exportList.parse(req.query)
    - in_function: ExportController.exportFacilityHierarchy

[DEBUG] DUPLICATE #482:
  File: backend/src/controllers/export.controller.ts
  Line: 185
  Target: { format
  First occurrence: batch index 455
    - source_expr: 'json', facility_id: facilityId } = query
    - in_function: ExportController.exportFacilityHierarchy
  Second occurrence: batch index 482
    - source_expr: 'json', facility_id: facilityId } = query
    - in_function: ExportController.exportFacilityHierarchy

[DEBUG] DUPLICATE #483:
  File: backend/src/controllers/export.controller.ts
  Line: 193
  Target: data
  First occurrence: batch index 456
    - source_expr: await this.service.exportLocationHierarchy(accountId, facilityId, { format })
    - in_function: ExportController.exportFacilityHierarchy
  Second occurrence: batch index 483
    - source_expr: await this.service.exportLocationHierarchy(accountId, facilityId, { format })
    - in_function: ExportController.exportFacilityHierarchy

[DEBUG] DUPLICATE #484:
  File: backend/src/controllers/export.controller.ts
  Line: 216
  Target: templates
  First occurrence: batch index 457
    - source_expr: [
        { id: 'plants', name: 'Plants Export', fields: ['plant_code', 'batch', 'status'] },
    
    - in_function: ExportController./**
   * Get available export templates
   */
  getTemplates
  Second occurrence: batch index 484
    - source_expr: [
        { id: 'plants', name: 'Plants Export', fields: ['plant_code', 'batch', 'status'] },
    
    - in_function: ExportController./**
   * Get available export templates
   */
  getTemplates

[DEBUG] DUPLICATE #485:
  File: backend/src/controllers/export.controller.ts
  Line: 237
  Target: accountId: string
  First occurrence: batch index 458
    - source_expr: req.accountId
    - in_function: ExportController.exportEntity
  Second occurrence: batch index 485
    - source_expr: req.accountId
    - in_function: ExportController.exportEntity

[DEBUG] DUPLICATE #486:
  File: backend/src/controllers/export.controller.ts
  Line: 239
  Target: { entityType, entityId }
  First occurrence: batch index 459
    - source_expr: req.params
    - in_function: ExportController.exportEntity
  Second occurrence: batch index 486
    - source_expr: req.params
    - in_function: ExportController.exportEntity

[DEBUG] DUPLICATE #510:
  File: backend/src/controllers/facility.controller.ts
  Line: 22
  Target: controller
  First occurrence: batch index 488
    - source_expr: new FacilityController()
    - in_function: FacilityController.create
  Second occurrence: batch index 510
    - source_expr: new FacilityController()
    - in_function: FacilityController.create

[DEBUG] DUPLICATE #511:
  File: backend/src/controllers/facility.controller.ts
  Line: 23
  Target: { accountId, userId }
  First occurrence: batch index 489
    - source_expr: controller.getTenantContext(req)
    - in_function: FacilityController.create
  Second occurrence: batch index 511
    - source_expr: controller.getTenantContext(req)
    - in_function: FacilityController.create

[DEBUG] DUPLICATE #512:
  File: backend/src/controllers/facility.controller.ts
  Line: 26
  Target: facility
  First occurrence: batch index 490
    - source_expr: await controller.facilityService.createFacility(
        accountId,
        req.body,  // Pass ent
    - in_function: FacilityController.create
  Second occurrence: batch index 512
    - source_expr: await controller.facilityService.createFacility(
        accountId,
        req.body,  // Pass ent
    - in_function: FacilityController.create

[DEBUG] DUPLICATE #513:
  File: backend/src/controllers/facility.controller.ts
  Line: 44
  Target: controller
  First occurrence: batch index 491
    - source_expr: new FacilityController()
    - in_function: FacilityController.list
  Second occurrence: batch index 513
    - source_expr: new FacilityController()
    - in_function: FacilityController.list

[DEBUG] DUPLICATE #514:
  File: backend/src/controllers/facility.controller.ts
  Line: 45
  Target: { accountId }
  First occurrence: batch index 492
    - source_expr: controller.getTenantContext(req)
    - in_function: FacilityController.list
  Second occurrence: batch index 514
    - source_expr: controller.getTenantContext(req)
    - in_function: FacilityController.list

[DEBUG] DUPLICATE #515:
  File: backend/src/controllers/facility.controller.ts
  Line: 48
  Target: query
  First occurrence: batch index 493
    - source_expr: validation.query.facilityList.parse(req.query)
    - in_function: FacilityController.list
  Second occurrence: batch index 515
    - source_expr: validation.query.facilityList.parse(req.query)
    - in_function: FacilityController.list

[DEBUG] DUPLICATE #516:
  File: backend/src/controllers/facility.controller.ts
  Line: 50
  Target: { facilities, total }
  First occurrence: batch index 494
    - source_expr: await controller.facilityService.listFacilities(
        accountId,
        {
          limit: qu
    - in_function: FacilityController.list
  Second occurrence: batch index 516
    - source_expr: await controller.facilityService.listFacilities(
        accountId,
        {
          limit: qu
    - in_function: FacilityController.list

[DEBUG] DUPLICATE #517:
  File: backend/src/controllers/facility.controller.ts
  Line: 59
  Target: meta
  First occurrence: batch index 495
    - source_expr: controller.getPaginationMeta(total, query.page, query.limit)
    - in_function: FacilityController.list
  Second occurrence: batch index 517
    - source_expr: controller.getPaginationMeta(total, query.page, query.limit)
    - in_function: FacilityController.list

[DEBUG] DUPLICATE #518:
  File: backend/src/controllers/facility.controller.ts
  Line: 72
  Target: controller
  First occurrence: batch index 496
    - source_expr: new FacilityController()
    - in_function: FacilityController.getById
  Second occurrence: batch index 518
    - source_expr: new FacilityController()
    - in_function: FacilityController.getById

[DEBUG] DUPLICATE #519:
  File: backend/src/controllers/facility.controller.ts
  Line: 73
  Target: { accountId }
  First occurrence: batch index 497
    - source_expr: controller.getTenantContext(req)
    - in_function: FacilityController.getById
  Second occurrence: batch index 519
    - source_expr: controller.getTenantContext(req)
    - in_function: FacilityController.getById

[DEBUG] DUPLICATE #520:
  File: backend/src/controllers/facility.controller.ts
  Line: 74
  Target: { id }
  First occurrence: batch index 498
    - source_expr: req.params
    - in_function: FacilityController.getById
  Second occurrence: batch index 520
    - source_expr: req.params
    - in_function: FacilityController.getById

[DEBUG] DUPLICATE #521:
  File: backend/src/controllers/facility.controller.ts
  Line: 77
  Target: facility
  First occurrence: batch index 499
    - source_expr: await controller.facilityService.getFacility(accountId, id)
    - in_function: FacilityController.getById
  Second occurrence: batch index 521
    - source_expr: await controller.facilityService.getFacility(accountId, id)
    - in_function: FacilityController.getById

[DEBUG] DUPLICATE #522:
  File: backend/src/controllers/facility.controller.ts
  Line: 90
  Target: controller
  First occurrence: batch index 500
    - source_expr: new FacilityController()
    - in_function: FacilityController.update
  Second occurrence: batch index 522
    - source_expr: new FacilityController()
    - in_function: FacilityController.update

[DEBUG] DUPLICATE #523:
  File: backend/src/controllers/facility.controller.ts
  Line: 91
  Target: { accountId, userId }
  First occurrence: batch index 501
    - source_expr: controller.getTenantContext(req)
    - in_function: FacilityController.update
  Second occurrence: batch index 523
    - source_expr: controller.getTenantContext(req)
    - in_function: FacilityController.update

[DEBUG] DUPLICATE #524:
  File: backend/src/controllers/facility.controller.ts
  Line: 92
  Target: { id }
  First occurrence: batch index 502
    - source_expr: req.params
    - in_function: FacilityController.update
  Second occurrence: batch index 524
    - source_expr: req.params
    - in_function: FacilityController.update

[DEBUG] DUPLICATE #525:
  File: backend/src/controllers/facility.controller.ts
  Line: 95
  Target: facility
  First occurrence: batch index 503
    - source_expr: await controller.facilityService.updateFacility(accountId, id, req.body, userId)
    - in_function: FacilityController.update
  Second occurrence: batch index 525
    - source_expr: await controller.facilityService.updateFacility(accountId, id, req.body, userId)
    - in_function: FacilityController.update

[DEBUG] DUPLICATE #526:
  File: backend/src/controllers/facility.controller.ts
  Line: 108
  Target: controller
  First occurrence: batch index 504
    - source_expr: new FacilityController()
    - in_function: FacilityController.delete
  Second occurrence: batch index 526
    - source_expr: new FacilityController()
    - in_function: FacilityController.delete

[DEBUG] DUPLICATE #527:
  File: backend/src/controllers/facility.controller.ts
  Line: 109
  Target: { accountId, userId }
  First occurrence: batch index 505
    - source_expr: controller.getTenantContext(req)
    - in_function: FacilityController.delete
  Second occurrence: batch index 527
    - source_expr: controller.getTenantContext(req)
    - in_function: FacilityController.delete

[DEBUG] DUPLICATE #528:
  File: backend/src/controllers/facility.controller.ts
  Line: 110
  Target: { id }
  First occurrence: batch index 506
    - source_expr: req.params
    - in_function: FacilityController.delete
  Second occurrence: batch index 528
    - source_expr: req.params
    - in_function: FacilityController.delete

[DEBUG] DUPLICATE #529:
  File: backend/src/controllers/facility.controller.ts
  Line: 126
  Target: controller
  First occurrence: batch index 507
    - source_expr: new FacilityController()
    - in_function: FacilityController.validateLicense
  Second occurrence: batch index 529
    - source_expr: new FacilityController()
    - in_function: FacilityController.validateLicense

[DEBUG] DUPLICATE #530:
  File: backend/src/controllers/facility.controller.ts
  Line: 127
  Target: { license_number }
  First occurrence: batch index 508
    - source_expr: req.body
    - in_function: FacilityController.validateLicense
  Second occurrence: batch index 530
    - source_expr: req.body
    - in_function: FacilityController.validateLicense

[DEBUG] DUPLICATE #531:
  File: backend/src/controllers/facility.controller.ts
  Line: 130
  Target: isValid
  First occurrence: batch index 509
    - source_expr: controller.facilityService.validateLicense(license_number)
    - in_function: FacilityController.validateLicense
  Second occurrence: batch index 531
    - source_expr: controller.facilityService.validateLicense(license_number)
    - in_function: FacilityController.validateLicense

[DEBUG] DUPLICATE #546:
  File: backend/src/controllers/genetics.controller.ts
  Line: 16
  Target: { accountId, userId }
  First occurrence: batch index 533
    - source_expr: this.getTenantContext(req)
    - in_function: GeneticsController./**
   * Create genetics strain
   */
  createGenetics
  Second occurrence: batch index 546
    - source_expr: this.getTenantContext(req)
    - in_function: GeneticsController./**
   * Create genetics strain
   */
  createGenetics

[DEBUG] DUPLICATE #547:
  File: backend/src/controllers/genetics.controller.ts
  Line: 17
  Target: genetics
  First occurrence: batch index 534
    - source_expr: await geneticsService.create(
      accountId,
      req.body,
      userId!
    )
    - in_function: GeneticsController./**
   * Create genetics strain
   */
  createGenetics
  Second occurrence: batch index 547
    - source_expr: await geneticsService.create(
      accountId,
      req.body,
      userId!
    )
    - in_function: GeneticsController./**
   * Create genetics strain
   */
  createGenetics

[DEBUG] DUPLICATE #548:
  File: backend/src/controllers/genetics.controller.ts
  Line: 30
  Target: { accountId }
  First occurrence: batch index 535
    - source_expr: this.getTenantContext(req)
    - in_function: GeneticsController./**
   * Get genetics by ID
   */
  getGenetics
  Second occurrence: batch index 548
    - source_expr: this.getTenantContext(req)
    - in_function: GeneticsController./**
   * Get genetics by ID
   */
  getGenetics

[DEBUG] DUPLICATE #549:
  File: backend/src/controllers/genetics.controller.ts
  Line: 31
  Target: genetics
  First occurrence: batch index 536
    - source_expr: await geneticsService.findById(
      accountId,
      req.params.id
    )
    - in_function: GeneticsController./**
   * Get genetics by ID
   */
  getGenetics
  Second occurrence: batch index 549
    - source_expr: await geneticsService.findById(
      accountId,
      req.params.id
    )
    - in_function: GeneticsController./**
   * Get genetics by ID
   */
  getGenetics

[DEBUG] DUPLICATE #550:
  File: backend/src/controllers/genetics.controller.ts
  Line: 43
  Target: { accountId }
  First occurrence: batch index 537
    - source_expr: this.getTenantContext(req)
    - in_function: GeneticsController./**
   * List genetics strains
   */
  listGenetics
  Second occurrence: batch index 550
    - source_expr: this.getTenantContext(req)
    - in_function: GeneticsController./**
   * List genetics strains
   */
  listGenetics

[DEBUG] DUPLICATE #551:
  File: backend/src/controllers/genetics.controller.ts
  Line: 46
  Target: query
  First occurrence: batch index 538
    - source_expr: validation.query.geneticsList.parse(req.query)
    - in_function: GeneticsController./**
   * List genetics strains
   */
  listGenetics
  Second occurrence: batch index 551
    - source_expr: validation.query.geneticsList.parse(req.query)
    - in_function: GeneticsController./**
   * List genetics strains
   */
  listGenetics

[DEBUG] DUPLICATE #552:
  File: backend/src/controllers/genetics.controller.ts
  Line: 47
  Target: offset
  First occurrence: batch index 539
    - source_expr: this.getOffset(query.page, query.limit)
    - in_function: GeneticsController./**
   * List genetics strains
   */
  listGenetics
  Second occurrence: batch index 552
    - source_expr: this.getOffset(query.page, query.limit)
    - in_function: GeneticsController./**
   * List genetics strains
   */
  listGenetics

[DEBUG] DUPLICATE #553:
  File: backend/src/controllers/genetics.controller.ts
  Line: 50
  Target: where: Record<string, unknown>
  First occurrence: batch index 540
    - source_expr: {}
    - in_function: GeneticsController./**
   * List genetics strains
   */
  listGenetics
  Second occurrence: batch index 553
    - source_expr: {}
    - in_function: GeneticsController./**
   * List genetics strains
   */
  listGenetics

[DEBUG] DUPLICATE #554:
  File: backend/src/controllers/genetics.controller.ts
  Line: 55
  Target: result
  First occurrence: batch index 541
    - source_expr: await geneticsService.findAll(accountId, {
      where,
      limit: query.limit,
      offset,

    - in_function: GeneticsController./**
   * List genetics strains
   */
  listGenetics
  Second occurrence: batch index 554
    - source_expr: await geneticsService.findAll(accountId, {
      where,
      limit: query.limit,
      offset,

    - in_function: GeneticsController./**
   * List genetics strains
   */
  listGenetics

[DEBUG] DUPLICATE #555:
  File: backend/src/controllers/genetics.controller.ts
  Line: 62
  Target: meta
  First occurrence: batch index 542
    - source_expr: this.getPaginationMeta(result.count, query.page, query.limit)
    - in_function: GeneticsController./**
   * List genetics strains
   */
  listGenetics
  Second occurrence: batch index 555
    - source_expr: this.getPaginationMeta(result.count, query.page, query.limit)
    - in_function: GeneticsController./**
   * List genetics strains
   */
  listGenetics

[DEBUG] DUPLICATE #556:
  File: backend/src/controllers/genetics.controller.ts
  Line: 70
  Target: { accountId, userId }
  First occurrence: batch index 543
    - source_expr: this.getTenantContext(req)
    - in_function: GeneticsController./**
   * Update genetics strain
   */
  updateGenetics
  Second occurrence: batch index 556
    - source_expr: this.getTenantContext(req)
    - in_function: GeneticsController./**
   * Update genetics strain
   */
  updateGenetics

[DEBUG] DUPLICATE #557:
  File: backend/src/controllers/genetics.controller.ts
  Line: 71
  Target: genetics
  First occurrence: batch index 544
    - source_expr: await geneticsService.update(
      accountId,
      req.params.id,
      req.body,
      userId
    - in_function: GeneticsController./**
   * Update genetics strain
   */
  updateGenetics
  Second occurrence: batch index 557
    - source_expr: await geneticsService.update(
      accountId,
      req.params.id,
      req.body,
      userId
    - in_function: GeneticsController./**
   * Update genetics strain
   */
  updateGenetics

[DEBUG] DUPLICATE #558:
  File: backend/src/controllers/genetics.controller.ts
  Line: 85
  Target: { accountId, userId }
  First occurrence: batch index 545
    - source_expr: this.getTenantContext(req)
    - in_function: GeneticsController./**
   * Deactivate genetics strain
   */
  deactivateGenetics
  Second occurrence: batch index 558
    - source_expr: this.getTenantContext(req)
    - in_function: GeneticsController./**
   * Deactivate genetics strain
   */
  deactivateGenetics

[DEBUG] DUPLICATE #572:
  File: backend/src/controllers/harvest.controller.ts
  Line: 12
  Target: { accountId }
  First occurrence: batch index 560
    - source_expr: this.getTenantContext(req)
    - in_function: HarvestController.list
  Second occurrence: batch index 572
    - source_expr: this.getTenantContext(req)
    - in_function: HarvestController.list

[DEBUG] DUPLICATE #573:
  File: backend/src/controllers/harvest.controller.ts
  Line: 15
  Target: query
  First occurrence: batch index 561
    - source_expr: validation.params.pagination.parse(req.query)
    - in_function: HarvestController.list
  Second occurrence: batch index 573
    - source_expr: validation.params.pagination.parse(req.query)
    - in_function: HarvestController.list

[DEBUG] DUPLICATE #574:
  File: backend/src/controllers/harvest.controller.ts
  Line: 16
  Target: offset
  First occurrence: batch index 562
    - source_expr: this.getOffset(query.page, query.limit)
    - in_function: HarvestController.list
  Second occurrence: batch index 574
    - source_expr: this.getOffset(query.page, query.limit)
    - in_function: HarvestController.list

[DEBUG] DUPLICATE #575:
  File: backend/src/controllers/harvest.controller.ts
  Line: 18
  Target: result
  First occurrence: batch index 563
    - source_expr: await harvestService.findAll(accountId, {
      limit: query.limit,
      offset,
      order: [[
    - in_function: HarvestController.list
  Second occurrence: batch index 575
    - source_expr: await harvestService.findAll(accountId, {
      limit: query.limit,
      offset,
      order: [[
    - in_function: HarvestController.list

[DEBUG] DUPLICATE #576:
  File: backend/src/controllers/harvest.controller.ts
  Line: 24
  Target: meta
  First occurrence: batch index 564
    - source_expr: this.getPaginationMeta(result.count, query.page, query.limit)
    - in_function: HarvestController.list
  Second occurrence: batch index 576
    - source_expr: this.getPaginationMeta(result.count, query.page, query.limit)
    - in_function: HarvestController.list

[DEBUG] DUPLICATE #577:
  File: backend/src/controllers/harvest.controller.ts
  Line: 29
  Target: { accountId }
  First occurrence: batch index 565
    - source_expr: this.getTenantContext(req)
    - in_function: HarvestController.getById
  Second occurrence: batch index 577
    - source_expr: this.getTenantContext(req)
    - in_function: HarvestController.getById

[DEBUG] DUPLICATE #578:
  File: backend/src/controllers/harvest.controller.ts
  Line: 30
  Target: entity
  First occurrence: batch index 566
    - source_expr: await harvestService.findById(accountId, req.params.id)
    - in_function: HarvestController.getById
  Second occurrence: batch index 578
    - source_expr: await harvestService.findById(accountId, req.params.id)
    - in_function: HarvestController.getById

[DEBUG] DUPLICATE #579:
  File: backend/src/controllers/harvest.controller.ts
  Line: 35
  Target: { accountId, userId }
  First occurrence: batch index 567
    - source_expr: this.getTenantContext(req)
    - in_function: HarvestController.create
  Second occurrence: batch index 579
    - source_expr: this.getTenantContext(req)
    - in_function: HarvestController.create

[DEBUG] DUPLICATE #580:
  File: backend/src/controllers/harvest.controller.ts
  Line: 36
  Target: entity
  First occurrence: batch index 568
    - source_expr: await harvestService.create(accountId, req.body, userId!)
    - in_function: HarvestController.create
  Second occurrence: batch index 580
    - source_expr: await harvestService.create(accountId, req.body, userId!)
    - in_function: HarvestController.create

[DEBUG] DUPLICATE #581:
  File: backend/src/controllers/harvest.controller.ts
  Line: 41
  Target: { accountId, userId }
  First occurrence: batch index 569
    - source_expr: this.getTenantContext(req)
    - in_function: HarvestController.update
  Second occurrence: batch index 581
    - source_expr: this.getTenantContext(req)
    - in_function: HarvestController.update

[DEBUG] DUPLICATE #582:
  File: backend/src/controllers/harvest.controller.ts
  Line: 42
  Target: entity
  First occurrence: batch index 570
    - source_expr: await harvestService.update(accountId, req.params.id, req.body, userId!)
    - in_function: HarvestController.update
  Second occurrence: batch index 582
    - source_expr: await harvestService.update(accountId, req.params.id, req.body, userId!)
    - in_function: HarvestController.update

[DEBUG] DUPLICATE #583:
  File: backend/src/controllers/harvest.controller.ts
  Line: 47
  Target: { accountId, userId }
  First occurrence: batch index 571
    - source_expr: this.getTenantContext(req)
    - in_function: HarvestController.delete
  Second occurrence: batch index 583
    - source_expr: this.getTenantContext(req)
    - in_function: HarvestController.delete

[DEBUG] DUPLICATE #618:
  File: backend/src/controllers/location.controller.ts
  Line: 27
  Target: controller
  First occurrence: batch index 584
    - source_expr: new LocationController()
    - in_function: LocationController.findAllWithFacility
  Second occurrence: batch index 618
    - source_expr: new LocationController()
    - in_function: LocationController.findAllWithFacility

[DEBUG] DUPLICATE #619:
  File: backend/src/controllers/location.controller.ts
  Line: 28
  Target: { accountId }
  First occurrence: batch index 585
    - source_expr: controller.getTenantContext(req)
    - in_function: LocationController.findAllWithFacility
  Second occurrence: batch index 619
    - source_expr: controller.getTenantContext(req)
    - in_function: LocationController.findAllWithFacility

[DEBUG] DUPLICATE #620:
  File: backend/src/controllers/location.controller.ts
  Line: 30
  Target: locations
  First occurrence: batch index 586
    - source_expr: await controller.locationService.findAllWithFacility(accountId)
    - in_function: LocationController.findAllWithFacility
  Second occurrence: batch index 620
    - source_expr: await controller.locationService.findAllWithFacility(accountId)
    - in_function: LocationController.findAllWithFacility

[DEBUG] DUPLICATE #621:
  File: backend/src/controllers/location.controller.ts
  Line: 43
  Target: controller
  First occurrence: batch index 587
    - source_expr: new LocationController()
    - in_function: LocationController.findByFacility
  Second occurrence: batch index 621
    - source_expr: new LocationController()
    - in_function: LocationController.findByFacility

[DEBUG] DUPLICATE #622:
  File: backend/src/controllers/location.controller.ts
  Line: 44
  Target: { accountId }
  First occurrence: batch index 588
    - source_expr: controller.getTenantContext(req)
    - in_function: LocationController.findByFacility
  Second occurrence: batch index 622
    - source_expr: controller.getTenantContext(req)
    - in_function: LocationController.findByFacility

[DEBUG] DUPLICATE #623:
  File: backend/src/controllers/location.controller.ts
  Line: 46
  Target: { facilityId }
  First occurrence: batch index 589
    - source_expr: req.params
    - in_function: LocationController.findByFacility
  Second occurrence: batch index 623
    - source_expr: req.params
    - in_function: LocationController.findByFacility

[DEBUG] DUPLICATE #624:
  File: backend/src/controllers/location.controller.ts
  Line: 47
  Target: locations
  First occurrence: batch index 590
    - source_expr: await controller.locationService.findByFacility(accountId, facilityId)
    - in_function: LocationController.findByFacility
  Second occurrence: batch index 624
    - source_expr: await controller.locationService.findByFacility(accountId, facilityId)
    - in_function: LocationController.findByFacility

[DEBUG] DUPLICATE #625:
  File: backend/src/controllers/location.controller.ts
  Line: 60
  Target: controller
  First occurrence: batch index 591
    - source_expr: new LocationController()
    - in_function: LocationController.getHierarchy
  Second occurrence: batch index 625
    - source_expr: new LocationController()
    - in_function: LocationController.getHierarchy

[DEBUG] DUPLICATE #626:
  File: backend/src/controllers/location.controller.ts
  Line: 61
  Target: { accountId }
  First occurrence: batch index 592
    - source_expr: controller.getTenantContext(req)
    - in_function: LocationController.getHierarchy
  Second occurrence: batch index 626
    - source_expr: controller.getTenantContext(req)
    - in_function: LocationController.getHierarchy

[DEBUG] DUPLICATE #627:
  File: backend/src/controllers/location.controller.ts
  Line: 63
  Target: { id }
  First occurrence: batch index 593
    - source_expr: req.params
    - in_function: LocationController.getHierarchy
  Second occurrence: batch index 627
    - source_expr: req.params
    - in_function: LocationController.getHierarchy

[DEBUG] DUPLICATE #628:
  File: backend/src/controllers/location.controller.ts
  Line: 64
  Target: hierarchy
  First occurrence: batch index 594
    - source_expr: await controller.locationService.getLocationHierarchy(accountId, id)
    - in_function: LocationController.getHierarchy
  Second occurrence: batch index 628
    - source_expr: await controller.locationService.getLocationHierarchy(accountId, id)
    - in_function: LocationController.getHierarchy

[DEBUG] DUPLICATE #629:
  File: backend/src/controllers/location.controller.ts
  Line: 77
  Target: controller
  First occurrence: batch index 595
    - source_expr: new LocationController()
    - in_function: LocationController.search
  Second occurrence: batch index 629
    - source_expr: new LocationController()
    - in_function: LocationController.search

[DEBUG] DUPLICATE #630:
  File: backend/src/controllers/location.controller.ts
  Line: 78
  Target: { accountId }
  First occurrence: batch index 596
    - source_expr: controller.getTenantContext(req)
    - in_function: LocationController.search
  Second occurrence: batch index 630
    - source_expr: controller.getTenantContext(req)
    - in_function: LocationController.search

[DEBUG] DUPLICATE #631:
  File: backend/src/controllers/location.controller.ts
  Line: 81
  Target: parsedQuery
  First occurrence: batch index 597
    - source_expr: validation.query.locationList.parse(req.query)
    - in_function: LocationController.search
  Second occurrence: batch index 631
    - source_expr: validation.query.locationList.parse(req.query)
    - in_function: LocationController.search

[DEBUG] DUPLICATE #632:
  File: backend/src/controllers/location.controller.ts
  Line: 82
  Target: searchQuery
  First occurrence: batch index 598
    - source_expr: parsedQuery.search
    - in_function: LocationController.search
  Second occurrence: batch index 632
    - source_expr: parsedQuery.search
    - in_function: LocationController.search

[DEBUG] DUPLICATE #633:
  File: backend/src/controllers/location.controller.ts
  Line: 89
  Target: results
  First occurrence: batch index 599
    - source_expr: await controller.locationService.search(accountId, searchQuery)
    - in_function: LocationController.search
  Second occurrence: batch index 633
    - source_expr: await controller.locationService.search(accountId, searchQuery)
    - in_function: LocationController.search

[DEBUG] DUPLICATE #634:
  File: backend/src/controllers/location.controller.ts
  Line: 92
  Target: parsedQuery
  First occurrence: batch index 600
    - source_expr: validation.query.locationList.safeParse(req.query)
    - in_function: LocationController.search
  Second occurrence: batch index 634
    - source_expr: validation.query.locationList.safeParse(req.query)
    - in_function: LocationController.search

[DEBUG] DUPLICATE #635:
  File: backend/src/controllers/location.controller.ts
  Line: 103
  Target: controller
  First occurrence: batch index 601
    - source_expr: new LocationController()
    - in_function: LocationController.findAll
  Second occurrence: batch index 635
    - source_expr: new LocationController()
    - in_function: LocationController.findAll

[DEBUG] DUPLICATE #636:
  File: backend/src/controllers/location.controller.ts
  Line: 104
  Target: { accountId }
  First occurrence: batch index 602
    - source_expr: controller.getTenantContext(req)
    - in_function: LocationController.findAll
  Second occurrence: batch index 636
    - source_expr: controller.getTenantContext(req)
    - in_function: LocationController.findAll

[DEBUG] DUPLICATE #637:
  File: backend/src/controllers/location.controller.ts
  Line: 106
  Target: locations
  First occurrence: batch index 603
    - source_expr: await controller.locationService.findAll(accountId)
    - in_function: LocationController.findAll
  Second occurrence: batch index 637
    - source_expr: await controller.locationService.findAll(accountId)
    - in_function: LocationController.findAll

[DEBUG] DUPLICATE #638:
  File: backend/src/controllers/location.controller.ts
  Line: 119
  Target: controller
  First occurrence: batch index 604
    - source_expr: new LocationController()
    - in_function: LocationController.findOne
  Second occurrence: batch index 638
    - source_expr: new LocationController()
    - in_function: LocationController.findOne

[DEBUG] DUPLICATE #639:
  File: backend/src/controllers/location.controller.ts
  Line: 120
  Target: { accountId }
  First occurrence: batch index 605
    - source_expr: controller.getTenantContext(req)
    - in_function: LocationController.findOne
  Second occurrence: batch index 639
    - source_expr: controller.getTenantContext(req)
    - in_function: LocationController.findOne

[DEBUG] DUPLICATE #640:
  File: backend/src/controllers/location.controller.ts
  Line: 122
  Target: { id }
  First occurrence: batch index 606
    - source_expr: req.params
    - in_function: LocationController.findOne
  Second occurrence: batch index 640
    - source_expr: req.params
    - in_function: LocationController.findOne

[DEBUG] DUPLICATE #641:
  File: backend/src/controllers/location.controller.ts
  Line: 123
  Target: location
  First occurrence: batch index 607
    - source_expr: await controller.locationService.findById(accountId, id)
    - in_function: LocationController.findOne
  Second occurrence: batch index 641
    - source_expr: await controller.locationService.findById(accountId, id)
    - in_function: LocationController.findOne

[DEBUG] DUPLICATE #642:
  File: backend/src/controllers/location.controller.ts
  Line: 142
  Target: controller
  First occurrence: batch index 608
    - source_expr: new LocationController()
    - in_function: LocationController.create
  Second occurrence: batch index 642
    - source_expr: new LocationController()
    - in_function: LocationController.create

[DEBUG] DUPLICATE #643:
  File: backend/src/controllers/location.controller.ts
  Line: 143
  Target: { accountId, userId }
  First occurrence: batch index 609
    - source_expr: controller.getTenantContext(req)
    - in_function: LocationController.create
  Second occurrence: batch index 643
    - source_expr: controller.getTenantContext(req)
    - in_function: LocationController.create

[DEBUG] DUPLICATE #644:
  File: backend/src/controllers/location.controller.ts
  Line: 145
  Target: location
  First occurrence: batch index 610
    - source_expr: await controller.locationService.create(accountId, req.body, userId!)
    - in_function: LocationController.create
  Second occurrence: batch index 644
    - source_expr: await controller.locationService.create(accountId, req.body, userId!)
    - in_function: LocationController.create

[DEBUG] DUPLICATE #645:
  File: backend/src/controllers/location.controller.ts
  Line: 158
  Target: controller
  First occurrence: batch index 611
    - source_expr: new LocationController()
    - in_function: LocationController.update
  Second occurrence: batch index 645
    - source_expr: new LocationController()
    - in_function: LocationController.update

[DEBUG] DUPLICATE #646:
  File: backend/src/controllers/location.controller.ts
  Line: 159
  Target: { accountId, userId }
  First occurrence: batch index 612
    - source_expr: controller.getTenantContext(req)
    - in_function: LocationController.update
  Second occurrence: batch index 646
    - source_expr: controller.getTenantContext(req)
    - in_function: LocationController.update

[DEBUG] DUPLICATE #647:
  File: backend/src/controllers/location.controller.ts
  Line: 161
  Target: { id }
  First occurrence: batch index 613
    - source_expr: req.params
    - in_function: LocationController.update
  Second occurrence: batch index 647
    - source_expr: req.params
    - in_function: LocationController.update

[DEBUG] DUPLICATE #648:
  File: backend/src/controllers/location.controller.ts
  Line: 162
  Target: location
  First occurrence: batch index 614
    - source_expr: await controller.locationService.update(accountId, id, req.body, userId!)
    - in_function: LocationController.update
  Second occurrence: batch index 648
    - source_expr: await controller.locationService.update(accountId, id, req.body, userId!)
    - in_function: LocationController.update

[DEBUG] DUPLICATE #649:
  File: backend/src/controllers/location.controller.ts
  Line: 181
  Target: controller
  First occurrence: batch index 615
    - source_expr: new LocationController()
    - in_function: LocationController.delete
  Second occurrence: batch index 649
    - source_expr: new LocationController()
    - in_function: LocationController.delete

[DEBUG] DUPLICATE #650:
  File: backend/src/controllers/location.controller.ts
  Line: 182
  Target: { accountId, userId }
  First occurrence: batch index 616
    - source_expr: controller.getTenantContext(req)
    - in_function: LocationController.delete
  Second occurrence: batch index 650
    - source_expr: controller.getTenantContext(req)
    - in_function: LocationController.delete

[DEBUG] DUPLICATE #651:
  File: backend/src/controllers/location.controller.ts
  Line: 184
  Target: { id }
  First occurrence: batch index 617
    - source_expr: req.params
    - in_function: LocationController.delete
  Second occurrence: batch index 651
    - source_expr: req.params
    - in_function: LocationController.delete

[DEBUG] DUPLICATE #677:
  File: backend/src/controllers/operation.controller.ts
  Line: 24
  Target: { accountId, userId }
  First occurrence: batch index 653
    - source_expr: this.getTenantContext(req)
    - in_function: OperationController./**
   * Record new operation
   * POST /api/v1/operations
   */
  record
  Second occurrence: batch index 677
    - source_expr: this.getTenantContext(req)
    - in_function: OperationController./**
   * Record new operation
   * POST /api/v1/operations
   */
  record

[DEBUG] DUPLICATE #678:
  File: backend/src/controllers/operation.controller.ts
  Line: 27
  Target: operation
  First occurrence: batch index 654
    - source_expr: await this.operationService.recordOperation(accountId, userId!, req.body)
    - in_function: OperationController./**
   * Record new operation
   * POST /api/v1/operations
   */
  record
  Second occurrence: batch index 678
    - source_expr: await this.operationService.recordOperation(accountId, userId!, req.body)
    - in_function: OperationController./**
   * Record new operation
   * POST /api/v1/operations
   */
  record

[DEBUG] DUPLICATE #679:
  File: backend/src/controllers/operation.controller.ts
  Line: 37
  Target: { accountId, userId }
  First occurrence: batch index 655
    - source_expr: this.getTenantContext(req)
    - in_function: OperationController./**
   * Bulk record operations (for offline sync)
   * POST /api/v1/operations/bulk
   */
  bulkRecord
  Second occurrence: batch index 679
    - source_expr: this.getTenantContext(req)
    - in_function: OperationController./**
   * Bulk record operations (for offline sync)
   * POST /api/v1/operations/bulk
   */
  bulkRecord

[DEBUG] DUPLICATE #680:
  File: backend/src/controllers/operation.controller.ts
  Line: 38
  Target: { operations }
  First occurrence: batch index 656
    - source_expr: req.body
    - in_function: OperationController./**
   * Bulk record operations (for offline sync)
   * POST /api/v1/operations/bulk
   */
  bulkRecord
  Second occurrence: batch index 680
    - source_expr: req.body
    - in_function: OperationController./**
   * Bulk record operations (for offline sync)
   * POST /api/v1/operations/bulk
   */
  bulkRecord

[DEBUG] DUPLICATE #681:
  File: backend/src/controllers/operation.controller.ts
  Line: 41
  Target: recorded
  First occurrence: batch index 657
    - source_expr: await this.operationService.bulkRecordOperations(
      accountId,
      userId!,
      operation
    - in_function: OperationController./**
   * Bulk record operations (for offline sync)
   * POST /api/v1/operations/bulk
   */
  bulkRecord
  Second occurrence: batch index 681
    - source_expr: await this.operationService.bulkRecordOperations(
      accountId,
      userId!,
      operation
    - in_function: OperationController./**
   * Bulk record operations (for offline sync)
   * POST /api/v1/operations/bulk
   */
  bulkRecord

[DEBUG] DUPLICATE #682:
  File: backend/src/controllers/operation.controller.ts
  Line: 63
  Target: { accountId }
  First occurrence: batch index 658
    - source_expr: this.getTenantContext(req)
    - in_function: OperationController./**
   * Get operations for batch
   * GET /api/v1/operations/batch/:batchId
   */
  getByBatch
  Second occurrence: batch index 682
    - source_expr: this.getTenantContext(req)
    - in_function: OperationController./**
   * Get operations for batch
   * GET /api/v1/operations/batch/:batchId
   */
  getByBatch

[DEBUG] DUPLICATE #683:
  File: backend/src/controllers/operation.controller.ts
  Line: 64
  Target: { batchId }
  First occurrence: batch index 659
    - source_expr: req.params
    - in_function: OperationController./**
   * Get operations for batch
   * GET /api/v1/operations/batch/:batchId
   */
  getByBatch
  Second occurrence: batch index 683
    - source_expr: req.params
    - in_function: OperationController./**
   * Get operations for batch
   * GET /api/v1/operations/batch/:batchId
   */
  getByBatch

[DEBUG] DUPLICATE #684:
  File: backend/src/controllers/operation.controller.ts
  Line: 67
  Target: query
  First occurrence: batch index 660
    - source_expr: validation.query.operationList.parse(req.query)
    - in_function: OperationController./**
   * Get operations for batch
   * GET /api/v1/operations/batch/:batchId
   */
  getByBatch
  Second occurrence: batch index 684
    - source_expr: validation.query.operationList.parse(req.query)
    - in_function: OperationController./**
   * Get operations for batch
   * GET /api/v1/operations/batch/:batchId
   */
  getByBatch

[DEBUG] DUPLICATE #685:
  File: backend/src/controllers/operation.controller.ts
  Line: 69
  Target: operations
  First occurrence: batch index 661
    - source_expr: await this.operationService.getBatchOperations(
      accountId,
      batchId,
      {
        
    - in_function: OperationController./**
   * Get operations for batch
   * GET /api/v1/operations/batch/:batchId
   */
  getByBatch
  Second occurrence: batch index 685
    - source_expr: await this.operationService.getBatchOperations(
      accountId,
      batchId,
      {
        
    - in_function: OperationController./**
   * Get operations for batch
   * GET /api/v1/operations/batch/:batchId
   */
  getByBatch

[DEBUG] DUPLICATE #686:
  File: backend/src/controllers/operation.controller.ts
  Line: 89
  Target: { accountId }
  First occurrence: batch index 662
    - source_expr: this.getTenantContext(req)
    - in_function: OperationController./**
   * Get operations by user
   * GET /api/v1/operations/user/:userId
   */
  getByUser
  Second occurrence: batch index 686
    - source_expr: this.getTenantContext(req)
    - in_function: OperationController./**
   * Get operations by user
   * GET /api/v1/operations/user/:userId
   */
  getByUser

[DEBUG] DUPLICATE #687:
  File: backend/src/controllers/operation.controller.ts
  Line: 90
  Target: { userId }
  First occurrence: batch index 663
    - source_expr: req.params
    - in_function: OperationController./**
   * Get operations by user
   * GET /api/v1/operations/user/:userId
   */
  getByUser
  Second occurrence: batch index 687
    - source_expr: req.params
    - in_function: OperationController./**
   * Get operations by user
   * GET /api/v1/operations/user/:userId
   */
  getByUser

[DEBUG] DUPLICATE #688:
  File: backend/src/controllers/operation.controller.ts
  Line: 93
  Target: query
  First occurrence: batch index 664
    - source_expr: validation.query.operationList.parse(req.query)
    - in_function: OperationController./**
   * Get operations by user
   * GET /api/v1/operations/user/:userId
   */
  getByUser
  Second occurrence: batch index 688
    - source_expr: validation.query.operationList.parse(req.query)
    - in_function: OperationController./**
   * Get operations by user
   * GET /api/v1/operations/user/:userId
   */
  getByUser

[DEBUG] DUPLICATE #689:
  File: backend/src/controllers/operation.controller.ts
  Line: 95
  Target: operations
  First occurrence: batch index 665
    - source_expr: await this.operationService.getUserOperations(
      accountId,
      userId,
      {
        ba
    - in_function: OperationController./**
   * Get operations by user
   * GET /api/v1/operations/user/:userId
   */
  getByUser
  Second occurrence: batch index 689
    - source_expr: await this.operationService.getUserOperations(
      accountId,
      userId,
      {
        ba
    - in_function: OperationController./**
   * Get operations by user
   * GET /api/v1/operations/user/:userId
   */
  getByUser

[DEBUG] DUPLICATE #690:
  File: backend/src/controllers/operation.controller.ts
  Line: 114
  Target: { accountId }
  First occurrence: batch index 666
    - source_expr: this.getTenantContext(req)
    - in_function: OperationController./**
   * List all operations with filters
   * GET /api/v1/operations
   */
  list
  Second occurrence: batch index 690
    - source_expr: this.getTenantContext(req)
    - in_function: OperationController./**
   * List all operations with filters
   * GET /api/v1/operations
   */
  list

[DEBUG] DUPLICATE #691:
  File: backend/src/controllers/operation.controller.ts
  Line: 117
  Target: query
  First occurrence: batch index 667
    - source_expr: validation.query.operationList.parse(req.query)
    - in_function: OperationController./**
   * List all operations with filters
   * GET /api/v1/operations
   */
  list
  Second occurrence: batch index 691
    - source_expr: validation.query.operationList.parse(req.query)
    - in_function: OperationController./**
   * List all operations with filters
   * GET /api/v1/operations
   */
  list

[DEBUG] DUPLICATE #692:
  File: backend/src/controllers/operation.controller.ts
  Line: 119
  Target: operations
  First occurrence: batch index 668
    - source_expr: await this.operationService.listOperations(
      accountId,
      {
        facility_id: query.f
    - in_function: OperationController./**
   * List all operations with filters
   * GET /api/v1/operations
   */
  list
  Second occurrence: batch index 692
    - source_expr: await this.operationService.listOperations(
      accountId,
      {
        facility_id: query.f
    - in_function: OperationController./**
   * List all operations with filters
   * GET /api/v1/operations
   */
  list

[DEBUG] DUPLICATE #693:
  File: backend/src/controllers/operation.controller.ts
  Line: 140
  Target: { accountId }
  First occurrence: batch index 669
    - source_expr: this.getTenantContext(req)
    - in_function: OperationController./**
   * Get operation statistics
   * GET /api/v1/operations/stats
   */
  getStats
  Second occurrence: batch index 693
    - source_expr: this.getTenantContext(req)
    - in_function: OperationController./**
   * Get operation statistics
   * GET /api/v1/operations/stats
   */
  getStats

[DEBUG] DUPLICATE #694:
  File: backend/src/controllers/operation.controller.ts
  Line: 143
  Target: query
  First occurrence: batch index 670
    - source_expr: validation.query.operationList.parse(req.query)
    - in_function: OperationController./**
   * Get operation statistics
   * GET /api/v1/operations/stats
   */
  getStats
  Second occurrence: batch index 694
    - source_expr: validation.query.operationList.parse(req.query)
    - in_function: OperationController./**
   * Get operation statistics
   * GET /api/v1/operations/stats
   */
  getStats

[DEBUG] DUPLICATE #695:
  File: backend/src/controllers/operation.controller.ts
  Line: 145
  Target: dateRange
  First occurrence: batch index 671
    - source_expr: query.start_date && query.end_date
      ? {
          from: new Date(query.start_date),
        
    - in_function: OperationController./**
   * Get operation statistics
   * GET /api/v1/operations/stats
   */
  getStats
  Second occurrence: batch index 695
    - source_expr: query.start_date && query.end_date
      ? {
          from: new Date(query.start_date),
        
    - in_function: OperationController./**
   * Get operation statistics
   * GET /api/v1/operations/stats
   */
  getStats

[DEBUG] DUPLICATE #696:
  File: backend/src/controllers/operation.controller.ts
  Line: 152
  Target: stats
  First occurrence: batch index 672
    - source_expr: await this.operationService.getOperationStats(
      accountId,
      query.facility_id || '',
  
    - in_function: OperationController./**
   * Get operation statistics
   * GET /api/v1/operations/stats
   */
  getStats
  Second occurrence: batch index 696
    - source_expr: await this.operationService.getOperationStats(
      accountId,
      query.facility_id || '',
  
    - in_function: OperationController./**
   * Get operation statistics
   * GET /api/v1/operations/stats
   */
  getStats

[DEBUG] DUPLICATE #697:
  File: backend/src/controllers/operation.controller.ts
  Line: 166
  Target: { accountId }
  First occurrence: batch index 673
    - source_expr: this.getTenantContext(req)
    - in_function: OperationController./**
   * Get applicable SOPs for an operation type
   * GET /api/v1/operations/sops
   */
  getApplicableSops
  Second occurrence: batch index 697
    - source_expr: this.getTenantContext(req)
    - in_function: OperationController./**
   * Get applicable SOPs for an operation type
   * GET /api/v1/operations/sops
   */
  getApplicableSops

[DEBUG] DUPLICATE #698:
  File: backend/src/controllers/operation.controller.ts
  Line: 169
  Target: { facility_id }
  First occurrence: batch index 674
    - source_expr: req.query as {
      facility_id?: string;
    }
    - in_function: OperationController./**
   * Get applicable SOPs for an operation type
   * GET /api/v1/operations/sops
   */
  getApplicableSops
  Second occurrence: batch index 698
    - source_expr: req.query as {
      facility_id?: string;
    }
    - in_function: OperationController./**
   * Get applicable SOPs for an operation type
   * GET /api/v1/operations/sops
   */
  getApplicableSops

[DEBUG] DUPLICATE #699:
  File: backend/src/controllers/operation.controller.ts
  Line: 174
  Target: where: Record<string, unknown>
  First occurrence: batch index 675
    - source_expr: {
      is_active: true
    }
    - in_function: OperationController./**
   * Get applicable SOPs for an operation type
   * GET /api/v1/operations/sops
   */
  getApplicableSops
  Second occurrence: batch index 699
    - source_expr: {
      is_active: true
    }
    - in_function: OperationController./**
   * Get applicable SOPs for an operation type
   * GET /api/v1/operations/sops
   */
  getApplicableSops

[DEBUG] DUPLICATE #700:
  File: backend/src/controllers/operation.controller.ts
  Line: 183
  Target: result
  First occurrence: batch index 676
    - source_expr: await this.sopService.findAll(accountId, {
      where,
      order: [['name', 'ASC']]
    })
    - in_function: OperationController./**
   * Get applicable SOPs for an operation type
   * GET /api/v1/operations/sops
   */
  getApplicableSops
  Second occurrence: batch index 700
    - source_expr: await this.sopService.findAll(accountId, {
      where,
      order: [['name', 'ASC']]
    })
    - in_function: OperationController./**
   * Get applicable SOPs for an operation type
   * GET /api/v1/operations/sops
   */
  getApplicableSops

[DEBUG] DUPLICATE #724:
  File: backend/src/controllers/plant.controller.ts
  Line: 13
  Target: { accountId }
  First occurrence: batch index 702
    - source_expr: this.getTenantContext(req)
    - in_function: PlantController.list
  Second occurrence: batch index 724
    - source_expr: this.getTenantContext(req)
    - in_function: PlantController.list

[DEBUG] DUPLICATE #725:
  File: backend/src/controllers/plant.controller.ts
  Line: 16
  Target: query
  First occurrence: batch index 703
    - source_expr: validation.query.plantList.parse(req.query)
    - in_function: PlantController.list
  Second occurrence: batch index 725
    - source_expr: validation.query.plantList.parse(req.query)
    - in_function: PlantController.list

[DEBUG] DUPLICATE #726:
  File: backend/src/controllers/plant.controller.ts
  Line: 17
  Target: offset
  First occurrence: batch index 704
    - source_expr: this.getOffset(query.page, query.limit)
    - in_function: PlantController.list
  Second occurrence: batch index 726
    - source_expr: this.getOffset(query.page, query.limit)
    - in_function: PlantController.list

[DEBUG] DUPLICATE #727:
  File: backend/src/controllers/plant.controller.ts
  Line: 20
  Target: where: Record<string, string>
  First occurrence: batch index 705
    - source_expr: {}
    - in_function: PlantController.list
  Second occurrence: batch index 727
    - source_expr: {}
    - in_function: PlantController.list

[DEBUG] DUPLICATE #728:
  File: backend/src/controllers/plant.controller.ts
  Line: 28
  Target: include
  First occurrence: batch index 706
    - source_expr: query.facility_id ? [{
      model: Batch,
      as: 'batch',
      where: { facility_id: query.f
    - in_function: PlantController.list
  Second occurrence: batch index 728
    - source_expr: query.facility_id ? [{
      model: Batch,
      as: 'batch',
      where: { facility_id: query.f
    - in_function: PlantController.list

[DEBUG] DUPLICATE #729:
  File: backend/src/controllers/plant.controller.ts
  Line: 35
  Target: result
  First occurrence: batch index 707
    - source_expr: await plantService.findAll(accountId, {
      where: Object.keys(where).length > 0 ? where : undefi
    - in_function: PlantController.list
  Second occurrence: batch index 729
    - source_expr: await plantService.findAll(accountId, {
      where: Object.keys(where).length > 0 ? where : undefi
    - in_function: PlantController.list

[DEBUG] DUPLICATE #730:
  File: backend/src/controllers/plant.controller.ts
  Line: 43
  Target: meta
  First occurrence: batch index 708
    - source_expr: this.getPaginationMeta(result.count, query.page, query.limit)
    - in_function: PlantController.list
  Second occurrence: batch index 730
    - source_expr: this.getPaginationMeta(result.count, query.page, query.limit)
    - in_function: PlantController.list

[DEBUG] DUPLICATE #731:
  File: backend/src/controllers/plant.controller.ts
  Line: 48
  Target: { accountId }
  First occurrence: batch index 709
    - source_expr: this.getTenantContext(req)
    - in_function: PlantController.getById
  Second occurrence: batch index 731
    - source_expr: this.getTenantContext(req)
    - in_function: PlantController.getById

[DEBUG] DUPLICATE #732:
  File: backend/src/controllers/plant.controller.ts
  Line: 49
  Target: entity
  First occurrence: batch index 710
    - source_expr: await plantService.findById(accountId, req.params.id)
    - in_function: PlantController.getById
  Second occurrence: batch index 732
    - source_expr: await plantService.findById(accountId, req.params.id)
    - in_function: PlantController.getById

[DEBUG] DUPLICATE #733:
  File: backend/src/controllers/plant.controller.ts
  Line: 54
  Target: { accountId, userId }
  First occurrence: batch index 711
    - source_expr: this.getTenantContext(req)
    - in_function: PlantController.create
  Second occurrence: batch index 733
    - source_expr: this.getTenantContext(req)
    - in_function: PlantController.create

[DEBUG] DUPLICATE #734:
  File: backend/src/controllers/plant.controller.ts
  Line: 55
  Target: entity
  First occurrence: batch index 712
    - source_expr: await plantService.create(accountId, req.body, userId!)
    - in_function: PlantController.create
  Second occurrence: batch index 734
    - source_expr: await plantService.create(accountId, req.body, userId!)
    - in_function: PlantController.create

[DEBUG] DUPLICATE #735:
  File: backend/src/controllers/plant.controller.ts
  Line: 60
  Target: { accountId, userId }
  First occurrence: batch index 713
    - source_expr: this.getTenantContext(req)
    - in_function: PlantController.update
  Second occurrence: batch index 735
    - source_expr: this.getTenantContext(req)
    - in_function: PlantController.update

[DEBUG] DUPLICATE #736:
  File: backend/src/controllers/plant.controller.ts
  Line: 61
  Target: entity
  First occurrence: batch index 714
    - source_expr: await plantService.update(accountId, req.params.id, req.body, userId!)
    - in_function: PlantController.update
  Second occurrence: batch index 736
    - source_expr: await plantService.update(accountId, req.params.id, req.body, userId!)
    - in_function: PlantController.update

[DEBUG] DUPLICATE #737:
  File: backend/src/controllers/plant.controller.ts
  Line: 66
  Target: { accountId, userId }
  First occurrence: batch index 715
    - source_expr: this.getTenantContext(req)
    - in_function: PlantController.delete
  Second occurrence: batch index 737
    - source_expr: this.getTenantContext(req)
    - in_function: PlantController.delete

[DEBUG] DUPLICATE #738:
  File: backend/src/controllers/plant.controller.ts
  Line: 73
  Target: { accountId, userId }
  First occurrence: batch index 716
    - source_expr: this.getTenantContext(req)
    - in_function: PlantController.// Bulk operations
  move
  Second occurrence: batch index 738
    - source_expr: this.getTenantContext(req)
    - in_function: PlantController.// Bulk operations
  move

[DEBUG] DUPLICATE #739:
  File: backend/src/controllers/plant.controller.ts
  Line: 74
  Target: result
  First occurrence: batch index 717
    - source_expr: await plantService.transferPlants(accountId, req.body, userId!)
    - in_function: PlantController.// Bulk operations
  move
  Second occurrence: batch index 739
    - source_expr: await plantService.transferPlants(accountId, req.body, userId!)
    - in_function: PlantController.// Bulk operations
  move

[DEBUG] DUPLICATE #740:
  File: backend/src/controllers/plant.controller.ts
  Line: 82
  Target: { accountId, userId }
  First occurrence: batch index 718
    - source_expr: this.getTenantContext(req)
    - in_function: PlantController.destroy
  Second occurrence: batch index 740
    - source_expr: this.getTenantContext(req)
    - in_function: PlantController.destroy

[DEBUG] DUPLICATE #741:
  File: backend/src/controllers/plant.controller.ts
  Line: 84
  Target: data
  First occurrence: batch index 719
    - source_expr: validation.plant.destroy.parse(req.body)
    - in_function: PlantController.destroy
  Second occurrence: batch index 741
    - source_expr: validation.plant.destroy.parse(req.body)
    - in_function: PlantController.destroy

[DEBUG] DUPLICATE #742:
  File: backend/src/controllers/plant.controller.ts
  Line: 85
  Target: result
  First occurrence: batch index 720
    - source_expr: await plantService.destroyPlants(accountId, data, userId!)
    - in_function: PlantController.destroy
  Second occurrence: batch index 742
    - source_expr: await plantService.destroyPlants(accountId, data, userId!)
    - in_function: PlantController.destroy

[DEBUG] DUPLICATE #743:
  File: backend/src/controllers/plant.controller.ts
  Line: 94
  Target: { accountId, userId }
  First occurrence: batch index 721
    - source_expr: this.getTenantContext(req)
    - in_function: PlantController.// Stage management
  changeStage
  Second occurrence: batch index 743
    - source_expr: this.getTenantContext(req)
    - in_function: PlantController.// Stage management
  changeStage

[DEBUG] DUPLICATE #744:
  File: backend/src/controllers/plant.controller.ts
  Line: 96
  Target: data
  First occurrence: batch index 722
    - source_expr: validation.plant.changeStage.parse(req.body)
    - in_function: PlantController.// Stage management
  changeStage
  Second occurrence: batch index 744
    - source_expr: validation.plant.changeStage.parse(req.body)
    - in_function: PlantController.// Stage management
  changeStage

[DEBUG] DUPLICATE #745:
  File: backend/src/controllers/plant.controller.ts
  Line: 98
  Target: result
  First occurrence: batch index 723
    - source_expr: await plantService.bulkUpdateStage(
      accountId,
      data,
      userId!
    )
    - in_function: PlantController.// Stage management
  changeStage
  Second occurrence: batch index 745
    - source_expr: await plantService.bulkUpdateStage(
      accountId,
      data,
      userId!
    )
    - in_function: PlantController.// Stage management
  changeStage

[DEBUG] DUPLICATE #762:
  File: backend/src/controllers/platform.controller.ts
  Line: 19
  Target: { company_name, admin_email, subscription_tier }
  First occurrence: batch index 746
    - source_expr: req.body
    - in_function: PlatformController.createTenant
  Second occurrence: batch index 762
    - source_expr: req.body
    - in_function: PlatformController.createTenant

[DEBUG] DUPLICATE #763:
  File: backend/src/controllers/platform.controller.ts
  Line: 22
  Target: result
  First occurrence: batch index 747
    - source_expr: await sequelize.transaction(async (transaction) => {
        // 1. Create account with generated wo
    - in_function: PlatformController.createTenant
  Second occurrence: batch index 763
    - source_expr: await sequelize.transaction(async (transaction) => {
        // 1. Create account with generated wo
    - in_function: PlatformController.createTenant

[DEBUG] DUPLICATE #764:
  File: backend/src/controllers/platform.controller.ts
  Line: 24
  Target: workerCodePrefix
  First occurrence: batch index 748
    - source_expr: PlatformController.generatePrefix(company_name)
    - in_function: PlatformController.createTenant
  Second occurrence: batch index 764
    - source_expr: PlatformController.generatePrefix(company_name)
    - in_function: PlatformController.createTenant

[DEBUG] DUPLICATE #765:
  File: backend/src/controllers/platform.controller.ts
  Line: 26
  Target: account
  First occurrence: batch index 749
    - source_expr: await Account.create({
          company_name,
          worker_code_prefix: workerCodePrefix,
  
    - in_function: PlatformController.createTenant
  Second occurrence: batch index 765
    - source_expr: await Account.create({
          company_name,
          worker_code_prefix: workerCodePrefix,
  
    - in_function: PlatformController.createTenant

[DEBUG] DUPLICATE #766:
  File: backend/src/controllers/platform.controller.ts
  Line: 34
  Target: tempPassword
  First occurrence: batch index 750
    - source_expr: Math.random().toString(36).slice(-8) +
                            Math.random().toString(36).slice
    - in_function: PlatformController.createTenant
  Second occurrence: batch index 766
    - source_expr: Math.random().toString(36).slice(-8) +
                            Math.random().toString(36).slice
    - in_function: PlatformController.createTenant

[DEBUG] DUPLICATE #767:
  File: backend/src/controllers/platform.controller.ts
  Line: 38
  Target: adminUser
  First occurrence: batch index 751
    - source_expr: await User.create({
          account_id: account.id,
          username: admin_email,
          
    - in_function: PlatformController.createTenant
  Second occurrence: batch index 767
    - source_expr: await User.create({
          account_id: account.id,
          username: admin_email,
          
    - in_function: PlatformController.createTenant

[DEBUG] DUPLICATE #768:
  File: backend/src/controllers/platform.controller.ts
  Line: 52
  Target: facility
  First occurrence: batch index 752
    - source_expr: await Facility.create({
          account_id: account.id,
          name: 'Main Facility',
      
    - in_function: PlatformController.createTenant
  Second occurrence: batch index 768
    - source_expr: await Facility.create({
          account_id: account.id,
          name: 'Main Facility',
      
    - in_function: PlatformController.createTenant

[DEBUG] DUPLICATE #769:
  File: backend/src/controllers/platform.controller.ts
  Line: 92
  Target: accounts
  First occurrence: batch index 753
    - source_expr: await Account.findAll({
        order: [['created_at', 'DESC']]
      })
    - in_function: PlatformController.listTenants
  Second occurrence: batch index 769
    - source_expr: await Account.findAll({
        order: [['created_at', 'DESC']]
      })
    - in_function: PlatformController.listTenants

[DEBUG] DUPLICATE #770:
  File: backend/src/controllers/platform.controller.ts
  Line: 111
  Target: { id }
  First occurrence: batch index 754
    - source_expr: req.params
    - in_function: PlatformController.updateTenant
  Second occurrence: batch index 770
    - source_expr: req.params
    - in_function: PlatformController.updateTenant

[DEBUG] DUPLICATE #771:
  File: backend/src/controllers/platform.controller.ts
  Line: 112
  Target: updates
  First occurrence: batch index 755
    - source_expr: req.body
    - in_function: PlatformController.updateTenant
  Second occurrence: batch index 771
    - source_expr: req.body
    - in_function: PlatformController.updateTenant

[DEBUG] DUPLICATE #772:
  File: backend/src/controllers/platform.controller.ts
  Line: 114
  Target: account
  First occurrence: batch index 756
    - source_expr: await Account.findOne({
        where: { id }
      })
    - in_function: PlatformController.updateTenant
  Second occurrence: batch index 772
    - source_expr: await Account.findOne({
        where: { id }
      })
    - in_function: PlatformController.updateTenant

[DEBUG] DUPLICATE #773:
  File: backend/src/controllers/platform.controller.ts
  Line: 129
  Target: safeUpdates
  First occurrence: batch index 757
    - source_expr: { ...updates } as AccountUpdateData
    - in_function: PlatformController.updateTenant
  Second occurrence: batch index 773
    - source_expr: { ...updates } as AccountUpdateData
    - in_function: PlatformController.updateTenant

[DEBUG] DUPLICATE #774:
  File: backend/src/controllers/platform.controller.ts
  Line: 150
  Target: { id }
  First occurrence: batch index 758
    - source_expr: req.params
    - in_function: PlatformController.deactivateTenant
  Second occurrence: batch index 774
    - source_expr: req.params
    - in_function: PlatformController.deactivateTenant

[DEBUG] DUPLICATE #775:
  File: backend/src/controllers/platform.controller.ts
  Line: 152
  Target: account
  First occurrence: batch index 759
    - source_expr: await Account.findOne({
        where: { id }
      })
    - in_function: PlatformController.deactivateTenant
  Second occurrence: batch index 775
    - source_expr: await Account.findOne({
        where: { id }
      })
    - in_function: PlatformController.deactivateTenant

[DEBUG] DUPLICATE #776:
  File: backend/src/controllers/platform.controller.ts
  Line: 188
  Target: [
        accountCount,
        userCount,
        facilityCount,
        batchCount,
        plantCount
      ]
  First occurrence: batch index 760
    - source_expr: await Promise.all([
        Account.count(),
        User.count(),
        sequelize.models.Facil
    - in_function: PlatformController.getMetrics
  Second occurrence: batch index 776
    - source_expr: await Promise.all([
        Account.count(),
        User.count(),
        sequelize.models.Facil
    - in_function: PlatformController.getMetrics

[DEBUG] DUPLICATE #777:
  File: backend/src/controllers/platform.controller.ts
  Line: 223
  Target: prefix
  First occurrence: batch index 761
    - source_expr: companyName
      .replace(/[^a-zA-Z]/g, '')
      .substring(0, 4)
      .toUpperCase()
      .
    - in_function: PlatformController.generatePrefix
  Second occurrence: batch index 777
    - source_expr: companyName
      .replace(/[^a-zA-Z]/g, '')
      .substring(0, 4)
      .toUpperCase()
      .
    - in_function: PlatformController.generatePrefix

[DEBUG] DUPLICATE #787:
  File: backend/src/controllers/print.controller.ts
  Line: 15
  Target: { template, data, options }
  First occurrence: batch index 778
    - source_expr: req.body
    - in_function: PrintController.prepare
  Second occurrence: batch index 787
    - source_expr: req.body
    - in_function: PrintController.prepare

[DEBUG] DUPLICATE #788:
  File: backend/src/controllers/print.controller.ts
  Line: 17
  Target: printData
  First occurrence: batch index 779
    - source_expr: await printService.preparePrintData(template, data, options)
    - in_function: PrintController.prepare
  Second occurrence: batch index 788
    - source_expr: await printService.preparePrintData(template, data, options)
    - in_function: PrintController.prepare

[DEBUG] DUPLICATE #789:
  File: backend/src/controllers/print.controller.ts
  Line: 34
  Target: { items, layout }
  First occurrence: batch index 780
    - source_expr: req.body
    - in_function: PrintController.labels
  Second occurrence: batch index 789
    - source_expr: req.body
    - in_function: PrintController.labels

[DEBUG] DUPLICATE #790:
  File: backend/src/controllers/print.controller.ts
  Line: 36
  Target: html
  First occurrence: batch index 781
    - source_expr: await printService.generateLabelBatch(items, layout)
    - in_function: PrintController.labels
  Second occurrence: batch index 790
    - source_expr: await printService.generateLabelBatch(items, layout)
    - in_function: PrintController.labels

[DEBUG] DUPLICATE #791:
  File: backend/src/controllers/print.controller.ts
  Line: 57
  Target: { data }
  First occurrence: batch index 782
    - source_expr: req.body
    - in_function: PrintController.export
  Second occurrence: batch index 791
    - source_expr: req.body
    - in_function: PrintController.export

[DEBUG] DUPLICATE #792:
  File: backend/src/controllers/print.controller.ts
  Line: 59
  Target: csv
  First occurrence: batch index 783
    - source_expr: printService.generateCSV(data)
    - in_function: PrintController.export
  Second occurrence: batch index 792
    - source_expr: printService.generateCSV(data)
    - in_function: PrintController.export

[DEBUG] DUPLICATE #793:
  File: backend/src/controllers/print.controller.ts
  Line: 74
  Target: templatesDir
  First occurrence: batch index 784
    - source_expr: path.join(__dirname, '../templates/reports')
    - in_function: PrintController.templates
  Second occurrence: batch index 793
    - source_expr: path.join(__dirname, '../templates/reports')
    - in_function: PrintController.templates

[DEBUG] DUPLICATE #794:
  File: backend/src/controllers/print.controller.ts
  Line: 75
  Target: files
  First occurrence: batch index 785
    - source_expr: await fs.readdir(templatesDir)
    - in_function: PrintController.templates
  Second occurrence: batch index 794
    - source_expr: await fs.readdir(templatesDir)
    - in_function: PrintController.templates

[DEBUG] DUPLICATE #795:
  File: backend/src/controllers/print.controller.ts
  Line: 77
  Target: templates
  First occurrence: batch index 786
    - source_expr: files
        .filter(file => file.endsWith('.hbs'))
        .map(file => file.replace('.hbs', '')
    - in_function: PrintController.templates
  Second occurrence: batch index 795
    - source_expr: files
        .filter(file => file.endsWith('.hbs'))
        .map(file => file.replace('.hbs', '')
    - in_function: PrintController.templates

[DEBUG] DUPLICATE #817:
  File: backend/src/controllers/qr.registry.controller.ts
  Line: 17
  Target: { entity_type, entity_id }
  First occurrence: batch index 796
    - source_expr: req.body
    - in_function: QRRegistryController./**
   * Generate QR code for a single entity
   */
  generateForEntity
  Second occurrence: batch index 817
    - source_expr: req.body
    - in_function: QRRegistryController./**
   * Generate QR code for a single entity
   */
  generateForEntity

[DEBUG] DUPLICATE #818:
  File: backend/src/controllers/qr.registry.controller.ts
  Line: 18
  Target: { accountId, userId }
  First occurrence: batch index 797
    - source_expr: this.getTenantContext(req)
    - in_function: QRRegistryController./**
   * Generate QR code for a single entity
   */
  generateForEntity
  Second occurrence: batch index 818
    - source_expr: this.getTenantContext(req)
    - in_function: QRRegistryController./**
   * Generate QR code for a single entity
   */
  generateForEntity

[DEBUG] DUPLICATE #819:
  File: backend/src/controllers/qr.registry.controller.ts
  Line: 26
  Target: qrCode
  First occurrence: batch index 798
    - source_expr: await qrService.generateQRCode(
        accountId,
        entity_type,
        entity_id,
     
    - in_function: QRRegistryController./**
   * Generate QR code for a single entity
   */
  generateForEntity
  Second occurrence: batch index 819
    - source_expr: await qrService.generateQRCode(
        accountId,
        entity_type,
        entity_id,
     
    - in_function: QRRegistryController./**
   * Generate QR code for a single entity
   */
  generateForEntity

[DEBUG] DUPLICATE #820:
  File: backend/src/controllers/qr.registry.controller.ts
  Line: 50
  Target: { qr_code, entity_type, entity_id }
  First occurrence: batch index 799
    - source_expr: req.body
    - in_function: QRRegistryController./**
   * Assign QR code to entity
   */
  assignQRCode
  Second occurrence: batch index 820
    - source_expr: req.body
    - in_function: QRRegistryController./**
   * Assign QR code to entity
   */
  assignQRCode

[DEBUG] DUPLICATE #821:
  File: backend/src/controllers/qr.registry.controller.ts
  Line: 51
  Target: { accountId, userId }
  First occurrence: batch index 800
    - source_expr: this.getTenantContext(req)
    - in_function: QRRegistryController./**
   * Assign QR code to entity
   */
  assignQRCode
  Second occurrence: batch index 821
    - source_expr: this.getTenantContext(req)
    - in_function: QRRegistryController./**
   * Assign QR code to entity
   */
  assignQRCode

[DEBUG] DUPLICATE #822:
  File: backend/src/controllers/qr.registry.controller.ts
  Line: 60
  Target: result
  First occurrence: batch index 801
    - source_expr: await qrService.assignQRCode(
        accountId,
        qr_code,
        entity_type,
        e
    - in_function: QRRegistryController./**
   * Assign QR code to entity
   */
  assignQRCode
  Second occurrence: batch index 822
    - source_expr: await qrService.assignQRCode(
        accountId,
        qr_code,
        entity_type,
        e
    - in_function: QRRegistryController./**
   * Assign QR code to entity
   */
  assignQRCode

[DEBUG] DUPLICATE #823:
  File: backend/src/controllers/qr.registry.controller.ts
  Line: 81
  Target: { qr_code }
  First occurrence: batch index 802
    - source_expr: req.params
    - in_function: QRRegistryController./**
   * Lookup entity by QR code
   */
  lookupByQRCode
  Second occurrence: batch index 823
    - source_expr: req.params
    - in_function: QRRegistryController./**
   * Lookup entity by QR code
   */
  lookupByQRCode

[DEBUG] DUPLICATE #824:
  File: backend/src/controllers/qr.registry.controller.ts
  Line: 82
  Target: { accountId }
  First occurrence: batch index 803
    - source_expr: this.getTenantContext(req)
    - in_function: QRRegistryController./**
   * Lookup entity by QR code
   */
  lookupByQRCode
  Second occurrence: batch index 824
    - source_expr: this.getTenantContext(req)
    - in_function: QRRegistryController./**
   * Lookup entity by QR code
   */
  lookupByQRCode

[DEBUG] DUPLICATE #825:
  File: backend/src/controllers/qr.registry.controller.ts
  Line: 89
  Target: entity
  First occurrence: batch index 804
    - source_expr: await qrService.getEntityByQRCode(accountId, qr_code)
    - in_function: QRRegistryController./**
   * Lookup entity by QR code
   */
  lookupByQRCode
  Second occurrence: batch index 825
    - source_expr: await qrService.getEntityByQRCode(accountId, qr_code)
    - in_function: QRRegistryController./**
   * Lookup entity by QR code
   */
  lookupByQRCode

[DEBUG] DUPLICATE #826:
  File: backend/src/controllers/qr.registry.controller.ts
  Line: 108
  Target: { accountId }
  First occurrence: batch index 805
    - source_expr: this.getTenantContext(req)
    - in_function: QRRegistryController./**
   * List all QR codes with filters
   */
  listQRCodes
  Second occurrence: batch index 826
    - source_expr: this.getTenantContext(req)
    - in_function: QRRegistryController./**
   * List all QR codes with filters
   */
  listQRCodes

[DEBUG] DUPLICATE #827:
  File: backend/src/controllers/qr.registry.controller.ts
  Line: 111
  Target: query
  First occurrence: batch index 806
    - source_expr: validation.query.qrList.parse(req.query)
    - in_function: QRRegistryController./**
   * List all QR codes with filters
   */
  listQRCodes
  Second occurrence: batch index 827
    - source_expr: validation.query.qrList.parse(req.query)
    - in_function: QRRegistryController./**
   * List all QR codes with filters
   */
  listQRCodes

[DEBUG] DUPLICATE #828:
  File: backend/src/controllers/qr.registry.controller.ts
  Line: 113
  Target: filters
  First occurrence: batch index 807
    - source_expr: {
        entity_type: query.entity_type,
        assigned: query.assigned
      }
    - in_function: QRRegistryController./**
   * List all QR codes with filters
   */
  listQRCodes
  Second occurrence: batch index 828
    - source_expr: {
        entity_type: query.entity_type,
        assigned: query.assigned
      }
    - in_function: QRRegistryController./**
   * List all QR codes with filters
   */
  listQRCodes

[DEBUG] DUPLICATE #829:
  File: backend/src/controllers/qr.registry.controller.ts
  Line: 118
  Target: result
  First occurrence: batch index 808
    - source_expr: await qrService.listQRCodes(
        accountId,
        filters,
        { page: query.page, limi
    - in_function: QRRegistryController./**
   * List all QR codes with filters
   */
  listQRCodes
  Second occurrence: batch index 829
    - source_expr: await qrService.listQRCodes(
        accountId,
        filters,
        { page: query.page, limi
    - in_function: QRRegistryController./**
   * List all QR codes with filters
   */
  listQRCodes

[DEBUG] DUPLICATE #830:
  File: backend/src/controllers/qr.registry.controller.ts
  Line: 142
  Target: { id }
  First occurrence: batch index 809
    - source_expr: req.params
    - in_function: QRRegistryController./**
   * Get QR code details
   */
  getQRCodeDetails
  Second occurrence: batch index 830
    - source_expr: req.params
    - in_function: QRRegistryController./**
   * Get QR code details
   */
  getQRCodeDetails

[DEBUG] DUPLICATE #831:
  File: backend/src/controllers/qr.registry.controller.ts
  Line: 143
  Target: { accountId }
  First occurrence: batch index 810
    - source_expr: this.getTenantContext(req)
    - in_function: QRRegistryController./**
   * Get QR code details
   */
  getQRCodeDetails
  Second occurrence: batch index 831
    - source_expr: this.getTenantContext(req)
    - in_function: QRRegistryController./**
   * Get QR code details
   */
  getQRCodeDetails

[DEBUG] DUPLICATE #832:
  File: backend/src/controllers/qr.registry.controller.ts
  Line: 145
  Target: qrCode
  First occurrence: batch index 811
    - source_expr: await qrService.getQRCodeById(accountId, id)
    - in_function: QRRegistryController./**
   * Get QR code details
   */
  getQRCodeDetails
  Second occurrence: batch index 832
    - source_expr: await qrService.getQRCodeById(accountId, id)
    - in_function: QRRegistryController./**
   * Get QR code details
   */
  getQRCodeDetails

[DEBUG] DUPLICATE #833:
  File: backend/src/controllers/qr.registry.controller.ts
  Line: 165
  Target: { id }
  First occurrence: batch index 812
    - source_expr: req.params
    - in_function: QRRegistryController./**
   * Delete unused QR code
   */
  deleteQRCode
  Second occurrence: batch index 833
    - source_expr: req.params
    - in_function: QRRegistryController./**
   * Delete unused QR code
   */
  deleteQRCode

[DEBUG] DUPLICATE #834:
  File: backend/src/controllers/qr.registry.controller.ts
  Line: 166
  Target: { accountId, userId }
  First occurrence: batch index 813
    - source_expr: this.getTenantContext(req)
    - in_function: QRRegistryController./**
   * Delete unused QR code
   */
  deleteQRCode
  Second occurrence: batch index 834
    - source_expr: this.getTenantContext(req)
    - in_function: QRRegistryController./**
   * Delete unused QR code
   */
  deleteQRCode

[DEBUG] DUPLICATE #835:
  File: backend/src/controllers/qr.registry.controller.ts
  Line: 183
  Target: { qr_code }
  First occurrence: batch index 814
    - source_expr: req.params
    - in_function: QRRegistryController./**
   * Get hierarchy for QR code
   */
  getHierarchy
  Second occurrence: batch index 835
    - source_expr: req.params
    - in_function: QRRegistryController./**
   * Get hierarchy for QR code
   */
  getHierarchy

[DEBUG] DUPLICATE #836:
  File: backend/src/controllers/qr.registry.controller.ts
  Line: 184
  Target: { accountId }
  First occurrence: batch index 815
    - source_expr: this.getTenantContext(req)
    - in_function: QRRegistryController./**
   * Get hierarchy for QR code
   */
  getHierarchy
  Second occurrence: batch index 836
    - source_expr: this.getTenantContext(req)
    - in_function: QRRegistryController./**
   * Get hierarchy for QR code
   */
  getHierarchy

[DEBUG] DUPLICATE #837:
  File: backend/src/controllers/qr.registry.controller.ts
  Line: 186
  Target: hierarchy
  First occurrence: batch index 816
    - source_expr: await qrService.getQRCodeHierarchy(accountId, qr_code)
    - in_function: QRRegistryController./**
   * Get hierarchy for QR code
   */
  getHierarchy
  Second occurrence: batch index 837
    - source_expr: await qrService.getQRCodeHierarchy(accountId, qr_code)
    - in_function: QRRegistryController./**
   * Get hierarchy for QR code
   */
  getHierarchy

[DEBUG] DUPLICATE #847:
  File: backend/src/controllers/qr.scan.controller.ts
  Line: 13
  Target: controller
  First occurrence: batch index 839
    - source_expr: new QRScanController()
    - in_function: QRScanController.scan
  Second occurrence: batch index 847
    - source_expr: new QRScanController()
    - in_function: QRScanController.scan

[DEBUG] DUPLICATE #848:
  File: backend/src/controllers/qr.scan.controller.ts
  Line: 14
  Target: { accountId, userId }
  First occurrence: batch index 840
    - source_expr: controller.getTenantContext(req)
    - in_function: QRScanController.scan
  Second occurrence: batch index 848
    - source_expr: controller.getTenantContext(req)
    - in_function: QRScanController.scan

[DEBUG] DUPLICATE #849:
  File: backend/src/controllers/qr.scan.controller.ts
  Line: 15
  Target: { qrCode }
  First occurrence: batch index 841
    - source_expr: req.params
    - in_function: QRScanController.scan
  Second occurrence: batch index 849
    - source_expr: req.params
    - in_function: QRScanController.scan

[DEBUG] DUPLICATE #850:
  File: backend/src/controllers/qr.scan.controller.ts
  Line: 20
  Target: result
  First occurrence: batch index 842
    - source_expr: await qrService.lookupQRCode(
        accountId,
        qrCode,
        userId,
        {
    
    - in_function: QRScanController.scan
  Second occurrence: batch index 850
    - source_expr: await qrService.lookupQRCode(
        accountId,
        qrCode,
        userId,
        {
    
    - in_function: QRScanController.scan

[DEBUG] DUPLICATE #851:
  File: backend/src/controllers/qr.scan.controller.ts
  Line: 42
  Target: controller
  First occurrence: batch index 843
    - source_expr: new QRScanController()
    - in_function: QRScanController.bulkScan
  Second occurrence: batch index 851
    - source_expr: new QRScanController()
    - in_function: QRScanController.bulkScan

[DEBUG] DUPLICATE #852:
  File: backend/src/controllers/qr.scan.controller.ts
  Line: 43
  Target: { accountId, userId }
  First occurrence: batch index 844
    - source_expr: controller.getTenantContext(req)
    - in_function: QRScanController.bulkScan
  Second occurrence: batch index 852
    - source_expr: controller.getTenantContext(req)
    - in_function: QRScanController.bulkScan

[DEBUG] DUPLICATE #853:
  File: backend/src/controllers/qr.scan.controller.ts
  Line: 44
  Target: { qr_codes }
  First occurrence: batch index 845
    - source_expr: req.body
    - in_function: QRScanController.bulkScan
  Second occurrence: batch index 853
    - source_expr: req.body
    - in_function: QRScanController.bulkScan

[DEBUG] DUPLICATE #854:
  File: backend/src/controllers/qr.scan.controller.ts
  Line: 49
  Target: results
  First occurrence: batch index 846
    - source_expr: await qrService.bulkLookupQRCodes(
        accountId,
        qr_codes,
        userId
      )
    - in_function: QRScanController.bulkScan
  Second occurrence: batch index 854
    - source_expr: await qrService.bulkLookupQRCodes(
        accountId,
        qr_codes,
        userId
      )
    - in_function: QRScanController.bulkScan

[DEBUG] DUPLICATE #874:
  File: backend/src/controllers/signature.controller.ts
  Line: 13
  Target: controller
  First occurrence: batch index 855
    - source_expr: new SignatureController()
    - in_function: SignatureController.capture
  Second occurrence: batch index 874
    - source_expr: new SignatureController()
    - in_function: SignatureController.capture

[DEBUG] DUPLICATE #875:
  File: backend/src/controllers/signature.controller.ts
  Line: 14
  Target: { accountId }
  First occurrence: batch index 856
    - source_expr: controller.getTenantContext(req)
    - in_function: SignatureController.capture
  Second occurrence: batch index 875
    - source_expr: controller.getTenantContext(req)
    - in_function: SignatureController.capture

[DEBUG] DUPLICATE #876:
  File: backend/src/controllers/signature.controller.ts
  Line: 15
  Target: signerIp
  First occurrence: batch index 857
    - source_expr: req.ip || req.connection.remoteAddress
    - in_function: SignatureController.capture
  Second occurrence: batch index 876
    - source_expr: req.ip || req.connection.remoteAddress
    - in_function: SignatureController.capture

[DEBUG] DUPLICATE #877:
  File: backend/src/controllers/signature.controller.ts
  Line: 17
  Target: signature
  First occurrence: batch index 858
    - source_expr: await signatureService.captureSignature(
        accountId,
        req.body,
        signerIp
 
    - in_function: SignatureController.capture
  Second occurrence: batch index 877
    - source_expr: await signatureService.captureSignature(
        accountId,
        req.body,
        signerIp
 
    - in_function: SignatureController.capture

[DEBUG] DUPLICATE #878:
  File: backend/src/controllers/signature.controller.ts
  Line: 37
  Target: controller
  First occurrence: batch index 859
    - source_expr: new SignatureController()
    - in_function: SignatureController.getById
  Second occurrence: batch index 878
    - source_expr: new SignatureController()
    - in_function: SignatureController.getById

[DEBUG] DUPLICATE #879:
  File: backend/src/controllers/signature.controller.ts
  Line: 38
  Target: { accountId }
  First occurrence: batch index 860
    - source_expr: controller.getTenantContext(req)
    - in_function: SignatureController.getById
  Second occurrence: batch index 879
    - source_expr: controller.getTenantContext(req)
    - in_function: SignatureController.getById

[DEBUG] DUPLICATE #880:
  File: backend/src/controllers/signature.controller.ts
  Line: 39
  Target: { id }
  First occurrence: batch index 861
    - source_expr: req.params
    - in_function: SignatureController.getById
  Second occurrence: batch index 880
    - source_expr: req.params
    - in_function: SignatureController.getById

[DEBUG] DUPLICATE #881:
  File: backend/src/controllers/signature.controller.ts
  Line: 41
  Target: signature
  First occurrence: batch index 862
    - source_expr: await signatureService.findById(accountId, id)
    - in_function: SignatureController.getById
  Second occurrence: batch index 881
    - source_expr: await signatureService.findById(accountId, id)
    - in_function: SignatureController.getById

[DEBUG] DUPLICATE #882:
  File: backend/src/controllers/signature.controller.ts
  Line: 57
  Target: controller
  First occurrence: batch index 863
    - source_expr: new SignatureController()
    - in_function: SignatureController.getByEntity
  Second occurrence: batch index 882
    - source_expr: new SignatureController()
    - in_function: SignatureController.getByEntity

[DEBUG] DUPLICATE #883:
  File: backend/src/controllers/signature.controller.ts
  Line: 58
  Target: { accountId }
  First occurrence: batch index 864
    - source_expr: controller.getTenantContext(req)
    - in_function: SignatureController.getByEntity
  Second occurrence: batch index 883
    - source_expr: controller.getTenantContext(req)
    - in_function: SignatureController.getByEntity

[DEBUG] DUPLICATE #884:
  File: backend/src/controllers/signature.controller.ts
  Line: 59
  Target: { type, id }
  First occurrence: batch index 865
    - source_expr: req.params
    - in_function: SignatureController.getByEntity
  Second occurrence: batch index 884
    - source_expr: req.params
    - in_function: SignatureController.getByEntity

[DEBUG] DUPLICATE #885:
  File: backend/src/controllers/signature.controller.ts
  Line: 61
  Target: signatures
  First occurrence: batch index 866
    - source_expr: await signatureService.getByEntity(accountId, type, id)
    - in_function: SignatureController.getByEntity
  Second occurrence: batch index 885
    - source_expr: await signatureService.getByEntity(accountId, type, id)
    - in_function: SignatureController.getByEntity

[DEBUG] DUPLICATE #886:
  File: backend/src/controllers/signature.controller.ts
  Line: 81
  Target: controller
  First occurrence: batch index 867
    - source_expr: new SignatureController()
    - in_function: SignatureController.verify
  Second occurrence: batch index 886
    - source_expr: new SignatureController()
    - in_function: SignatureController.verify

[DEBUG] DUPLICATE #887:
  File: backend/src/controllers/signature.controller.ts
  Line: 82
  Target: { accountId }
  First occurrence: batch index 868
    - source_expr: controller.getTenantContext(req)
    - in_function: SignatureController.verify
  Second occurrence: batch index 887
    - source_expr: controller.getTenantContext(req)
    - in_function: SignatureController.verify

[DEBUG] DUPLICATE #888:
  File: backend/src/controllers/signature.controller.ts
  Line: 83
  Target: { signature_id }
  First occurrence: batch index 869
    - source_expr: req.body
    - in_function: SignatureController.verify
  Second occurrence: batch index 888
    - source_expr: req.body
    - in_function: SignatureController.verify

[DEBUG] DUPLICATE #889:
  File: backend/src/controllers/signature.controller.ts
  Line: 87
  Target: result
  First occurrence: batch index 870
    - source_expr: await signatureService.verifySignature(accountId, signature_id)
    - in_function: SignatureController.verify
  Second occurrence: batch index 889
    - source_expr: await signatureService.verifySignature(accountId, signature_id)
    - in_function: SignatureController.verify

[DEBUG] DUPLICATE #890:
  File: backend/src/controllers/signature.controller.ts
  Line: 107
  Target: controller
  First occurrence: batch index 871
    - source_expr: new SignatureController()
    - in_function: SignatureController.void
  Second occurrence: batch index 890
    - source_expr: new SignatureController()
    - in_function: SignatureController.void

[DEBUG] DUPLICATE #891:
  File: backend/src/controllers/signature.controller.ts
  Line: 108
  Target: { accountId, userId }
  First occurrence: batch index 872
    - source_expr: controller.getTenantContext(req)
    - in_function: SignatureController.void
  Second occurrence: batch index 891
    - source_expr: controller.getTenantContext(req)
    - in_function: SignatureController.void

[DEBUG] DUPLICATE #892:
  File: backend/src/controllers/signature.controller.ts
  Line: 109
  Target: { id }
  First occurrence: batch index 873
    - source_expr: req.params
    - in_function: SignatureController.void
  Second occurrence: batch index 892
    - source_expr: req.params
    - in_function: SignatureController.void

[DEBUG] DUPLICATE #908:
  File: backend/src/controllers/sop.controller.ts
  Line: 13
  Target: { accountId }
  First occurrence: batch index 894
    - source_expr: this.getTenantContext(req)
    - in_function: SOPController.list
  Second occurrence: batch index 908
    - source_expr: this.getTenantContext(req)
    - in_function: SOPController.list

[DEBUG] DUPLICATE #909:
  File: backend/src/controllers/sop.controller.ts
  Line: 16
  Target: query
  First occurrence: batch index 895
    - source_expr: validation.query.sopList.parse(req.query)
    - in_function: SOPController.list
  Second occurrence: batch index 909
    - source_expr: validation.query.sopList.parse(req.query)
    - in_function: SOPController.list

[DEBUG] DUPLICATE #910:
  File: backend/src/controllers/sop.controller.ts
  Line: 17
  Target: offset
  First occurrence: batch index 896
    - source_expr: this.getOffset(query.page, query.limit)
    - in_function: SOPController.list
  Second occurrence: batch index 910
    - source_expr: this.getOffset(query.page, query.limit)
    - in_function: SOPController.list

[DEBUG] DUPLICATE #911:
  File: backend/src/controllers/sop.controller.ts
  Line: 19
  Target: where: Record<string, unknown>
  First occurrence: batch index 897
    - source_expr: {}
    - in_function: SOPController.list
  Second occurrence: batch index 911
    - source_expr: {}
    - in_function: SOPController.list

[DEBUG] DUPLICATE #912:
  File: backend/src/controllers/sop.controller.ts
  Line: 27
  Target: options: ListOptions
  First occurrence: batch index 898
    - source_expr: {
      where,
      limit: query.limit,
      offset,
      order: [[query.sort || 'created_at'
    - in_function: SOPController.list
  Second occurrence: batch index 912
    - source_expr: {
      where,
      limit: query.limit,
      offset,
      order: [[query.sort || 'created_at'
    - in_function: SOPController.list

[DEBUG] DUPLICATE #913:
  File: backend/src/controllers/sop.controller.ts
  Line: 34
  Target: result
  First occurrence: batch index 899
    - source_expr: await sopService.findAll(accountId, options)
    - in_function: SOPController.list
  Second occurrence: batch index 913
    - source_expr: await sopService.findAll(accountId, options)
    - in_function: SOPController.list

[DEBUG] DUPLICATE #914:
  File: backend/src/controllers/sop.controller.ts
  Line: 36
  Target: meta
  First occurrence: batch index 900
    - source_expr: this.getPaginationMeta(result.count, query.page, query.limit)
    - in_function: SOPController.list
  Second occurrence: batch index 914
    - source_expr: this.getPaginationMeta(result.count, query.page, query.limit)
    - in_function: SOPController.list

[DEBUG] DUPLICATE #915:
  File: backend/src/controllers/sop.controller.ts
  Line: 47
  Target: { accountId }
  First occurrence: batch index 901
    - source_expr: this.getTenantContext(req)
    - in_function: SOPController.getById
  Second occurrence: batch index 915
    - source_expr: this.getTenantContext(req)
    - in_function: SOPController.getById

[DEBUG] DUPLICATE #916:
  File: backend/src/controllers/sop.controller.ts
  Line: 48
  Target: entity
  First occurrence: batch index 902
    - source_expr: await sopService.findById(accountId, req.params.id)
    - in_function: SOPController.getById
  Second occurrence: batch index 916
    - source_expr: await sopService.findById(accountId, req.params.id)
    - in_function: SOPController.getById

[DEBUG] DUPLICATE #917:
  File: backend/src/controllers/sop.controller.ts
  Line: 53
  Target: { accountId, userId }
  First occurrence: batch index 903
    - source_expr: this.getTenantContext(req)
    - in_function: SOPController.create
  Second occurrence: batch index 917
    - source_expr: this.getTenantContext(req)
    - in_function: SOPController.create

[DEBUG] DUPLICATE #918:
  File: backend/src/controllers/sop.controller.ts
  Line: 54
  Target: entity
  First occurrence: batch index 904
    - source_expr: await sopService.create(accountId, req.body, userId!)
    - in_function: SOPController.create
  Second occurrence: batch index 918
    - source_expr: await sopService.create(accountId, req.body, userId!)
    - in_function: SOPController.create

[DEBUG] DUPLICATE #919:
  File: backend/src/controllers/sop.controller.ts
  Line: 59
  Target: { accountId, userId }
  First occurrence: batch index 905
    - source_expr: this.getTenantContext(req)
    - in_function: SOPController.update
  Second occurrence: batch index 919
    - source_expr: this.getTenantContext(req)
    - in_function: SOPController.update

[DEBUG] DUPLICATE #920:
  File: backend/src/controllers/sop.controller.ts
  Line: 60
  Target: entity
  First occurrence: batch index 906
    - source_expr: await sopService.update(accountId, req.params.id, req.body, userId!)
    - in_function: SOPController.update
  Second occurrence: batch index 920
    - source_expr: await sopService.update(accountId, req.params.id, req.body, userId!)
    - in_function: SOPController.update

[DEBUG] DUPLICATE #921:
  File: backend/src/controllers/sop.controller.ts
  Line: 65
  Target: { accountId, userId }
  First occurrence: batch index 907
    - source_expr: this.getTenantContext(req)
    - in_function: SOPController.delete
  Second occurrence: batch index 921
    - source_expr: this.getTenantContext(req)
    - in_function: SOPController.delete

[DEBUG] DUPLICATE #949:
  File: backend/src/controllers/sync.controller.ts
  Line: 27
  Target: { accountId }
  First occurrence: batch index 924
    - source_expr: this.getTenantContext(req)
    - in_function: SyncController.list
  Second occurrence: batch index 949
    - source_expr: this.getTenantContext(req)
    - in_function: SyncController.list

[DEBUG] DUPLICATE #950:
  File: backend/src/controllers/sync.controller.ts
  Line: 30
  Target: query
  First occurrence: batch index 925
    - source_expr: validation.params.pagination.parse(req.query)
    - in_function: SyncController.list
  Second occurrence: batch index 950
    - source_expr: validation.params.pagination.parse(req.query)
    - in_function: SyncController.list

[DEBUG] DUPLICATE #951:
  File: backend/src/controllers/sync.controller.ts
  Line: 31
  Target: offset
  First occurrence: batch index 926
    - source_expr: this.getOffset(query.page, query.limit)
    - in_function: SyncController.list
  Second occurrence: batch index 951
    - source_expr: this.getOffset(query.page, query.limit)
    - in_function: SyncController.list

[DEBUG] DUPLICATE #952:
  File: backend/src/controllers/sync.controller.ts
  Line: 34
  Target: { count, rows }
  First occurrence: batch index 927
    - source_expr: await SyncQueue.findAndCountAll({
      where: { account_id: accountId },
      limit: query.limit
    - in_function: SyncController.list
  Second occurrence: batch index 952
    - source_expr: await SyncQueue.findAndCountAll({
      where: { account_id: accountId },
      limit: query.limit
    - in_function: SyncController.list

[DEBUG] DUPLICATE #953:
  File: backend/src/controllers/sync.controller.ts
  Line: 41
  Target: meta
  First occurrence: batch index 928
    - source_expr: this.getPaginationMeta(count, query.page, query.limit)
    - in_function: SyncController.list
  Second occurrence: batch index 953
    - source_expr: this.getPaginationMeta(count, query.page, query.limit)
    - in_function: SyncController.list

[DEBUG] DUPLICATE #954:
  File: backend/src/controllers/sync.controller.ts
  Line: 46
  Target: { accountId }
  First occurrence: batch index 929
    - source_expr: this.getTenantContext(req)
    - in_function: SyncController.process
  Second occurrence: batch index 954
    - source_expr: this.getTenantContext(req)
    - in_function: SyncController.process

[DEBUG] DUPLICATE #955:
  File: backend/src/controllers/sync.controller.ts
  Line: 47
  Target: result
  First occurrence: batch index 930
    - source_expr: await syncService.processPendingSync(accountId)
    - in_function: SyncController.process
  Second occurrence: batch index 955
    - source_expr: await syncService.processPendingSync(accountId)
    - in_function: SyncController.process

[DEBUG] DUPLICATE #956:
  File: backend/src/controllers/sync.controller.ts
  Line: 52
  Target: { accountId }
  First occurrence: batch index 931
    - source_expr: this.getTenantContext(req)
    - in_function: SyncController.retry
  Second occurrence: batch index 956
    - source_expr: this.getTenantContext(req)
    - in_function: SyncController.retry

[DEBUG] DUPLICATE #957:
  File: backend/src/controllers/sync.controller.ts
  Line: 53
  Target: result
  First occurrence: batch index 932
    - source_expr: await syncService.retryFailed(accountId, req.params.id)
    - in_function: SyncController.retry
  Second occurrence: batch index 957
    - source_expr: await syncService.retryFailed(accountId, req.params.id)
    - in_function: SyncController.retry

[DEBUG] DUPLICATE #958:
  File: backend/src/controllers/sync.controller.ts
  Line: 63
  Target: { accountId }
  First occurrence: batch index 933
    - source_expr: this.getTenantContext(req)
    - in_function: SyncController./**
   * Download bulk data for offline use
   * Expected by frontend/src/services/offline.service.ts:176
   * Returns compressed dataset for offline caching
   */
  syncForOffline
  Second occurrence: batch index 958
    - source_expr: this.getTenantContext(req)
    - in_function: SyncController./**
   * Download bulk data for offline use
   * Expected by frontend/src/services/offline.service.ts:176
   * Returns compressed dataset for offline caching
   */
  syncForOffline

[DEBUG] DUPLICATE #959:
  File: backend/src/controllers/sync.controller.ts
  Line: 64
  Target: { include
  First occurrence: batch index 934
    - source_expr: [], compress = true, limit = {} } = req.body
    - in_function: SyncController./**
   * Download bulk data for offline use
   * Expected by frontend/src/services/offline.service.ts:176
   * Returns compressed dataset for offline caching
   */
  syncForOffline
  Second occurrence: batch index 959
    - source_expr: [], compress = true, limit = {} } = req.body
    - in_function: SyncController./**
   * Download bulk data for offline use
   * Expected by frontend/src/services/offline.service.ts:176
   * Returns compressed dataset for offline caching
   */
  syncForOffline

[DEBUG] DUPLICATE #960:
  File: backend/src/controllers/sync.controller.ts
  Line: 66
  Target: data: Record<string, unknown[]>
  First occurrence: batch index 935
    - source_expr: {}
    - in_function: SyncController./**
   * Download bulk data for offline use
   * Expected by frontend/src/services/offline.service.ts:176
   * Returns compressed dataset for offline caching
   */
  syncForOffline
  Second occurrence: batch index 960
    - source_expr: {}
    - in_function: SyncController./**
   * Download bulk data for offline use
   * Expected by frontend/src/services/offline.service.ts:176
   * Returns compressed dataset for offline caching
   */
  syncForOffline

[DEBUG] DUPLICATE #961:
  File: backend/src/controllers/sync.controller.ts
  Line: 69
  Target: promises: Promise<void>[]
  First occurrence: batch index 936
    - source_expr: []
    - in_function: SyncController./**
   * Download bulk data for offline use
   * Expected by frontend/src/services/offline.service.ts:176
   * Returns compressed dataset for offline caching
   */
  syncForOffline
  Second occurrence: batch index 961
    - source_expr: []
    - in_function: SyncController./**
   * Download bulk data for offline use
   * Expected by frontend/src/services/offline.service.ts:176
   * Returns compressed dataset for offline caching
   */
  syncForOffline

[DEBUG] DUPLICATE #962:
  File: backend/src/controllers/sync.controller.ts
  Line: 180
  Target: metadata
  First occurrence: batch index 937
    - source_expr: {
      sync_timestamp: new Date().toISOString(),
      account_id: accountId,
      counts: {
 
    - in_function: SyncController./**
   * Download bulk data for offline use
   * Expected by frontend/src/services/offline.service.ts:176
   * Returns compressed dataset for offline caching
   */
  syncForOffline
  Second occurrence: batch index 962
    - source_expr: {
      sync_timestamp: new Date().toISOString(),
      account_id: accountId,
      counts: {
 
    - in_function: SyncController./**
   * Download bulk data for offline use
   * Expected by frontend/src/services/offline.service.ts:176
   * Returns compressed dataset for offline caching
   */
  syncForOffline

[DEBUG] DUPLICATE #963:
  File: backend/src/controllers/sync.controller.ts
  Line: 219
  Target: { accountId, userId }
  First occurrence: batch index 938
    - source_expr: this.getTenantContext(req)
    - in_function: SyncController./**
   * Upload a single offline operation for processing
   * Expected by frontend/src/services/offline.service.ts:585
   * Processes queued offline operations with conflict resolution
   */
  syncOperation
  Second occurrence: batch index 963
    - source_expr: this.getTenantContext(req)
    - in_function: SyncController./**
   * Upload a single offline operation for processing
   * Expected by frontend/src/services/offline.service.ts:585
   * Processes queued offline operations with conflict resolution
   */
  syncOperation

[DEBUG] DUPLICATE #964:
  File: backend/src/controllers/sync.controller.ts
  Line: 220
  Target: operation
  First occurrence: batch index 939
    - source_expr: req.body
    - in_function: SyncController./**
   * Upload a single offline operation for processing
   * Expected by frontend/src/services/offline.service.ts:585
   * Processes queued offline operations with conflict resolution
   */
  syncOperation
  Second occurrence: batch index 964
    - source_expr: req.body
    - in_function: SyncController./**
   * Upload a single offline operation for processing
   * Expected by frontend/src/services/offline.service.ts:585
   * Processes queued offline operations with conflict resolution
   */
  syncOperation

[DEBUG] DUPLICATE #965:
  File: backend/src/controllers/sync.controller.ts
  Line: 230
  Target: transaction
  First occurrence: batch index 940
    - source_expr: await sequelize.transaction()
    - in_function: SyncController./**
   * Upload a single offline operation for processing
   * Expected by frontend/src/services/offline.service.ts:585
   * Processes queued offline operations with conflict resolution
   */
  syncOperation
  Second occurrence: batch index 965
    - source_expr: await sequelize.transaction()
    - in_function: SyncController./**
   * Upload a single offline operation for processing
   * Expected by frontend/src/services/offline.service.ts:585
   * Processes queued offline operations with conflict resolution
   */
  syncOperation

[DEBUG] DUPLICATE #966:
  File: backend/src/controllers/sync.controller.ts
  Line: 274
  Target: operationInput: OperationCreateInput
  First occurrence: batch index 941
    - source_expr: {
            batch_id: operation.data.batch_id as string | undefined,
            plant_ids: oper
    - in_function: SyncController./**
   * Upload a single offline operation for processing
   * Expected by frontend/src/services/offline.service.ts:585
   * Processes queued offline operations with conflict resolution
   */
  syncOperation
  Second occurrence: batch index 966
    - source_expr: {
            batch_id: operation.data.batch_id as string | undefined,
            plant_ids: oper
    - in_function: SyncController./**
   * Upload a single offline operation for processing
   * Expected by frontend/src/services/offline.service.ts:585
   * Processes queued offline operations with conflict resolution
   */
  syncOperation

[DEBUG] DUPLICATE #967:
  File: backend/src/controllers/sync.controller.ts
  Line: 338
  Target: batchData
  First occurrence: batch index 942
    - source_expr: validation.batch.create.parse(data)
    - in_function: SyncController.processCreateOperation
  Second occurrence: batch index 967
    - source_expr: validation.batch.create.parse(data)
    - in_function: SyncController.processCreateOperation

[DEBUG] DUPLICATE #968:
  File: backend/src/controllers/sync.controller.ts
  Line: 339
  Target: createData: Partial<BatchAttributes>
  First occurrence: batch index 943
    - source_expr: {
          ...batchData,
          account_id: accountId,
          start_date: new Date(batchDa
    - in_function: SyncController.processCreateOperation
  Second occurrence: batch index 968
    - source_expr: {
          ...batchData,
          account_id: accountId,
          start_date: new Date(batchDa
    - in_function: SyncController.processCreateOperation

[DEBUG] DUPLICATE #969:
  File: backend/src/controllers/sync.controller.ts
  Line: 349
  Target: plantData
  First occurrence: batch index 944
    - source_expr: validation.plant.create.parse(data)
    - in_function: SyncController.processCreateOperation
  Second occurrence: batch index 969
    - source_expr: validation.plant.create.parse(data)
    - in_function: SyncController.processCreateOperation

[DEBUG] DUPLICATE #970:
  File: backend/src/controllers/sync.controller.ts
  Line: 351
  Target: createData: Partial<PlantAttributes>
  First occurrence: batch index 945
    - source_expr: {
          ...plantData,
          account_id: accountId,
          plant_date: new Date(plantDa
    - in_function: SyncController.processCreateOperation
  Second occurrence: batch index 970
    - source_expr: {
          ...plantData,
          account_id: accountId,
          plant_date: new Date(plantDa
    - in_function: SyncController.processCreateOperation

[DEBUG] DUPLICATE #971:
  File: backend/src/controllers/sync.controller.ts
  Line: 362
  Target: operationData
  First occurrence: batch index 946
    - source_expr: validation.operation.create.parse(data)
    - in_function: SyncController.processCreateOperation
  Second occurrence: batch index 971
    - source_expr: validation.operation.create.parse(data)
    - in_function: SyncController.processCreateOperation

[DEBUG] DUPLICATE #972:
  File: backend/src/controllers/sync.controller.ts
  Line: 377
  Target: where
  First occurrence: batch index 947
    - source_expr: { id, account_id: accountId }
    - in_function: SyncController.processUpdateOperation
  Second occurrence: batch index 972
    - source_expr: { id, account_id: accountId }
    - in_function: SyncController.processUpdateOperation

[DEBUG] DUPLICATE #973:
  File: backend/src/controllers/sync.controller.ts
  Line: 395
  Target: where
  First occurrence: batch index 948
    - source_expr: { id, account_id: accountId }
    - in_function: SyncController.processDeleteOperation
  Second occurrence: batch index 973
    - source_expr: { id, account_id: accountId }
    - in_function: SyncController.processDeleteOperation

[DEBUG] DUPLICATE #1019:
  File: backend/src/controllers/task.controller.ts
  Line: 74
  Target: { accountId }
  First occurrence: batch index 974
    - source_expr: this.getTenantContext(req)
    - in_function: TaskController./**
   * List all tasks (managers see all, workers see only their own)
   */
  list
  Second occurrence: batch index 1019
    - source_expr: this.getTenantContext(req)
    - in_function: TaskController./**
   * List all tasks (managers see all, workers see only their own)
   */
  list

[DEBUG] DUPLICATE #1020:
  File: backend/src/controllers/task.controller.ts
  Line: 75
  Target: user
  First occurrence: batch index 975
    - source_expr: req.user
    - in_function: TaskController./**
   * List all tasks (managers see all, workers see only their own)
   */
  list
  Second occurrence: batch index 1020
    - source_expr: req.user
    - in_function: TaskController./**
   * List all tasks (managers see all, workers see only their own)
   */
  list

[DEBUG] DUPLICATE #1021:
  File: backend/src/controllers/task.controller.ts
  Line: 78
  Target: isWorker
  First occurrence: batch index 976
    - source_expr: user && 'worker_code' in user
    - in_function: TaskController./**
   * List all tasks (managers see all, workers see only their own)
   */
  list
  Second occurrence: batch index 1021
    - source_expr: user && 'worker_code' in user
    - in_function: TaskController./**
   * List all tasks (managers see all, workers see only their own)
   */
  list

[DEBUG] DUPLICATE #1022:
  File: backend/src/controllers/task.controller.ts
  Line: 86
  Target: query
  First occurrence: batch index 977
    - source_expr: req.query
    - in_function: TaskController./**
   * List all tasks (managers see all, workers see only their own)
   */
  list
  Second occurrence: batch index 1022
    - source_expr: req.query
    - in_function: TaskController./**
   * List all tasks (managers see all, workers see only their own)
   */
  list

[DEBUG] DUPLICATE #1023:
  File: backend/src/controllers/task.controller.ts
  Line: 87
  Target: whereClause: Partial<{
        status: 'pending' | 'in_progress' | 'completed' | 'cancelled';
        priority: 'high' | 'medium' | 'low';
        assigned_to: string;
      }>
  First occurrence: batch index 978
    - source_expr: {}
    - in_function: TaskController./**
   * List all tasks (managers see all, workers see only their own)
   */
  list
  Second occurrence: batch index 1023
    - source_expr: {}
    - in_function: TaskController./**
   * List all tasks (managers see all, workers see only their own)
   */
  list

[DEBUG] DUPLICATE #1024:
  File: backend/src/controllers/task.controller.ts
  Line: 118
  Target: { accountId }
  First occurrence: batch index 979
    - source_expr: this.getTenantContext(req)
    - in_function: TaskController./**
   * Get single task by ID
   */
  getById
  Second occurrence: batch index 1024
    - source_expr: this.getTenantContext(req)
    - in_function: TaskController./**
   * Get single task by ID
   */
  getById

[DEBUG] DUPLICATE #1025:
  File: backend/src/controllers/task.controller.ts
  Line: 119
  Target: user
  First occurrence: batch index 980
    - source_expr: req.user
    - in_function: TaskController./**
   * Get single task by ID
   */
  getById
  Second occurrence: batch index 1025
    - source_expr: req.user
    - in_function: TaskController./**
   * Get single task by ID
   */
  getById

[DEBUG] DUPLICATE #1026:
  File: backend/src/controllers/task.controller.ts
  Line: 121
  Target: task
  First occurrence: batch index 981
    - source_expr: await taskService.findById(accountId, req.params.id)
    - in_function: TaskController./**
   * Get single task by ID
   */
  getById
  Second occurrence: batch index 1026
    - source_expr: await taskService.findById(accountId, req.params.id)
    - in_function: TaskController./**
   * Get single task by ID
   */
  getById

[DEBUG] DUPLICATE #1027:
  File: backend/src/controllers/task.controller.ts
  Line: 135
  Target: { accountId, userId }
  First occurrence: batch index 982
    - source_expr: this.getTenantContext(req)
    - in_function: TaskController./**
   * Create new task (managers only)
   */
  create
  Second occurrence: batch index 1027
    - source_expr: this.getTenantContext(req)
    - in_function: TaskController./**
   * Create new task (managers only)
   */
  create

[DEBUG] DUPLICATE #1028:
  File: backend/src/controllers/task.controller.ts
  Line: 136
  Target: user
  First occurrence: batch index 983
    - source_expr: req.user
    - in_function: TaskController./**
   * Create new task (managers only)
   */
  create
  Second occurrence: batch index 1028
    - source_expr: req.user
    - in_function: TaskController./**
   * Create new task (managers only)
   */
  create

[DEBUG] DUPLICATE #1029:
  File: backend/src/controllers/task.controller.ts
  Line: 143
  Target: task
  First occurrence: batch index 984
    - source_expr: await taskService.createTask(accountId, req.body, userId)
    - in_function: TaskController./**
   * Create new task (managers only)
   */
  create
  Second occurrence: batch index 1029
    - source_expr: await taskService.createTask(accountId, req.body, userId)
    - in_function: TaskController./**
   * Create new task (managers only)
   */
  create

[DEBUG] DUPLICATE #1030:
  File: backend/src/controllers/task.controller.ts
  Line: 154
  Target: { id }
  First occurrence: batch index 985
    - source_expr: req.params
    - in_function: TaskController./**
   * Update task details (managers only)
   */
  update
  Second occurrence: batch index 1030
    - source_expr: req.params
    - in_function: TaskController./**
   * Update task details (managers only)
   */
  update

[DEBUG] DUPLICATE #1031:
  File: backend/src/controllers/task.controller.ts
  Line: 155
  Target: user
  First occurrence: batch index 986
    - source_expr: req.user
    - in_function: TaskController./**
   * Update task details (managers only)
   */
  update
  Second occurrence: batch index 1031
    - source_expr: req.user
    - in_function: TaskController./**
   * Update task details (managers only)
   */
  update

[DEBUG] DUPLICATE #1032:
  File: backend/src/controllers/task.controller.ts
  Line: 156
  Target: { accountId }
  First occurrence: batch index 987
    - source_expr: this.getTenantContext(req)
    - in_function: TaskController./**
   * Update task details (managers only)
   */
  update
  Second occurrence: batch index 1032
    - source_expr: this.getTenantContext(req)
    - in_function: TaskController./**
   * Update task details (managers only)
   */
  update

[DEBUG] DUPLICATE #1033:
  File: backend/src/controllers/task.controller.ts
  Line: 163
  Target: task
  First occurrence: batch index 988
    - source_expr: await taskService.updateTask(accountId, id, req.body, user!.id)
    - in_function: TaskController./**
   * Update task details (managers only)
   */
  update
  Second occurrence: batch index 1033
    - source_expr: await taskService.updateTask(accountId, id, req.body, user!.id)
    - in_function: TaskController./**
   * Update task details (managers only)
   */
  update

[DEBUG] DUPLICATE #1034:
  File: backend/src/controllers/task.controller.ts
  Line: 174
  Target: { accountId, userId }
  First occurrence: batch index 989
    - source_expr: this.getTenantContext(req)
    - in_function: TaskController./**
   * Assign task to worker/user (managers only)
   */
  assign
  Second occurrence: batch index 1034
    - source_expr: this.getTenantContext(req)
    - in_function: TaskController./**
   * Assign task to worker/user (managers only)
   */
  assign

[DEBUG] DUPLICATE #1035:
  File: backend/src/controllers/task.controller.ts
  Line: 175
  Target: user
  First occurrence: batch index 990
    - source_expr: req.user
    - in_function: TaskController./**
   * Assign task to worker/user (managers only)
   */
  assign
  Second occurrence: batch index 1035
    - source_expr: req.user
    - in_function: TaskController./**
   * Assign task to worker/user (managers only)
   */
  assign

[DEBUG] DUPLICATE #1036:
  File: backend/src/controllers/task.controller.ts
  Line: 182
  Target: { taskId }
  First occurrence: batch index 991
    - source_expr: req.params
    - in_function: TaskController./**
   * Assign task to worker/user (managers only)
   */
  assign
  Second occurrence: batch index 1036
    - source_expr: req.params
    - in_function: TaskController./**
   * Assign task to worker/user (managers only)
   */
  assign

[DEBUG] DUPLICATE #1037:
  File: backend/src/controllers/task.controller.ts
  Line: 183
  Target: { assigned_to }
  First occurrence: batch index 992
    - source_expr: req.body
    - in_function: TaskController./**
   * Assign task to worker/user (managers only)
   */
  assign
  Second occurrence: batch index 1037
    - source_expr: req.body
    - in_function: TaskController./**
   * Assign task to worker/user (managers only)
   */
  assign

[DEBUG] DUPLICATE #1038:
  File: backend/src/controllers/task.controller.ts
  Line: 185
  Target: task
  First occurrence: batch index 993
    - source_expr: await taskService.assignTask(accountId, taskId, assigned_to, userId)
    - in_function: TaskController./**
   * Assign task to worker/user (managers only)
   */
  assign
  Second occurrence: batch index 1038
    - source_expr: await taskService.assignTask(accountId, taskId, assigned_to, userId)
    - in_function: TaskController./**
   * Assign task to worker/user (managers only)
   */
  assign

[DEBUG] DUPLICATE #1039:
  File: backend/src/controllers/task.controller.ts
  Line: 193
  Target: { accountId }
  First occurrence: batch index 994
    - source_expr: this.getTenantContext(req)
    - in_function: TaskController./**
   * Start task (workers mark as in progress)
   */
  start
  Second occurrence: batch index 1039
    - source_expr: this.getTenantContext(req)
    - in_function: TaskController./**
   * Start task (workers mark as in progress)
   */
  start

[DEBUG] DUPLICATE #1040:
  File: backend/src/controllers/task.controller.ts
  Line: 194
  Target: user
  First occurrence: batch index 995
    - source_expr: req.user
    - in_function: TaskController./**
   * Start task (workers mark as in progress)
   */
  start
  Second occurrence: batch index 1040
    - source_expr: req.user
    - in_function: TaskController./**
   * Start task (workers mark as in progress)
   */
  start

[DEBUG] DUPLICATE #1041:
  File: backend/src/controllers/task.controller.ts
  Line: 200
  Target: { taskId }
  First occurrence: batch index 996
    - source_expr: req.params
    - in_function: TaskController./**
   * Start task (workers mark as in progress)
   */
  start
  Second occurrence: batch index 1041
    - source_expr: req.params
    - in_function: TaskController./**
   * Start task (workers mark as in progress)
   */
  start

[DEBUG] DUPLICATE #1042:
  File: backend/src/controllers/task.controller.ts
  Line: 201
  Target: task
  First occurrence: batch index 997
    - source_expr: await taskService.startTask(accountId, taskId, user.id)
    - in_function: TaskController./**
   * Start task (workers mark as in progress)
   */
  start
  Second occurrence: batch index 1042
    - source_expr: await taskService.startTask(accountId, taskId, user.id)
    - in_function: TaskController./**
   * Start task (workers mark as in progress)
   */
  start

[DEBUG] DUPLICATE #1043:
  File: backend/src/controllers/task.controller.ts
  Line: 212
  Target: { accountId, userId }
  First occurrence: batch index 998
    - source_expr: this.getTenantContext(req)
    - in_function: TaskController./**
   * Complete task with operation linkage
   */
  complete
  Second occurrence: batch index 1043
    - source_expr: this.getTenantContext(req)
    - in_function: TaskController./**
   * Complete task with operation linkage
   */
  complete

[DEBUG] DUPLICATE #1044:
  File: backend/src/controllers/task.controller.ts
  Line: 213
  Target: user
  First occurrence: batch index 999
    - source_expr: req.user
    - in_function: TaskController./**
   * Complete task with operation linkage
   */
  complete
  Second occurrence: batch index 1044
    - source_expr: req.user
    - in_function: TaskController./**
   * Complete task with operation linkage
   */
  complete

[DEBUG] DUPLICATE #1045:
  File: backend/src/controllers/task.controller.ts
  Line: 214
  Target: { taskId }
  First occurrence: batch index 1000
    - source_expr: req.params
    - in_function: TaskController./**
   * Complete task with operation linkage
   */
  complete
  Second occurrence: batch index 1045
    - source_expr: req.params
    - in_function: TaskController./**
   * Complete task with operation linkage
   */
  complete

[DEBUG] DUPLICATE #1046:
  File: backend/src/controllers/task.controller.ts
  Line: 215
  Target: { operation_id }
  First occurrence: batch index 1001
    - source_expr: req.body
    - in_function: TaskController./**
   * Complete task with operation linkage
   */
  complete
  Second occurrence: batch index 1046
    - source_expr: req.body
    - in_function: TaskController./**
   * Complete task with operation linkage
   */
  complete

[DEBUG] DUPLICATE #1047:
  File: backend/src/controllers/task.controller.ts
  Line: 218
  Target: completedById
  First occurrence: batch index 1002
    - source_expr: user && 'worker_code' in user ? user.id : userId
    - in_function: TaskController./**
   * Complete task with operation linkage
   */
  complete
  Second occurrence: batch index 1047
    - source_expr: user && 'worker_code' in user ? user.id : userId
    - in_function: TaskController./**
   * Complete task with operation linkage
   */
  complete

[DEBUG] DUPLICATE #1048:
  File: backend/src/controllers/task.controller.ts
  Line: 220
  Target: task
  First occurrence: batch index 1003
    - source_expr: await taskService.completeTask(accountId, taskId, operation_id, completedById)
    - in_function: TaskController./**
   * Complete task with operation linkage
   */
  complete
  Second occurrence: batch index 1048
    - source_expr: await taskService.completeTask(accountId, taskId, operation_id, completedById)
    - in_function: TaskController./**
   * Complete task with operation linkage
   */
  complete

[DEBUG] DUPLICATE #1049:
  File: backend/src/controllers/task.controller.ts
  Line: 231
  Target: { accountId, userId }
  First occurrence: batch index 1004
    - source_expr: this.getTenantContext(req)
    - in_function: TaskController./**
   * Cancel task (managers only)
   */
  cancel
  Second occurrence: batch index 1049
    - source_expr: this.getTenantContext(req)
    - in_function: TaskController./**
   * Cancel task (managers only)
   */
  cancel

[DEBUG] DUPLICATE #1050:
  File: backend/src/controllers/task.controller.ts
  Line: 232
  Target: user
  First occurrence: batch index 1005
    - source_expr: req.user
    - in_function: TaskController./**
   * Cancel task (managers only)
   */
  cancel
  Second occurrence: batch index 1050
    - source_expr: req.user
    - in_function: TaskController./**
   * Cancel task (managers only)
   */
  cancel

[DEBUG] DUPLICATE #1051:
  File: backend/src/controllers/task.controller.ts
  Line: 239
  Target: { taskId }
  First occurrence: batch index 1006
    - source_expr: req.params
    - in_function: TaskController./**
   * Cancel task (managers only)
   */
  cancel
  Second occurrence: batch index 1051
    - source_expr: req.params
    - in_function: TaskController./**
   * Cancel task (managers only)
   */
  cancel

[DEBUG] DUPLICATE #1052:
  File: backend/src/controllers/task.controller.ts
  Line: 240
  Target: { reason }
  First occurrence: batch index 1007
    - source_expr: req.body
    - in_function: TaskController./**
   * Cancel task (managers only)
   */
  cancel
  Second occurrence: batch index 1052
    - source_expr: req.body
    - in_function: TaskController./**
   * Cancel task (managers only)
   */
  cancel

[DEBUG] DUPLICATE #1053:
  File: backend/src/controllers/task.controller.ts
  Line: 242
  Target: task
  First occurrence: batch index 1008
    - source_expr: await taskService.cancelTask(accountId, taskId, reason, userId)
    - in_function: TaskController./**
   * Cancel task (managers only)
   */
  cancel
  Second occurrence: batch index 1053
    - source_expr: await taskService.cancelTask(accountId, taskId, reason, userId)
    - in_function: TaskController./**
   * Cancel task (managers only)
   */
  cancel

[DEBUG] DUPLICATE #1054:
  File: backend/src/controllers/task.controller.ts
  Line: 250
  Target: { accountId }
  First occurrence: batch index 1009
    - source_expr: this.getTenantContext(req)
    - in_function: TaskController./**
   * Get my assigned tasks (workers)
   */
  myTasks
  Second occurrence: batch index 1054
    - source_expr: this.getTenantContext(req)
    - in_function: TaskController./**
   * Get my assigned tasks (workers)
   */
  myTasks

[DEBUG] DUPLICATE #1055:
  File: backend/src/controllers/task.controller.ts
  Line: 251
  Target: user
  First occurrence: batch index 1010
    - source_expr: req.user
    - in_function: TaskController./**
   * Get my assigned tasks (workers)
   */
  myTasks
  Second occurrence: batch index 1055
    - source_expr: req.user
    - in_function: TaskController./**
   * Get my assigned tasks (workers)
   */
  myTasks

[DEBUG] DUPLICATE #1056:
  File: backend/src/controllers/task.controller.ts
  Line: 258
  Target: identifier
  First occurrence: batch index 1011
    - source_expr: user.id
    - in_function: TaskController./**
   * Get my assigned tasks (workers)
   */
  myTasks
  Second occurrence: batch index 1056
    - source_expr: user.id
    - in_function: TaskController./**
   * Get my assigned tasks (workers)
   */
  myTasks

[DEBUG] DUPLICATE #1057:
  File: backend/src/controllers/task.controller.ts
  Line: 260
  Target: tasks
  First occurrence: batch index 1012
    - source_expr: await taskService.getWorkerTasks(accountId, identifier)
    - in_function: TaskController./**
   * Get my assigned tasks (workers)
   */
  myTasks
  Second occurrence: batch index 1057
    - source_expr: await taskService.getWorkerTasks(accountId, identifier)
    - in_function: TaskController./**
   * Get my assigned tasks (workers)
   */
  myTasks

[DEBUG] DUPLICATE #1058:
  File: backend/src/controllers/task.controller.ts
  Line: 268
  Target: { accountId }
  First occurrence: batch index 1013
    - source_expr: this.getTenantContext(req)
    - in_function: TaskController./**
   * Get overdue tasks (managers only)
   */
  overdue
  Second occurrence: batch index 1058
    - source_expr: this.getTenantContext(req)
    - in_function: TaskController./**
   * Get overdue tasks (managers only)
   */
  overdue

[DEBUG] DUPLICATE #1059:
  File: backend/src/controllers/task.controller.ts
  Line: 269
  Target: user
  First occurrence: batch index 1014
    - source_expr: req.user
    - in_function: TaskController./**
   * Get overdue tasks (managers only)
   */
  overdue
  Second occurrence: batch index 1059
    - source_expr: req.user
    - in_function: TaskController./**
   * Get overdue tasks (managers only)
   */
  overdue

[DEBUG] DUPLICATE #1060:
  File: backend/src/controllers/task.controller.ts
  Line: 276
  Target: tasks
  First occurrence: batch index 1015
    - source_expr: await taskService.getOverdueTasks(accountId)
    - in_function: TaskController./**
   * Get overdue tasks (managers only)
   */
  overdue
  Second occurrence: batch index 1060
    - source_expr: await taskService.getOverdueTasks(accountId)
    - in_function: TaskController./**
   * Get overdue tasks (managers only)
   */
  overdue

[DEBUG] DUPLICATE #1061:
  File: backend/src/controllers/task.controller.ts
  Line: 284
  Target: { accountId }
  First occurrence: batch index 1016
    - source_expr: this.getTenantContext(req)
    - in_function: TaskController./**
   * Get task statistics for dashboard
   */
  stats
  Second occurrence: batch index 1061
    - source_expr: this.getTenantContext(req)
    - in_function: TaskController./**
   * Get task statistics for dashboard
   */
  stats

[DEBUG] DUPLICATE #1062:
  File: backend/src/controllers/task.controller.ts
  Line: 285
  Target: user
  First occurrence: batch index 1017
    - source_expr: req.user
    - in_function: TaskController./**
   * Get task statistics for dashboard
   */
  stats
  Second occurrence: batch index 1062
    - source_expr: req.user
    - in_function: TaskController./**
   * Get task statistics for dashboard
   */
  stats

[DEBUG] DUPLICATE #1063:
  File: backend/src/controllers/task.controller.ts
  Line: 292
  Target: stats: TaskStatsResult
  First occurrence: batch index 1018
    - source_expr: await taskService.getTaskStats(accountId)
    - in_function: TaskController./**
   * Get task statistics for dashboard
   */
  stats
  Second occurrence: batch index 1063
    - source_expr: await taskService.getTaskStats(accountId)
    - in_function: TaskController./**
   * Get task statistics for dashboard
   */
  stats

[DEBUG] DUPLICATE #1075:
  File: backend/src/controllers/user.controller.ts
  Line: 13
  Target: { accountId, userId }
  First occurrence: batch index 1064
    - source_expr: this.getTenantContext(req)
    - in_function: UserController./**
   * Create user
   */
  createUser
  Second occurrence: batch index 1075
    - source_expr: this.getTenantContext(req)
    - in_function: UserController./**
   * Create user
   */
  createUser

[DEBUG] DUPLICATE #1076:
  File: backend/src/controllers/user.controller.ts
  Line: 14
  Target: user
  First occurrence: batch index 1065
    - source_expr: await userService.createUser(accountId, req.body, userId!)
    - in_function: UserController./**
   * Create user
   */
  createUser
  Second occurrence: batch index 1076
    - source_expr: await userService.createUser(accountId, req.body, userId!)
    - in_function: UserController./**
   * Create user
   */
  createUser

[DEBUG] DUPLICATE #1077:
  File: backend/src/controllers/user.controller.ts
  Line: 23
  Target: { accountId }
  First occurrence: batch index 1066
    - source_expr: this.getTenantContext(req)
    - in_function: UserController./**
   * Get user by ID
   */
  getUser
  Second occurrence: batch index 1077
    - source_expr: this.getTenantContext(req)
    - in_function: UserController./**
   * Get user by ID
   */
  getUser

[DEBUG] DUPLICATE #1078:
  File: backend/src/controllers/user.controller.ts
  Line: 24
  Target: user
  First occurrence: batch index 1067
    - source_expr: await userService.getUser(accountId, req.params.id)
    - in_function: UserController./**
   * Get user by ID
   */
  getUser
  Second occurrence: batch index 1078
    - source_expr: await userService.getUser(accountId, req.params.id)
    - in_function: UserController./**
   * Get user by ID
   */
  getUser

[DEBUG] DUPLICATE #1079:
  File: backend/src/controllers/user.controller.ts
  Line: 33
  Target: { accountId }
  First occurrence: batch index 1068
    - source_expr: this.getTenantContext(req)
    - in_function: UserController./**
   * List users
   */
  listUsers
  Second occurrence: batch index 1079
    - source_expr: this.getTenantContext(req)
    - in_function: UserController./**
   * List users
   */
  listUsers

[DEBUG] DUPLICATE #1080:
  File: backend/src/controllers/user.controller.ts
  Line: 36
  Target: query
  First occurrence: batch index 1069
    - source_expr: validation.query.userList.parse(req.query)
    - in_function: UserController./**
   * List users
   */
  listUsers
  Second occurrence: batch index 1080
    - source_expr: validation.query.userList.parse(req.query)
    - in_function: UserController./**
   * List users
   */
  listUsers

[DEBUG] DUPLICATE #1081:
  File: backend/src/controllers/user.controller.ts
  Line: 37
  Target: offset
  First occurrence: batch index 1070
    - source_expr: (query.page - 1) * query.limit
    - in_function: UserController./**
   * List users
   */
  listUsers
  Second occurrence: batch index 1081
    - source_expr: (query.page - 1) * query.limit
    - in_function: UserController./**
   * List users
   */
  listUsers

[DEBUG] DUPLICATE #1082:
  File: backend/src/controllers/user.controller.ts
  Line: 39
  Target: result
  First occurrence: batch index 1071
    - source_expr: await userService.listUsers(accountId, {
      is_active: query.is_active,
      search: query.sea
    - in_function: UserController./**
   * List users
   */
  listUsers
  Second occurrence: batch index 1082
    - source_expr: await userService.listUsers(accountId, {
      is_active: query.is_active,
      search: query.sea
    - in_function: UserController./**
   * List users
   */
  listUsers

[DEBUG] DUPLICATE #1083:
  File: backend/src/controllers/user.controller.ts
  Line: 58
  Target: { accountId, userId }
  First occurrence: batch index 1072
    - source_expr: this.getTenantContext(req)
    - in_function: UserController./**
   * Update user
   */
  updateUser
  Second occurrence: batch index 1083
    - source_expr: this.getTenantContext(req)
    - in_function: UserController./**
   * Update user
   */
  updateUser

[DEBUG] DUPLICATE #1084:
  File: backend/src/controllers/user.controller.ts
  Line: 59
  Target: user
  First occurrence: batch index 1073
    - source_expr: await userService.updateUser(
      accountId,
      req.params.id,
      req.body,
      userId
    - in_function: UserController./**
   * Update user
   */
  updateUser
  Second occurrence: batch index 1084
    - source_expr: await userService.updateUser(
      accountId,
      req.params.id,
      req.body,
      userId
    - in_function: UserController./**
   * Update user
   */
  updateUser

[DEBUG] DUPLICATE #1085:
  File: backend/src/controllers/user.controller.ts
  Line: 73
  Target: { accountId, userId }
  First occurrence: batch index 1074
    - source_expr: this.getTenantContext(req)
    - in_function: UserController./**
   * Deactivate user
   */
  deactivateUser
  Second occurrence: batch index 1085
    - source_expr: this.getTenantContext(req)
    - in_function: UserController./**
   * Deactivate user
   */
  deactivateUser

[DEBUG] DUPLICATE #1106:
  File: backend/src/controllers/worker.assignment.controller.ts
  Line: 15
  Target: { accountId }
  First occurrence: batch index 1087
    - source_expr: this.getTenantContext(req)
    - in_function: WorkerAssignmentController./**
   * List worker assignments
   */
  list
  Second occurrence: batch index 1106
    - source_expr: this.getTenantContext(req)
    - in_function: WorkerAssignmentController./**
   * List worker assignments
   */
  list

[DEBUG] DUPLICATE #1107:
  File: backend/src/controllers/worker.assignment.controller.ts
  Line: 18
  Target: query
  First occurrence: batch index 1088
    - source_expr: validation.query.workerAssignmentList.parse(req.query)
    - in_function: WorkerAssignmentController./**
   * List worker assignments
   */
  list
  Second occurrence: batch index 1107
    - source_expr: validation.query.workerAssignmentList.parse(req.query)
    - in_function: WorkerAssignmentController./**
   * List worker assignments
   */
  list

[DEBUG] DUPLICATE #1108:
  File: backend/src/controllers/worker.assignment.controller.ts
  Line: 22
  Target: assignments
  First occurrence: batch index 1089
    - source_expr: await workerAssignmentService.getWorkerAssignments(
        accountId,
        query.worker_id,
 
    - in_function: WorkerAssignmentController./**
   * List worker assignments
   */
  list
  Second occurrence: batch index 1108
    - source_expr: await workerAssignmentService.getWorkerAssignments(
        accountId,
        query.worker_id,
 
    - in_function: WorkerAssignmentController./**
   * List worker assignments
   */
  list

[DEBUG] DUPLICATE #1109:
  File: backend/src/controllers/worker.assignment.controller.ts
  Line: 30
  Target: workers
  First occurrence: batch index 1090
    - source_expr: await workerAssignmentService.getFacilityWorkers(
        accountId,
        query.facility_id
  
    - in_function: WorkerAssignmentController./**
   * List worker assignments
   */
  list
  Second occurrence: batch index 1109
    - source_expr: await workerAssignmentService.getFacilityWorkers(
        accountId,
        query.facility_id
  
    - in_function: WorkerAssignmentController./**
   * List worker assignments
   */
  list

[DEBUG] DUPLICATE #1110:
  File: backend/src/controllers/worker.assignment.controller.ts
  Line: 37
  Target: { facilityId: facility }
  First occurrence: batch index 1091
    - source_expr: req.params
    - in_function: WorkerAssignmentController./**
   * List worker assignments
   */
  list
  Second occurrence: batch index 1110
    - source_expr: req.params
    - in_function: WorkerAssignmentController./**
   * List worker assignments
   */
  list

[DEBUG] DUPLICATE #1111:
  File: backend/src/controllers/worker.assignment.controller.ts
  Line: 39
  Target: history
  First occurrence: batch index 1092
    - source_expr: await workerAssignmentService.getFacilityAssignmentHistory(
          accountId,
          facilit
    - in_function: WorkerAssignmentController./**
   * List worker assignments
   */
  list
  Second occurrence: batch index 1111
    - source_expr: await workerAssignmentService.getFacilityAssignmentHistory(
          accountId,
          facilit
    - in_function: WorkerAssignmentController./**
   * List worker assignments
   */
  list

[DEBUG] DUPLICATE #1112:
  File: backend/src/controllers/worker.assignment.controller.ts
  Line: 54
  Target: { accountId, userId }
  First occurrence: batch index 1093
    - source_expr: this.getTenantContext(req)
    - in_function: WorkerAssignmentController./**
   * Assign worker to facility
   */
  assign
  Second occurrence: batch index 1112
    - source_expr: this.getTenantContext(req)
    - in_function: WorkerAssignmentController./**
   * Assign worker to facility
   */
  assign

[DEBUG] DUPLICATE #1113:
  File: backend/src/controllers/worker.assignment.controller.ts
  Line: 56
  Target: assignmentData
  First occurrence: batch index 1094
    - source_expr: {
      worker_id: req.body.worker_id,
      facility_id: req.body.facility_id,
      role: 'work
    - in_function: WorkerAssignmentController./**
   * Assign worker to facility
   */
  assign
  Second occurrence: batch index 1113
    - source_expr: {
      worker_id: req.body.worker_id,
      facility_id: req.body.facility_id,
      role: 'work
    - in_function: WorkerAssignmentController./**
   * Assign worker to facility
   */
  assign

[DEBUG] DUPLICATE #1114:
  File: backend/src/controllers/worker.assignment.controller.ts
  Line: 65
  Target: worker
  First occurrence: batch index 1095
    - source_expr: await workerAssignmentService.assignWorker(
      accountId,
      assignmentData,
      userId!
    - in_function: WorkerAssignmentController./**
   * Assign worker to facility
   */
  assign
  Second occurrence: batch index 1114
    - source_expr: await workerAssignmentService.assignWorker(
      accountId,
      assignmentData,
      userId!
    - in_function: WorkerAssignmentController./**
   * Assign worker to facility
   */
  assign

[DEBUG] DUPLICATE #1115:
  File: backend/src/controllers/worker.assignment.controller.ts
  Line: 77
  Target: { accountId, userId }
  First occurrence: batch index 1096
    - source_expr: this.getTenantContext(req)
    - in_function: WorkerAssignmentController./**
   * Unassign worker from facility
   */
  unassign
  Second occurrence: batch index 1115
    - source_expr: this.getTenantContext(req)
    - in_function: WorkerAssignmentController./**
   * Unassign worker from facility
   */
  unassign

[DEBUG] DUPLICATE #1116:
  File: backend/src/controllers/worker.assignment.controller.ts
  Line: 79
  Target: { workerId, facilityId }
  First occurrence: batch index 1097
    - source_expr: req.params
    - in_function: WorkerAssignmentController./**
   * Unassign worker from facility
   */
  unassign
  Second occurrence: batch index 1116
    - source_expr: req.params
    - in_function: WorkerAssignmentController./**
   * Unassign worker from facility
   */
  unassign

[DEBUG] DUPLICATE #1117:
  File: backend/src/controllers/worker.assignment.controller.ts
  Line: 81
  Target: worker
  First occurrence: batch index 1098
    - source_expr: await workerAssignmentService.unassignWorker(
      accountId,
      workerId,
      facilityId,
    - in_function: WorkerAssignmentController./**
   * Unassign worker from facility
   */
  unassign
  Second occurrence: batch index 1117
    - source_expr: await workerAssignmentService.unassignWorker(
      accountId,
      workerId,
      facilityId,
    - in_function: WorkerAssignmentController./**
   * Unassign worker from facility
   */
  unassign

[DEBUG] DUPLICATE #1118:
  File: backend/src/controllers/worker.assignment.controller.ts
  Line: 94
  Target: { accountId, userId }
  First occurrence: batch index 1099
    - source_expr: this.getTenantContext(req)
    - in_function: WorkerAssignmentController./**
   * Transfer worker to different facility
   */
  transfer
  Second occurrence: batch index 1118
    - source_expr: this.getTenantContext(req)
    - in_function: WorkerAssignmentController./**
   * Transfer worker to different facility
   */
  transfer

[DEBUG] DUPLICATE #1119:
  File: backend/src/controllers/worker.assignment.controller.ts
  Line: 96
  Target: { workerId }
  First occurrence: batch index 1100
    - source_expr: req.params
    - in_function: WorkerAssignmentController./**
   * Transfer worker to different facility
   */
  transfer
  Second occurrence: batch index 1119
    - source_expr: req.params
    - in_function: WorkerAssignmentController./**
   * Transfer worker to different facility
   */
  transfer

[DEBUG] DUPLICATE #1120:
  File: backend/src/controllers/worker.assignment.controller.ts
  Line: 97
  Target: { fromFacilityId, toFacilityId }
  First occurrence: batch index 1101
    - source_expr: req.body
    - in_function: WorkerAssignmentController./**
   * Transfer worker to different facility
   */
  transfer
  Second occurrence: batch index 1120
    - source_expr: req.body
    - in_function: WorkerAssignmentController./**
   * Transfer worker to different facility
   */
  transfer

[DEBUG] DUPLICATE #1121:
  File: backend/src/controllers/worker.assignment.controller.ts
  Line: 99
  Target: worker
  First occurrence: batch index 1102
    - source_expr: await workerAssignmentService.transferWorker(
      accountId,
      workerId,
      fromFacility
    - in_function: WorkerAssignmentController./**
   * Transfer worker to different facility
   */
  transfer
  Second occurrence: batch index 1121
    - source_expr: await workerAssignmentService.transferWorker(
      accountId,
      workerId,
      fromFacility
    - in_function: WorkerAssignmentController./**
   * Transfer worker to different facility
   */
  transfer

[DEBUG] DUPLICATE #1122:
  File: backend/src/controllers/worker.assignment.controller.ts
  Line: 113
  Target: { accountId, userId }
  First occurrence: batch index 1103
    - source_expr: this.getTenantContext(req)
    - in_function: WorkerAssignmentController./**
   * Bulk assign workers to facility
   */
  bulkAssign
  Second occurrence: batch index 1122
    - source_expr: this.getTenantContext(req)
    - in_function: WorkerAssignmentController./**
   * Bulk assign workers to facility
   */
  bulkAssign

[DEBUG] DUPLICATE #1123:
  File: backend/src/controllers/worker.assignment.controller.ts
  Line: 115
  Target: { facilityId, workerIds }
  First occurrence: batch index 1104
    - source_expr: req.body
    - in_function: WorkerAssignmentController./**
   * Bulk assign workers to facility
   */
  bulkAssign
  Second occurrence: batch index 1123
    - source_expr: req.body
    - in_function: WorkerAssignmentController./**
   * Bulk assign workers to facility
   */
  bulkAssign

[DEBUG] DUPLICATE #1124:
  File: backend/src/controllers/worker.assignment.controller.ts
  Line: 117
  Target: workers
  First occurrence: batch index 1105
    - source_expr: await workerAssignmentService.bulkAssignToFacility(
      accountId,
      facilityId,
      work
    - in_function: WorkerAssignmentController./**
   * Bulk assign workers to facility
   */
  bulkAssign
  Second occurrence: batch index 1124
    - source_expr: await workerAssignmentService.bulkAssignToFacility(
      accountId,
      facilityId,
      work
    - in_function: WorkerAssignmentController./**
   * Bulk assign workers to facility
   */
  bulkAssign

[DEBUG] DUPLICATE #1139:
  File: backend/src/controllers/worker.controller.ts
  Line: 12
  Target: { accountId }
  First occurrence: batch index 1126
    - source_expr: this.getTenantContext(req)
    - in_function: WorkerController.list
  Second occurrence: batch index 1139
    - source_expr: this.getTenantContext(req)
    - in_function: WorkerController.list

[DEBUG] DUPLICATE #1140:
  File: backend/src/controllers/worker.controller.ts
  Line: 15
  Target: query
  First occurrence: batch index 1127
    - source_expr: validation.query.workerList.parse(req.query)
    - in_function: WorkerController.list
  Second occurrence: batch index 1140
    - source_expr: validation.query.workerList.parse(req.query)
    - in_function: WorkerController.list

[DEBUG] DUPLICATE #1141:
  File: backend/src/controllers/worker.controller.ts
  Line: 16
  Target: offset
  First occurrence: batch index 1128
    - source_expr: this.getOffset(query.page, query.limit)
    - in_function: WorkerController.list
  Second occurrence: batch index 1141
    - source_expr: this.getOffset(query.page, query.limit)
    - in_function: WorkerController.list

[DEBUG] DUPLICATE #1142:
  File: backend/src/controllers/worker.controller.ts
  Line: 18
  Target: result
  First occurrence: batch index 1129
    - source_expr: await workerService.findAll(accountId, {
      limit: query.limit,
      offset,
      order: [[q
    - in_function: WorkerController.list
  Second occurrence: batch index 1142
    - source_expr: await workerService.findAll(accountId, {
      limit: query.limit,
      offset,
      order: [[q
    - in_function: WorkerController.list

[DEBUG] DUPLICATE #1143:
  File: backend/src/controllers/worker.controller.ts
  Line: 24
  Target: meta
  First occurrence: batch index 1130
    - source_expr: this.getPaginationMeta(result.count, query.page, query.limit)
    - in_function: WorkerController.list
  Second occurrence: batch index 1143
    - source_expr: this.getPaginationMeta(result.count, query.page, query.limit)
    - in_function: WorkerController.list

[DEBUG] DUPLICATE #1144:
  File: backend/src/controllers/worker.controller.ts
  Line: 27
  Target: structuredData
  First occurrence: batch index 1131
    - source_expr: {
      rows: result.rows,
      total: result.count,
      page: query.page || 1,
      limit: 
    - in_function: WorkerController.list
  Second occurrence: batch index 1144
    - source_expr: {
      rows: result.rows,
      total: result.count,
      page: query.page || 1,
      limit: 
    - in_function: WorkerController.list

[DEBUG] DUPLICATE #1145:
  File: backend/src/controllers/worker.controller.ts
  Line: 38
  Target: { accountId }
  First occurrence: batch index 1132
    - source_expr: this.getTenantContext(req)
    - in_function: WorkerController.getById
  Second occurrence: batch index 1145
    - source_expr: this.getTenantContext(req)
    - in_function: WorkerController.getById

[DEBUG] DUPLICATE #1146:
  File: backend/src/controllers/worker.controller.ts
  Line: 39
  Target: entity
  First occurrence: batch index 1133
    - source_expr: await workerService.findById(accountId, req.params.id)
    - in_function: WorkerController.getById
  Second occurrence: batch index 1146
    - source_expr: await workerService.findById(accountId, req.params.id)
    - in_function: WorkerController.getById

[DEBUG] DUPLICATE #1147:
  File: backend/src/controllers/worker.controller.ts
  Line: 44
  Target: { accountId, userId }
  First occurrence: batch index 1134
    - source_expr: this.getTenantContext(req)
    - in_function: WorkerController.create
  Second occurrence: batch index 1147
    - source_expr: this.getTenantContext(req)
    - in_function: WorkerController.create

[DEBUG] DUPLICATE #1148:
  File: backend/src/controllers/worker.controller.ts
  Line: 45
  Target: entity
  First occurrence: batch index 1135
    - source_expr: await workerService.create(accountId, req.body, userId)
    - in_function: WorkerController.create
  Second occurrence: batch index 1148
    - source_expr: await workerService.create(accountId, req.body, userId)
    - in_function: WorkerController.create

[DEBUG] DUPLICATE #1149:
  File: backend/src/controllers/worker.controller.ts
  Line: 50
  Target: { accountId, userId }
  First occurrence: batch index 1136
    - source_expr: this.getTenantContext(req)
    - in_function: WorkerController.update
  Second occurrence: batch index 1149
    - source_expr: this.getTenantContext(req)
    - in_function: WorkerController.update

[DEBUG] DUPLICATE #1150:
  File: backend/src/controllers/worker.controller.ts
  Line: 51
  Target: entity
  First occurrence: batch index 1137
    - source_expr: await workerService.update(accountId, req.params.id, req.body, userId)
    - in_function: WorkerController.update
  Second occurrence: batch index 1150
    - source_expr: await workerService.update(accountId, req.params.id, req.body, userId)
    - in_function: WorkerController.update

[DEBUG] DUPLICATE #1151:
  File: backend/src/controllers/worker.controller.ts
  Line: 56
  Target: { accountId, userId }
  First occurrence: batch index 1138
    - source_expr: this.getTenantContext(req)
    - in_function: WorkerController.delete
  Second occurrence: batch index 1151
    - source_expr: this.getTenantContext(req)
    - in_function: WorkerController.delete

[DEBUG] DUPLICATE #1175:
  File: backend/src/controllers/zone.controller.ts
  Line: 17
  Target: { accountId }
  First occurrence: batch index 1154
    - source_expr: this.getTenantContext(req)
    - in_function: ZoneController./**
   * List zones
   */
  list
  Second occurrence: batch index 1175
    - source_expr: this.getTenantContext(req)
    - in_function: ZoneController./**
   * List zones
   */
  list

[DEBUG] DUPLICATE #1176:
  File: backend/src/controllers/zone.controller.ts
  Line: 20
  Target: query
  First occurrence: batch index 1155
    - source_expr: validation.query.zoneList.parse(req.query)
    - in_function: ZoneController./**
   * List zones
   */
  list
  Second occurrence: batch index 1176
    - source_expr: validation.query.zoneList.parse(req.query)
    - in_function: ZoneController./**
   * List zones
   */
  list

[DEBUG] DUPLICATE #1177:
  File: backend/src/controllers/zone.controller.ts
  Line: 21
  Target: offset
  First occurrence: batch index 1156
    - source_expr: this.getOffset(query.page, query.limit)
    - in_function: ZoneController./**
   * List zones
   */
  list
  Second occurrence: batch index 1177
    - source_expr: this.getOffset(query.page, query.limit)
    - in_function: ZoneController./**
   * List zones
   */
  list

[DEBUG] DUPLICATE #1178:
  File: backend/src/controllers/zone.controller.ts
  Line: 24
  Target: where: Record<string, unknown>
  First occurrence: batch index 1157
    - source_expr: {}
    - in_function: ZoneController./**
   * List zones
   */
  list
  Second occurrence: batch index 1178
    - source_expr: {}
    - in_function: ZoneController./**
   * List zones
   */
  list

[DEBUG] DUPLICATE #1179:
  File: backend/src/controllers/zone.controller.ts
  Line: 29
  Target: result
  First occurrence: batch index 1158
    - source_expr: await zoneService.findAll(accountId, {
      where,
      limit: query.limit,
      offset,
    
    - in_function: ZoneController./**
   * List zones
   */
  list
  Second occurrence: batch index 1179
    - source_expr: await zoneService.findAll(accountId, {
      where,
      limit: query.limit,
      offset,
    
    - in_function: ZoneController./**
   * List zones
   */
  list

[DEBUG] DUPLICATE #1180:
  File: backend/src/controllers/zone.controller.ts
  Line: 36
  Target: meta
  First occurrence: batch index 1159
    - source_expr: this.getPaginationMeta(result.count, query.page, query.limit)
    - in_function: ZoneController./**
   * List zones
   */
  list
  Second occurrence: batch index 1180
    - source_expr: this.getPaginationMeta(result.count, query.page, query.limit)
    - in_function: ZoneController./**
   * List zones
   */
  list

[DEBUG] DUPLICATE #1181:
  File: backend/src/controllers/zone.controller.ts
  Line: 44
  Target: { accountId }
  First occurrence: batch index 1160
    - source_expr: this.getTenantContext(req)
    - in_function: ZoneController./**
   * Get zone by ID
   */
  getById
  Second occurrence: batch index 1181
    - source_expr: this.getTenantContext(req)
    - in_function: ZoneController./**
   * Get zone by ID
   */
  getById

[DEBUG] DUPLICATE #1182:
  File: backend/src/controllers/zone.controller.ts
  Line: 45
  Target: zone
  First occurrence: batch index 1161
    - source_expr: await zoneService.findById(accountId, req.params.id)
    - in_function: ZoneController./**
   * Get zone by ID
   */
  getById
  Second occurrence: batch index 1182
    - source_expr: await zoneService.findById(accountId, req.params.id)
    - in_function: ZoneController./**
   * Get zone by ID
   */
  getById

[DEBUG] DUPLICATE #1183:
  File: backend/src/controllers/zone.controller.ts
  Line: 53
  Target: { accountId, userId }
  First occurrence: batch index 1162
    - source_expr: this.getTenantContext(req)
    - in_function: ZoneController./**
   * Create zone
   */
  create
  Second occurrence: batch index 1183
    - source_expr: this.getTenantContext(req)
    - in_function: ZoneController./**
   * Create zone
   */
  create

[DEBUG] DUPLICATE #1184:
  File: backend/src/controllers/zone.controller.ts
  Line: 54
  Target: zone
  First occurrence: batch index 1163
    - source_expr: await zoneService.create(
      accountId,
      req.body,
      userId!
    )
    - in_function: ZoneController./**
   * Create zone
   */
  create
  Second occurrence: batch index 1184
    - source_expr: await zoneService.create(
      accountId,
      req.body,
      userId!
    )
    - in_function: ZoneController./**
   * Create zone
   */
  create

[DEBUG] DUPLICATE #1185:
  File: backend/src/controllers/zone.controller.ts
  Line: 66
  Target: { accountId, userId }
  First occurrence: batch index 1164
    - source_expr: this.getTenantContext(req)
    - in_function: ZoneController./**
   * Update zone
   */
  update
  Second occurrence: batch index 1185
    - source_expr: this.getTenantContext(req)
    - in_function: ZoneController./**
   * Update zone
   */
  update

[DEBUG] DUPLICATE #1186:
  File: backend/src/controllers/zone.controller.ts
  Line: 67
  Target: zone
  First occurrence: batch index 1165
    - source_expr: await zoneService.update(
      accountId,
      req.params.id,
      req.body,
      userId!
 
    - in_function: ZoneController./**
   * Update zone
   */
  update
  Second occurrence: batch index 1186
    - source_expr: await zoneService.update(
      accountId,
      req.params.id,
      req.body,
      userId!
 
    - in_function: ZoneController./**
   * Update zone
   */
  update

[DEBUG] DUPLICATE #1187:
  File: backend/src/controllers/zone.controller.ts
  Line: 80
  Target: { accountId, userId }
  First occurrence: batch index 1166
    - source_expr: this.getTenantContext(req)
    - in_function: ZoneController./**
   * Delete zone (soft delete)
   */
  delete
  Second occurrence: batch index 1187
    - source_expr: this.getTenantContext(req)
    - in_function: ZoneController./**
   * Delete zone (soft delete)
   */
  delete

[DEBUG] DUPLICATE #1188:
  File: backend/src/controllers/zone.controller.ts
  Line: 93
  Target: { accountId }
  First occurrence: batch index 1167
    - source_expr: this.getTenantContext(req)
    - in_function: ZoneController./**
   * Get zone areas
   */
  getZoneAreas
  Second occurrence: batch index 1188
    - source_expr: this.getTenantContext(req)
    - in_function: ZoneController./**
   * Get zone areas
   */
  getZoneAreas

[DEBUG] DUPLICATE #1189:
  File: backend/src/controllers/zone.controller.ts
  Line: 96
  Target: query
  First occurrence: batch index 1168
    - source_expr: validation.params.pagination.parse(req.query)
    - in_function: ZoneController./**
   * Get zone areas
   */
  getZoneAreas
  Second occurrence: batch index 1189
    - source_expr: validation.params.pagination.parse(req.query)
    - in_function: ZoneController./**
   * Get zone areas
   */
  getZoneAreas

[DEBUG] DUPLICATE #1190:
  File: backend/src/controllers/zone.controller.ts
  Line: 97
  Target: offset
  First occurrence: batch index 1169
    - source_expr: this.getOffset(query.page, query.limit)
    - in_function: ZoneController./**
   * Get zone areas
   */
  getZoneAreas
  Second occurrence: batch index 1190
    - source_expr: this.getOffset(query.page, query.limit)
    - in_function: ZoneController./**
   * Get zone areas
   */
  getZoneAreas

[DEBUG] DUPLICATE #1191:
  File: backend/src/controllers/zone.controller.ts
  Line: 100
  Target: result
  First occurrence: batch index 1170
    - source_expr: await areaService.listAreas(accountId, {
      zone_id: req.params.id,
      limit: query.limit,

    - in_function: ZoneController./**
   * Get zone areas
   */
  getZoneAreas
  Second occurrence: batch index 1191
    - source_expr: await areaService.listAreas(accountId, {
      zone_id: req.params.id,
      limit: query.limit,

    - in_function: ZoneController./**
   * Get zone areas
   */
  getZoneAreas

[DEBUG] DUPLICATE #1192:
  File: backend/src/controllers/zone.controller.ts
  Line: 106
  Target: meta
  First occurrence: batch index 1171
    - source_expr: this.getPaginationMeta(result.total, query.page, query.limit)
    - in_function: ZoneController./**
   * Get zone areas
   */
  getZoneAreas
  Second occurrence: batch index 1192
    - source_expr: this.getPaginationMeta(result.total, query.page, query.limit)
    - in_function: ZoneController./**
   * Get zone areas
   */
  getZoneAreas

[DEBUG] DUPLICATE #1193:
  File: backend/src/controllers/zone.controller.ts
  Line: 114
  Target: { accountId, userId }
  First occurrence: batch index 1172
    - source_expr: this.getTenantContext(req)
    - in_function: ZoneController./**
   * Create area in zone
   */
  createArea
  Second occurrence: batch index 1193
    - source_expr: this.getTenantContext(req)
    - in_function: ZoneController./**
   * Create area in zone
   */
  createArea

[DEBUG] DUPLICATE #1194:
  File: backend/src/controllers/zone.controller.ts
  Line: 116
  Target: areaData
  First occurrence: batch index 1173
    - source_expr: {
      ...req.body,
      zone_id: req.params.id
    }
    - in_function: ZoneController./**
   * Create area in zone
   */
  createArea
  Second occurrence: batch index 1194
    - source_expr: {
      ...req.body,
      zone_id: req.params.id
    }
    - in_function: ZoneController./**
   * Create area in zone
   */
  createArea

[DEBUG] DUPLICATE #1195:
  File: backend/src/controllers/zone.controller.ts
  Line: 121
  Target: area
  First occurrence: batch index 1174
    - source_expr: await zoneService.createArea(
      accountId,
      areaData,
      userId!
    )
    - in_function: ZoneController./**
   * Create area in zone
   */
  createArea
  Second occurrence: batch index 1195
    - source_expr: await zoneService.createArea(
      accountId,
      areaData,
      userId!
    )
    - in_function: ZoneController./**
   * Create area in zone
   */
  createArea

[DEBUG] DUPLICATE #1425:
  File: backend/src/models/attachment.model.ts
  Line: 50
  Target: sizes
  First occurrence: batch index 1422
    - source_expr: ['Bytes', 'KB', 'MB', 'GB']
    - in_function: formattedSize
  Second occurrence: batch index 1425
    - source_expr: ['Bytes', 'KB', 'MB', 'GB']
    - in_function: formattedSize

[DEBUG] DUPLICATE #1426:
  File: backend/src/models/attachment.model.ts
  Line: 52
  Target: i
  First occurrence: batch index 1423
    - source_expr: Math.floor(Math.log(this.file_size) / Math.log(1024))
    - in_function: formattedSize
  Second occurrence: batch index 1426
    - source_expr: Math.floor(Math.log(this.file_size) / Math.log(1024))
    - in_function: formattedSize

[DEBUG] DUPLICATE #1427:
  File: backend/src/models/attachment.model.ts
  Line: 81
  Target: parts
  First occurrence: batch index 1424
    - source_expr: this.file_name.split('.')
    - in_function: extension
  Second occurrence: batch index 1427
    - source_expr: this.file_name.split('.')
    - in_function: extension

[DEBUG] DUPLICATE #1434:
  File: backend/src/models/base.model.ts
  Line: 33
  Target: baseAttributes: ModelAttributes<M>
  First occurrence: batch index 1433
    - source_expr: {
      id: {
        type: DataTypes.UUID,
        defaultValue: DataTypes.UUIDV4,
        prim
    - in_function: BaseModel.initBase
  Second occurrence: batch index 1434
    - source_expr: {
      id: {
        type: DataTypes.UUID,
        defaultValue: DataTypes.UUIDV4,
        prim
    - in_function: BaseModel.initBase

[DEBUG] DUPLICATE #1438:
  File: backend/src/models/base.model.ts
  Line: 114
  Target: tenantAttributes: ModelAttributes<M>
  First occurrence: batch index 1437
    - source_expr: {
      id: {
        type: DataTypes.UUID,
        defaultValue: DataTypes.UUIDV4,
        prim
    - in_function: TenantModel.initTenant
  Second occurrence: batch index 1438
    - source_expr: {
      id: {
        type: DataTypes.UUID,
        defaultValue: DataTypes.UUIDV4,
        prim
    - in_function: TenantModel.initTenant

[DEBUG] DUPLICATE #1445:
  File: backend/src/models/batch.model.ts
  Line: 92
  Target: now
  First occurrence: batch index 1439
    - source_expr: new Date()
    - in_function: Batch.generateBatchNumber
  Second occurrence: batch index 1445
    - source_expr: new Date()
    - in_function: Batch.generateBatchNumber

[DEBUG] DUPLICATE #1446:
  File: backend/src/models/batch.model.ts
  Line: 93
  Target: year
  First occurrence: batch index 1440
    - source_expr: now.getFullYear()
    - in_function: Batch.generateBatchNumber
  Second occurrence: batch index 1446
    - source_expr: now.getFullYear()
    - in_function: Batch.generateBatchNumber

[DEBUG] DUPLICATE #1447:
  File: backend/src/models/batch.model.ts
  Line: 94
  Target: month
  First occurrence: batch index 1441
    - source_expr: String(now.getMonth() + 1).padStart(2, '0')
    - in_function: Batch.generateBatchNumber
  Second occurrence: batch index 1447
    - source_expr: String(now.getMonth() + 1).padStart(2, '0')
    - in_function: Batch.generateBatchNumber

[DEBUG] DUPLICATE #1448:
  File: backend/src/models/batch.model.ts
  Line: 97
  Target: lastBatch
  First occurrence: batch index 1442
    - source_expr: await Batch.findOne({
      where: {
        account_id: accountId,
        batch_number: {
        
    - in_function: Batch.generateBatchNumber
  Second occurrence: batch index 1448
    - source_expr: await Batch.findOne({
      where: {
        account_id: accountId,
        batch_number: {
        
    - in_function: Batch.generateBatchNumber

[DEBUG] DUPLICATE #1449:
  File: backend/src/models/batch.model.ts
  Line: 107
  Target: sequence
  First occurrence: batch index 1443
    - source_expr: 1
    - in_function: Batch.generateBatchNumber
  Second occurrence: batch index 1449
    - source_expr: 1
    - in_function: Batch.generateBatchNumber

[DEBUG] DUPLICATE #1450:
  File: backend/src/models/batch.model.ts
  Line: 109
  Target: lastSequence
  First occurrence: batch index 1444
    - source_expr: parseInt(lastBatch.batch_number.split('-').pop() || '0')
    - in_function: Batch.generateBatchNumber
  Second occurrence: batch index 1450
    - source_expr: parseInt(lastBatch.batch_number.split('-').pop() || '0')
    - in_function: Batch.generateBatchNumber

[DEBUG] DUPLICATE #1452:
  File: backend/src/models/facility.model.ts
  Line: 32
  Target: words
  First occurrence: batch index 1451
    - source_expr: this.name.split(' ')
    - in_function: Facility.// Generate facility code for batch numbers (e.g., "NF" for Northern Farm)
  getFacilityCode
  Second occurrence: batch index 1452
    - source_expr: this.name.split(' ')
    - in_function: Facility.// Generate facility code for batch numbers (e.g., "NF" for Northern Farm)
  getFacilityCode

[DEBUG] DUPLICATE #1457:
  File: backend/src/models/location.model.ts
  Line: 46
  Target: Zone
  First occurrence: batch index 1455
    - source_expr: sequelize.models.Zone as typeof ZoneClass
    - in_function: Location.getActiveZoneCount
  Second occurrence: batch index 1457
    - source_expr: sequelize.models.Zone as typeof ZoneClass
    - in_function: Location.getActiveZoneCount

[DEBUG] DUPLICATE #1458:
  File: backend/src/models/location.model.ts
  Line: 56
  Target: result
  First occurrence: batch index 1456
    - source_expr: await sequelize.query<{ count: number }>(
      `SELECT COUNT(DISTINCT p.id) as count
       FROM 
    - in_function: Location.getTotalPlantCount
  Second occurrence: batch index 1458
    - source_expr: await sequelize.query<{ count: number }>(
      `SELECT COUNT(DISTINCT p.id) as count
       FROM 
    - in_function: Location.getTotalPlantCount

[DEBUG] DUPLICATE #1466:
  File: backend/src/models/qr.registry.model.ts
  Line: 50
  Target: prefix
  First occurrence: batch index 1459
    - source_expr: entityType.toUpperCase()
    - in_function: QRRegistry.generateQRCode
  Second occurrence: batch index 1466
    - source_expr: entityType.toUpperCase()
    - in_function: QRRegistry.generateQRCode

[DEBUG] DUPLICATE #1467:
  File: backend/src/models/qr.registry.model.ts
  Line: 51
  Target: randomBytes
  First occurrence: batch index 1460
    - source_expr: crypto.randomBytes(8).toString('hex').toUpperCase()
    - in_function: QRRegistry.generateQRCode
  Second occurrence: batch index 1467
    - source_expr: crypto.randomBytes(8).toString('hex').toUpperCase()
    - in_function: QRRegistry.generateQRCode

[DEBUG] DUPLICATE #1468:
  File: backend/src/models/qr.registry.model.ts
  Line: 84
  Target: existing
  First occurrence: batch index 1461
    - source_expr: await this.findByEntity(accountId, entityType, entityId)
    - in_function: QRRegistry.createForEntity
  Second occurrence: batch index 1468
    - source_expr: await this.findByEntity(accountId, entityType, entityId)
    - in_function: QRRegistry.createForEntity

[DEBUG] DUPLICATE #1469:
  File: backend/src/models/qr.registry.model.ts
  Line: 91
  Target: attempts
  First occurrence: batch index 1462
    - source_expr: 0
    - in_function: QRRegistry.createForEntity
  Second occurrence: batch index 1469
    - source_expr: 0
    - in_function: QRRegistry.createForEntity

[DEBUG] DUPLICATE #1470:
  File: backend/src/models/qr.registry.model.ts
  Line: 92
  Target: maxAttempts
  First occurrence: batch index 1463
    - source_expr: 10
    - in_function: QRRegistry.createForEntity
  Second occurrence: batch index 1470
    - source_expr: 10
    - in_function: QRRegistry.createForEntity

[DEBUG] DUPLICATE #1471:
  File: backend/src/models/qr.registry.model.ts
  Line: 98
  Target: exists
  First occurrence: batch index 1464
    - source_expr: await QRRegistry.findOne({
        where: { qr_code: qrCode }
      })
    - in_function: QRRegistry.createForEntity
  Second occurrence: batch index 1471
    - source_expr: await QRRegistry.findOne({
        where: { qr_code: qrCode }
      })
    - in_function: QRRegistry.createForEntity

[DEBUG] DUPLICATE #1472:
  File: backend/src/models/qr.registry.model.ts
  Line: 147
  Target: result
  First occurrence: batch index 1465
    - source_expr: await sequelize.query<{ count: number }>(
      `SELECT COUNT(*) as count
       FROM qr_registry
    - in_function: QRRegistry.existsInOtherAccount
  Second occurrence: batch index 1472
    - source_expr: await sequelize.query<{ count: number }>(
      `SELECT COUNT(*) as count
       FROM qr_registry
    - in_function: QRRegistry.existsInOtherAccount

[DEBUG] DUPLICATE #1480:
  File: backend/src/models/worker.model.ts
  Line: 46
  Target: account
  First occurrence: batch index 1475
    - source_expr: await Account.findOne({
      where: { id: accountId }
    })
    - in_function: Worker.generateWorkerCode
  Second occurrence: batch index 1480
    - source_expr: await Account.findOne({
      where: { id: accountId }
    })
    - in_function: Worker.generateWorkerCode

[DEBUG] DUPLICATE #1481:
  File: backend/src/models/worker.model.ts
  Line: 51
  Target: prefix
  First occurrence: batch index 1476
    - source_expr: account.get('worker_code_prefix') as string
    - in_function: Worker.generateWorkerCode
  Second occurrence: batch index 1481
    - source_expr: account.get('worker_code_prefix') as string
    - in_function: Worker.generateWorkerCode

[DEBUG] DUPLICATE #1482:
  File: backend/src/models/worker.model.ts
  Line: 54
  Target: lastWorker
  First occurrence: batch index 1477
    - source_expr: await Worker.findOne({
      where: {
        account_id: accountId,
        worker_code: {
    
    - in_function: Worker.generateWorkerCode
  Second occurrence: batch index 1482
    - source_expr: await Worker.findOne({
      where: {
        account_id: accountId,
        worker_code: {
    
    - in_function: Worker.generateWorkerCode

[DEBUG] DUPLICATE #1483:
  File: backend/src/models/worker.model.ts
  Line: 64
  Target: nextNumber
  First occurrence: batch index 1478
    - source_expr: 1
    - in_function: Worker.generateWorkerCode
  Second occurrence: batch index 1483
    - source_expr: 1
    - in_function: Worker.generateWorkerCode

[DEBUG] DUPLICATE #1484:
  File: backend/src/models/worker.model.ts
  Line: 66
  Target: match
  First occurrence: batch index 1479
    - source_expr: lastWorker.worker_code.match(/\d+$/)
    - in_function: Worker.generateWorkerCode
  Second occurrence: batch index 1484
    - source_expr: lastWorker.worker_code.match(/\d+$/)
    - in_function: Worker.generateWorkerCode

[DEBUG] DUPLICATE #1606:
  File: backend/src/services/account.service.ts
  Line: 34
  Target: cleaned
  First occurrence: batch index 1578
    - source_expr: companyName.replace(/[^A-Z0-9]/gi, '')
    - in_function: AccountService.generateWorkerPrefix
  Second occurrence: batch index 1606
    - source_expr: companyName.replace(/[^A-Z0-9]/gi, '')
    - in_function: AccountService.generateWorkerPrefix

[DEBUG] DUPLICATE #1607:
  File: backend/src/services/account.service.ts
  Line: 37
  Target: prefix
  First occurrence: batch index 1579
    - source_expr: cleaned.substring(0, 4).toUpperCase()
    - in_function: AccountService.generateWorkerPrefix
  Second occurrence: batch index 1607
    - source_expr: cleaned.substring(0, 4).toUpperCase()
    - in_function: AccountService.generateWorkerPrefix

[DEBUG] DUPLICATE #1608:
  File: backend/src/services/account.service.ts
  Line: 54
  Target: transaction
  First occurrence: batch index 1580
    - source_expr: await sequelize.transaction()
    - in_function: AccountService.createAccount
  Second occurrence: batch index 1608
    - source_expr: await sequelize.transaction()
    - in_function: AccountService.createAccount

[DEBUG] DUPLICATE #1609:
  File: backend/src/services/account.service.ts
  Line: 58
  Target: workerPrefix
  First occurrence: batch index 1581
    - source_expr: data.worker_code_prefix ||
        this.generateWorkerPrefix(data.company_name)
    - in_function: AccountService.createAccount
  Second occurrence: batch index 1609
    - source_expr: data.worker_code_prefix ||
        this.generateWorkerPrefix(data.company_name)
    - in_function: AccountService.createAccount

[DEBUG] DUPLICATE #1610:
  File: backend/src/services/account.service.ts
  Line: 62
  Target: existingPrefix
  First occurrence: batch index 1582
    - source_expr: await Account.findOne({
        where: { worker_code_prefix: workerPrefix },
        transaction
   
    - in_function: AccountService.createAccount
  Second occurrence: batch index 1610
    - source_expr: await Account.findOne({
        where: { worker_code_prefix: workerPrefix },
        transaction
   
    - in_function: AccountService.createAccount

[DEBUG] DUPLICATE #1611:
  File: backend/src/services/account.service.ts
  Line: 67
  Target: finalWorkerPrefix
  First occurrence: batch index 1583
    - source_expr: workerPrefix
    - in_function: AccountService.createAccount
  Second occurrence: batch index 1611
    - source_expr: workerPrefix
    - in_function: AccountService.createAccount

[DEBUG] DUPLICATE #1612:
  File: backend/src/services/account.service.ts
  Line: 70
  Target: counter
  First occurrence: batch index 1584
    - source_expr: 1
    - in_function: AccountService.createAccount
  Second occurrence: batch index 1612
    - source_expr: 1
    - in_function: AccountService.createAccount

[DEBUG] DUPLICATE #1613:
  File: backend/src/services/account.service.ts
  Line: 71
  Target: uniquePrefix
  First occurrence: batch index 1585
    - source_expr: workerPrefix
    - in_function: AccountService.createAccount
  Second occurrence: batch index 1613
    - source_expr: workerPrefix
    - in_function: AccountService.createAccount

[DEBUG] DUPLICATE #1614:
  File: backend/src/services/account.service.ts
  Line: 75
  Target: exists
  First occurrence: batch index 1586
    - source_expr: await Account.findOne({
            where: { worker_code_prefix: uniquePrefix },
            transac
    - in_function: AccountService.createAccount
  Second occurrence: batch index 1614
    - source_expr: await Account.findOne({
            where: { worker_code_prefix: uniquePrefix },
            transac
    - in_function: AccountService.createAccount

[DEBUG] DUPLICATE #1615:
  File: backend/src/services/account.service.ts
  Line: 93
  Target: account
  First occurrence: batch index 1587
    - source_expr: await Account.create({
        company_name: data.company_name,
        subscription_tier: data.subs
    - in_function: AccountService.createAccount
  Second occurrence: batch index 1615
    - source_expr: await Account.create({
        company_name: data.company_name,
        subscription_tier: data.subs
    - in_function: AccountService.createAccount

[DEBUG] DUPLICATE #1616:
  File: backend/src/services/account.service.ts
  Line: 111
  Target: account
  First occurrence: batch index 1588
    - source_expr: await Account.findOne({
      where: { id: accountId },
      include: [
        {
          model: 
    - in_function: AccountService.getAccount
  Second occurrence: batch index 1616
    - source_expr: await Account.findOne({
      where: { id: accountId },
      include: [
        {
          model: 
    - in_function: AccountService.getAccount

[DEBUG] DUPLICATE #1617:
  File: backend/src/services/account.service.ts
  Line: 139
  Target: transaction
  First occurrence: batch index 1589
    - source_expr: await sequelize.transaction()
    - in_function: AccountService.updateAccount
  Second occurrence: batch index 1617
    - source_expr: await sequelize.transaction()
    - in_function: AccountService.updateAccount

[DEBUG] DUPLICATE #1618:
  File: backend/src/services/account.service.ts
  Line: 142
  Target: account
  First occurrence: batch index 1590
    - source_expr: await Account.findOne({
        where: { id: accountId },
        transaction
      })
    - in_function: AccountService.updateAccount
  Second occurrence: batch index 1618
    - source_expr: await Account.findOne({
        where: { id: accountId },
        transaction
      })
    - in_function: AccountService.updateAccount

[DEBUG] DUPLICATE #1619:
  File: backend/src/services/account.service.ts
  Line: 153
  Target: existing
  First occurrence: batch index 1591
    - source_expr: await Account.findOne({
          where: { worker_code_prefix: data.worker_code_prefix },
          
    - in_function: AccountService.updateAccount
  Second occurrence: batch index 1619
    - source_expr: await Account.findOne({
          where: { worker_code_prefix: data.worker_code_prefix },
          
    - in_function: AccountService.updateAccount

[DEBUG] DUPLICATE #1620:
  File: backend/src/services/account.service.ts
  Line: 184
  Target: whereClause: WhereOptions<AccountAttributes>
  First occurrence: batch index 1592
    - source_expr: {}
    - in_function: AccountService.listAccounts
  Second occurrence: batch index 1620
    - source_expr: {}
    - in_function: AccountService.listAccounts

[DEBUG] DUPLICATE #1621:
  File: backend/src/services/account.service.ts
  Line: 194
  Target: { count, rows }
  First occurrence: batch index 1593
    - source_expr: await Account.findAndCountAll({
      where: whereClause,
      limit: filters?.limit || 50,
      o
    - in_function: AccountService.listAccounts
  Second occurrence: batch index 1621
    - source_expr: await Account.findAndCountAll({
      where: whereClause,
      limit: filters?.limit || 50,
      o
    - in_function: AccountService.listAccounts

[DEBUG] DUPLICATE #1622:
  File: backend/src/services/account.service.ts
  Line: 208
  Target: account
  First occurrence: batch index 1594
    - source_expr: await Account.findOne({
      where: { id: accountId }
    })
    - in_function: AccountService.getAccountStats
  Second occurrence: batch index 1622
    - source_expr: await Account.findOne({
      where: { id: accountId }
    })
    - in_function: AccountService.getAccountStats

[DEBUG] DUPLICATE #1623:
  File: backend/src/services/account.service.ts
  Line: 217
  Target: [
      userCount,
      facilityCount,
      batchCount,
      plantCount,
      operationCount
    ]
  First occurrence: batch index 1595
    - source_expr: await Promise.all([
      User.count({ where: { account_id: accountId } }),
      sequelize.query<{ 
    - in_function: AccountService.getAccountStats
  Second occurrence: batch index 1623
    - source_expr: await Promise.all([
      User.count({ where: { account_id: accountId } }),
      sequelize.query<{ 
    - in_function: AccountService.getAccountStats

[DEBUG] DUPLICATE #1624:
  File: backend/src/services/account.service.ts
  Line: 262
  Target: account
  First occurrence: batch index 1596
    - source_expr: await Account.findOne({
      where: { id: accountId }
    })
    - in_function: AccountService.upgradeSubscription
  Second occurrence: batch index 1624
    - source_expr: await Account.findOne({
      where: { id: accountId }
    })
    - in_function: AccountService.upgradeSubscription

[DEBUG] DUPLICATE #1625:
  File: backend/src/services/account.service.ts
  Line: 270
  Target: tiers
  First occurrence: batch index 1597
    - source_expr: ['basic', 'professional', 'enterprise']
    - in_function: AccountService.upgradeSubscription
  Second occurrence: batch index 1625
    - source_expr: ['basic', 'professional', 'enterprise']
    - in_function: AccountService.upgradeSubscription

[DEBUG] DUPLICATE #1626:
  File: backend/src/services/account.service.ts
  Line: 271
  Target: currentIndex
  First occurrence: batch index 1598
    - source_expr: tiers.indexOf(account.subscription_tier)
    - in_function: AccountService.upgradeSubscription
  Second occurrence: batch index 1626
    - source_expr: tiers.indexOf(account.subscription_tier)
    - in_function: AccountService.upgradeSubscription

[DEBUG] DUPLICATE #1627:
  File: backend/src/services/account.service.ts
  Line: 272
  Target: newIndex
  First occurrence: batch index 1599
    - source_expr: tiers.indexOf(newTier)
    - in_function: AccountService.upgradeSubscription
  Second occurrence: batch index 1627
    - source_expr: tiers.indexOf(newTier)
    - in_function: AccountService.upgradeSubscription

[DEBUG] DUPLICATE #1628:
  File: backend/src/services/account.service.ts
  Line: 291
  Target: account
  First occurrence: batch index 1600
    - source_expr: await Account.findOne({
      where: { id: accountId }
    })
    - in_function: AccountService.checkLimits
  Second occurrence: batch index 1628
    - source_expr: await Account.findOne({
      where: { id: accountId }
    })
    - in_function: AccountService.checkLimits

[DEBUG] DUPLICATE #1629:
  File: backend/src/services/account.service.ts
  Line: 300
  Target: limits
  First occurrence: batch index 1601
    - source_expr: {
      basic: {
        users: 10,
        facilities: 1,
        batches: 100,
        plants: 100
    - in_function: AccountService.checkLimits
  Second occurrence: batch index 1629
    - source_expr: {
      basic: {
        users: 10,
        facilities: 1,
        batches: 100,
        plants: 100
    - in_function: AccountService.checkLimits

[DEBUG] DUPLICATE #1630:
  File: backend/src/services/account.service.ts
  Line: 321
  Target: tierLimits
  First occurrence: batch index 1602
    - source_expr: limits[account.subscription_tier as keyof typeof limits]
    - in_function: AccountService.checkLimits
  Second occurrence: batch index 1630
    - source_expr: limits[account.subscription_tier as keyof typeof limits]
    - in_function: AccountService.checkLimits

[DEBUG] DUPLICATE #1631:
  File: backend/src/services/account.service.ts
  Line: 324
  Target: usage
  First occurrence: batch index 1603
    - source_expr: {
      users: await User.count({ where: { account_id: accountId } }),
      facilities: (await sequ
    - in_function: AccountService.checkLimits
  Second occurrence: batch index 1631
    - source_expr: {
      users: await User.count({ where: { account_id: accountId } }),
      facilities: (await sequ
    - in_function: AccountService.checkLimits

[DEBUG] DUPLICATE #1632:
  File: backend/src/services/account.service.ts
  Line: 341
  Target: withinLimits
  First occurrence: batch index 1604
    - source_expr: true
    - in_function: AccountService.checkLimits
  Second occurrence: batch index 1632
    - source_expr: true
    - in_function: AccountService.checkLimits

[DEBUG] DUPLICATE #1633:
  File: backend/src/services/account.service.ts
  Line: 360
  Target: account
  First occurrence: batch index 1605
    - source_expr: await Account.findOne({
      where: { id: accountId }
    })
    - in_function: AccountService.deleteAccount
  Second occurrence: batch index 1633
    - source_expr: await Account.findOne({
      where: { id: accountId }
    })
    - in_function: AccountService.deleteAccount

[DEBUG] DUPLICATE #1661:
  File: backend/src/services/area.service.ts
  Line: 34
  Target: zone
  First occurrence: batch index 1635
    - source_expr: await Zone.findOne({
      where: {
        id: data.zone_id,
        account_id: accountId
      },
    - in_function: AreaService.beforeCreate
  Second occurrence: batch index 1661
    - source_expr: await Zone.findOne({
      where: {
        id: data.zone_id,
        account_id: accountId
      },
    - in_function: AreaService.beforeCreate

[DEBUG] DUPLICATE #1662:
  File: backend/src/services/area.service.ts
  Line: 47
  Target: existing
  First occurrence: batch index 1636
    - source_expr: await Area.findOne({
      where: {
        account_id: accountId,
        zone_id: data.zone_id,
  
    - in_function: AreaService.beforeCreate
  Second occurrence: batch index 1662
    - source_expr: await Area.findOne({
      where: {
        account_id: accountId,
        zone_id: data.zone_id,
  
    - in_function: AreaService.beforeCreate

[DEBUG] DUPLICATE #1663:
  File: backend/src/services/area.service.ts
  Line: 139
  Target: whereClause: WhereOptions<AreaAttributes>
  First occurrence: batch index 1637
    - source_expr: {}
    - in_function: AreaService.listAreas
  Second occurrence: batch index 1663
    - source_expr: {}
    - in_function: AreaService.listAreas

[DEBUG] DUPLICATE #1664:
  File: backend/src/services/area.service.ts
  Line: 144
  Target: result
  First occurrence: batch index 1638
    - source_expr: await this.findAll(accountId, {
      where: whereClause,
      limit: filters?.limit || 50,
      o
    - in_function: AreaService.listAreas
  Second occurrence: batch index 1664
    - source_expr: await this.findAll(accountId, {
      where: whereClause,
      limit: filters?.limit || 50,
      o
    - in_function: AreaService.listAreas

[DEBUG] DUPLICATE #1665:
  File: backend/src/services/area.service.ts
  Line: 193
  Target: area
  First occurrence: batch index 1639
    - source_expr: await this.findById(accountId, areaId)
    - in_function: AreaService.updatePlantCount
  Second occurrence: batch index 1665
    - source_expr: await this.findById(accountId, areaId)
    - in_function: AreaService.updatePlantCount

[DEBUG] DUPLICATE #1666:
  File: backend/src/services/area.service.ts
  Line: 195
  Target: newCount
  First occurrence: batch index 1640
    - source_expr: area.current_plant_count + delta
    - in_function: AreaService.updatePlantCount
  Second occurrence: batch index 1666
    - source_expr: area.current_plant_count + delta
    - in_function: AreaService.updatePlantCount

[DEBUG] DUPLICATE #1667:
  File: backend/src/services/area.service.ts
  Line: 228
  Target: area
  First occurrence: batch index 1641
    - source_expr: await this.findById(accountId, areaId, { transaction })
    - in_function: AreaService.addPartition
  Second occurrence: batch index 1667
    - source_expr: await this.findById(accountId, areaId, { transaction })
    - in_function: AreaService.addPartition

[DEBUG] DUPLICATE #1668:
  File: backend/src/services/area.service.ts
  Line: 251
  Target: batch
  First occurrence: batch index 1642
    - source_expr: await Batch.findOne({
      where: {
        id: partition.batch_id,
        account_id: accountId
 
    - in_function: AreaService.addPartition
  Second occurrence: batch index 1668
    - source_expr: await Batch.findOne({
      where: {
        id: partition.batch_id,
        account_id: accountId
 
    - in_function: AreaService.addPartition

[DEBUG] DUPLICATE #1669:
  File: backend/src/services/area.service.ts
  Line: 268
  Target: newPartition: AreaPartition
  First occurrence: batch index 1643
    - source_expr: {
      batch_id: batch.id,
      genetics_id: batch.genetics_id || undefined,
      strain_name: ba
    - in_function: AreaService.addPartition
  Second occurrence: batch index 1669
    - source_expr: {
      batch_id: batch.id,
      genetics_id: batch.genetics_id || undefined,
      strain_name: ba
    - in_function: AreaService.addPartition

[DEBUG] DUPLICATE #1670:
  File: backend/src/services/area.service.ts
  Line: 282
  Target: updatedPartitions
  First occurrence: batch index 1644
    - source_expr: [...(area.partitions || []), newPartition]
    - in_function: AreaService.addPartition
  Second occurrence: batch index 1670
    - source_expr: [...(area.partitions || []), newPartition]
    - in_function: AreaService.addPartition

[DEBUG] DUPLICATE #1671:
  File: backend/src/services/area.service.ts
  Line: 314
  Target: area
  First occurrence: batch index 1645
    - source_expr: await this.findById(accountId, areaId, { transaction })
    - in_function: AreaService.removePartition
  Second occurrence: batch index 1671
    - source_expr: await this.findById(accountId, areaId, { transaction })
    - in_function: AreaService.removePartition

[DEBUG] DUPLICATE #1672:
  File: backend/src/services/area.service.ts
  Line: 316
  Target: partitionIndex
  First occurrence: batch index 1646
    - source_expr: (area.partitions || []).findIndex(p => p.batch_id === batchId)
    - in_function: AreaService.removePartition
  Second occurrence: batch index 1672
    - source_expr: (area.partitions || []).findIndex(p => p.batch_id === batchId)
    - in_function: AreaService.removePartition

[DEBUG] DUPLICATE #1673:
  File: backend/src/services/area.service.ts
  Line: 321
  Target: updatedPartitions
  First occurrence: batch index 1647
    - source_expr: (area.partitions || []).filter(p => p.batch_id !== batchId)
    - in_function: AreaService.removePartition
  Second occurrence: batch index 1673
    - source_expr: (area.partitions || []).filter(p => p.batch_id !== batchId)
    - in_function: AreaService.removePartition

[DEBUG] DUPLICATE #1674:
  File: backend/src/services/area.service.ts
  Line: 355
  Target: area
  First occurrence: batch index 1648
    - source_expr: await this.findById(accountId, areaId, { transaction })
    - in_function: AreaService.updatePartitionPositions
  Second occurrence: batch index 1674
    - source_expr: await this.findById(accountId, areaId, { transaction })
    - in_function: AreaService.updatePartitionPositions

[DEBUG] DUPLICATE #1675:
  File: backend/src/services/area.service.ts
  Line: 357
  Target: partitionIndex
  First occurrence: batch index 1649
    - source_expr: (area.partitions || []).findIndex(p => p.batch_id === batchId)
    - in_function: AreaService.updatePartitionPositions
  Second occurrence: batch index 1675
    - source_expr: (area.partitions || []).findIndex(p => p.batch_id === batchId)
    - in_function: AreaService.updatePartitionPositions

[DEBUG] DUPLICATE #1676:
  File: backend/src/services/area.service.ts
  Line: 375
  Target: otherPartitions
  First occurrence: batch index 1650
    - source_expr: (area.partitions || []).filter(p => p.batch_id !== batchId)
    - in_function: AreaService.updatePartitionPositions
  Second occurrence: batch index 1676
    - source_expr: (area.partitions || []).filter(p => p.batch_id !== batchId)
    - in_function: AreaService.updatePartitionPositions

[DEBUG] DUPLICATE #1677:
  File: backend/src/services/area.service.ts
  Line: 379
  Target: updatedPartitions
  First occurrence: batch index 1651
    - source_expr: [...(area.partitions || [])]
    - in_function: AreaService.updatePartitionPositions
  Second occurrence: batch index 1677
    - source_expr: [...(area.partitions || [])]
    - in_function: AreaService.updatePartitionPositions

[DEBUG] DUPLICATE #1678:
  File: backend/src/services/area.service.ts
  Line: 414
  Target: area
  First occurrence: batch index 1652
    - source_expr: await this.findById(accountId, areaId)
    - in_function: AreaService.getAreaOccupancy
  Second occurrence: batch index 1678
    - source_expr: await this.findById(accountId, areaId)
    - in_function: AreaService.getAreaOccupancy

[DEBUG] DUPLICATE #1679:
  File: backend/src/services/area.service.ts
  Line: 416
  Target: capacity
  First occurrence: batch index 1653
    - source_expr: area.capacity || 100
    - in_function: AreaService.getAreaOccupancy
  Second occurrence: batch index 1679
    - source_expr: area.capacity || 100
    - in_function: AreaService.getAreaOccupancy

[DEBUG] DUPLICATE #1680:
  File: backend/src/services/area.service.ts
  Line: 417
  Target: occupancyMap: (AreaPartition | null)[]
  First occurrence: batch index 1654
    - source_expr: new Array(capacity).fill(null) as (AreaPartition | null)[]
    - in_function: AreaService.getAreaOccupancy
  Second occurrence: batch index 1680
    - source_expr: new Array(capacity).fill(null) as (AreaPartition | null)[]
    - in_function: AreaService.getAreaOccupancy

[DEBUG] DUPLICATE #1681:
  File: backend/src/services/area.service.ts
  Line: 421
  Target: i
  First occurrence: batch index 1655
    - source_expr: partition.start_position - 1
    - in_function: AreaService.getAreaOccupancy
  Second occurrence: batch index 1681
    - source_expr: partition.start_position - 1
    - in_function: AreaService.getAreaOccupancy

[DEBUG] DUPLICATE #1682:
  File: backend/src/services/area.service.ts
  Line: 426
  Target: used
  First occurrence: batch index 1656
    - source_expr: area.current_plant_count || 0
    - in_function: AreaService.getAreaOccupancy
  Second occurrence: batch index 1682
    - source_expr: area.current_plant_count || 0
    - in_function: AreaService.getAreaOccupancy

[DEBUG] DUPLICATE #1683:
  File: backend/src/services/area.service.ts
  Line: 447
  Target: areas
  First occurrence: batch index 1657
    - source_expr: await Area.findAll({
      where: {
        account_id: accountId,
        [Op.and]: [
          Seq
    - in_function: AreaService.getAreasByBatch
  Second occurrence: batch index 1683
    - source_expr: await Area.findAll({
      where: {
        account_id: accountId,
        [Op.and]: [
          Seq
    - in_function: AreaService.getAreasByBatch

[DEBUG] DUPLICATE #1684:
  File: backend/src/services/area.service.ts
  Line: 467
  Target: hasOverlap
  First occurrence: batch index 1658
    - source_expr: partitions.some(partition => {
      return (
        (start >= partition.start_position && start <=
    - in_function: AreaService.validatePartitionOverlap
  Second occurrence: batch index 1684
    - source_expr: partitions.some(partition => {
      return (
        (start >= partition.start_position && start <=
    - in_function: AreaService.validatePartitionOverlap

[DEBUG] DUPLICATE #1685:
  File: backend/src/services/area.service.ts
  Line: 493
  Target: colors
  First occurrence: batch index 1659
    - source_expr: [
      '#9333EA', // Purple
      '#22C55E', // Green
      '#3B82F6', // Blue
      '#F97316', // 
    - in_function: AreaService.generateStrainColor
  Second occurrence: batch index 1685
    - source_expr: [
      '#9333EA', // Purple
      '#22C55E', // Green
      '#3B82F6', // Blue
      '#F97316', // 
    - in_function: AreaService.generateStrainColor

[DEBUG] DUPLICATE #1686:
  File: backend/src/services/area.service.ts
  Line: 505
  Target: hash
  First occurrence: batch index 1660
    - source_expr: geneticsId.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0)
    - in_function: AreaService.generateStrainColor
  Second occurrence: batch index 1686
    - source_expr: geneticsId.split('').reduce((acc, char) => acc + char.charCodeAt(0), 0)
    - in_function: AreaService.generateStrainColor

[DEBUG] DUPLICATE #1715:
  File: backend/src/services/attachment.service.ts
  Line: 56
  Target: tx
  First occurrence: batch index 1687
    - source_expr: options?.transaction || transaction
    - in_function: AttachmentService.uploadFile
  Second occurrence: batch index 1715
    - source_expr: options?.transaction || transaction
    - in_function: AttachmentService.uploadFile

[DEBUG] DUPLICATE #1716:
  File: backend/src/services/attachment.service.ts
  Line: 66
  Target: thumbnailData: Buffer | null
  First occurrence: batch index 1688
    - source_expr: null
    - in_function: AttachmentService.uploadFile
  Second occurrence: batch index 1716
    - source_expr: null
    - in_function: AttachmentService.uploadFile

[DEBUG] DUPLICATE #1717:
  File: backend/src/services/attachment.service.ts
  Line: 72
  Target: checksum
  First occurrence: batch index 1689
    - source_expr: cryptoService.generateChecksum(fileData.buffer)
    - in_function: AttachmentService.uploadFile
  Second occurrence: batch index 1717
    - source_expr: cryptoService.generateChecksum(fileData.buffer)
    - in_function: AttachmentService.uploadFile

[DEBUG] DUPLICATE #1718:
  File: backend/src/services/attachment.service.ts
  Line: 75
  Target: encrypted
  First occurrence: batch index 1690
    - source_expr: cryptoService.encryptFile(fileData.buffer)
    - in_function: AttachmentService.uploadFile
  Second occurrence: batch index 1718
    - source_expr: cryptoService.encryptFile(fileData.buffer)
    - in_function: AttachmentService.uploadFile

[DEBUG] DUPLICATE #1719:
  File: backend/src/services/attachment.service.ts
  Line: 78
  Target: attachment
  First occurrence: batch index 1691
    - source_expr: await Attachment.create({
          account_id: accountId,
          entity_type: fileData.entityTyp
    - in_function: AttachmentService.uploadFile
  Second occurrence: batch index 1719
    - source_expr: await Attachment.create({
          account_id: accountId,
          entity_type: fileData.entityTyp
    - in_function: AttachmentService.uploadFile

[DEBUG] DUPLICATE #1720:
  File: backend/src/services/attachment.service.ts
  Line: 136
  Target: tx
  First occurrence: batch index 1692
    - source_expr: options?.transaction || transaction
    - in_function: AttachmentService.downloadFile
  Second occurrence: batch index 1720
    - source_expr: options?.transaction || transaction
    - in_function: AttachmentService.downloadFile

[DEBUG] DUPLICATE #1721:
  File: backend/src/services/attachment.service.ts
  Line: 138
  Target: attachment
  First occurrence: batch index 1693
    - source_expr: await Attachment.findOne({
        where: {
          id: attachmentId,
          account_id: accoun
    - in_function: AttachmentService.downloadFile
  Second occurrence: batch index 1721
    - source_expr: await Attachment.findOne({
        where: {
          id: attachmentId,
          account_id: accoun
    - in_function: AttachmentService.downloadFile

[DEBUG] DUPLICATE #1722:
  File: backend/src/services/attachment.service.ts
  Line: 153
  Target: decrypted
  First occurrence: batch index 1694
    - source_expr: cryptoService.decryptFile(
          attachment.file_data,
          attachment.encryption_iv,
     
    - in_function: AttachmentService.downloadFile
  Second occurrence: batch index 1722
    - source_expr: cryptoService.decryptFile(
          attachment.file_data,
          attachment.encryption_iv,
     
    - in_function: AttachmentService.downloadFile

[DEBUG] DUPLICATE #1723:
  File: backend/src/services/attachment.service.ts
  Line: 160
  Target: checksum
  First occurrence: batch index 1695
    - source_expr: cryptoService.generateChecksum(decrypted)
    - in_function: AttachmentService.downloadFile
  Second occurrence: batch index 1723
    - source_expr: cryptoService.generateChecksum(decrypted)
    - in_function: AttachmentService.downloadFile

[DEBUG] DUPLICATE #1724:
  File: backend/src/services/attachment.service.ts
  Line: 199
  Target: tx
  First occurrence: batch index 1696
    - source_expr: options?.transaction || transaction
    - in_function: AttachmentService.getThumbnail
  Second occurrence: batch index 1724
    - source_expr: options?.transaction || transaction
    - in_function: AttachmentService.getThumbnail

[DEBUG] DUPLICATE #1725:
  File: backend/src/services/attachment.service.ts
  Line: 201
  Target: attachment
  First occurrence: batch index 1697
    - source_expr: await Attachment.findOne({
        where: {
          id: attachmentId,
          account_id: accoun
    - in_function: AttachmentService.getThumbnail
  Second occurrence: batch index 1725
    - source_expr: await Attachment.findOne({
        where: {
          id: attachmentId,
          account_id: accoun
    - in_function: AttachmentService.getThumbnail

[DEBUG] DUPLICATE #1726:
  File: backend/src/services/attachment.service.ts
  Line: 233
  Target: tx
  First occurrence: batch index 1698
    - source_expr: options?.transaction || transaction
    - in_function: AttachmentService.findByEntity
  Second occurrence: batch index 1726
    - source_expr: options?.transaction || transaction
    - in_function: AttachmentService.findByEntity

[DEBUG] DUPLICATE #1727:
  File: backend/src/services/attachment.service.ts
  Line: 235
  Target: attachments
  First occurrence: batch index 1699
    - source_expr: await Attachment.findAll({
        where: {
          account_id: accountId,
          entity_type: 
    - in_function: AttachmentService.findByEntity
  Second occurrence: batch index 1727
    - source_expr: await Attachment.findAll({
        where: {
          account_id: accountId,
          entity_type: 
    - in_function: AttachmentService.findByEntity

[DEBUG] DUPLICATE #1728:
  File: backend/src/services/attachment.service.ts
  Line: 260
  Target: tx
  First occurrence: batch index 1700
    - source_expr: options?.transaction || transaction
    - in_function: AttachmentService.deleteAttachment
  Second occurrence: batch index 1728
    - source_expr: options?.transaction || transaction
    - in_function: AttachmentService.deleteAttachment

[DEBUG] DUPLICATE #1729:
  File: backend/src/services/attachment.service.ts
  Line: 262
  Target: attachment
  First occurrence: batch index 1701
    - source_expr: await this.findById(accountId, attachmentId, { transaction: tx })
    - in_function: AttachmentService.deleteAttachment
  Second occurrence: batch index 1729
    - source_expr: await this.findById(accountId, attachmentId, { transaction: tx })
    - in_function: AttachmentService.deleteAttachment

[DEBUG] DUPLICATE #1730:
  File: backend/src/services/attachment.service.ts
  Line: 264
  Target: oldData
  First occurrence: batch index 1702
    - source_expr: attachment.toJSON()
    - in_function: AttachmentService.deleteAttachment
  Second occurrence: batch index 1730
    - source_expr: attachment.toJSON()
    - in_function: AttachmentService.deleteAttachment

[DEBUG] DUPLICATE #1731:
  File: backend/src/services/attachment.service.ts
  Line: 296
  Target: limits: Record<string, number>
  First occurrence: batch index 1703
    - source_expr: {
      'image/jpeg': 10 * 1024 * 1024,     // 10MB
      'image/png': 10 * 1024 * 1024,      // 10M
    - in_function: AttachmentService.validateFile
  Second occurrence: batch index 1731
    - source_expr: {
      'image/jpeg': 10 * 1024 * 1024,     // 10MB
      'image/png': 10 * 1024 * 1024,      // 10M
    - in_function: AttachmentService.validateFile

[DEBUG] DUPLICATE #1732:
  File: backend/src/services/attachment.service.ts
  Line: 307
  Target: maxSize
  First occurrence: batch index 1704
    - source_expr: limits[fileData.mimeType]
    - in_function: AttachmentService.validateFile
  Second occurrence: batch index 1732
    - source_expr: limits[fileData.mimeType]
    - in_function: AttachmentService.validateFile

[DEBUG] DUPLICATE #1733:
  File: backend/src/services/attachment.service.ts
  Line: 313
  Target: maxSizeMB
  First occurrence: batch index 1705
    - source_expr: Math.round(maxSize / 1024 / 1024)
    - in_function: AttachmentService.validateFile
  Second occurrence: batch index 1733
    - source_expr: Math.round(maxSize / 1024 / 1024)
    - in_function: AttachmentService.validateFile

[DEBUG] DUPLICATE #1734:
  File: backend/src/services/attachment.service.ts
  Line: 333
  Target: magicBytes: Record<string, string[]>
  First occurrence: batch index 1706
    - source_expr: {
      'image/jpeg': ['ffd8ffe0', 'ffd8ffe1', 'ffd8ffe2', 'ffd8ffe3', 'ffd8ffe8'],
      'image/png
    - in_function: AttachmentService.scanForVirus
  Second occurrence: batch index 1734
    - source_expr: {
      'image/jpeg': ['ffd8ffe0', 'ffd8ffe1', 'ffd8ffe2', 'ffd8ffe3', 'ffd8ffe8'],
      'image/png
    - in_function: AttachmentService.scanForVirus

[DEBUG] DUPLICATE #1735:
  File: backend/src/services/attachment.service.ts
  Line: 344
  Target: fileSignature
  First occurrence: batch index 1707
    - source_expr: buffer.slice(0, 4).toString('hex')
    - in_function: AttachmentService.scanForVirus
  Second occurrence: batch index 1735
    - source_expr: buffer.slice(0, 4).toString('hex')
    - in_function: AttachmentService.scanForVirus

[DEBUG] DUPLICATE #1736:
  File: backend/src/services/attachment.service.ts
  Line: 345
  Target: fileSignature8
  First occurrence: batch index 1708
    - source_expr: buffer.slice(0, 8).toString('hex')
    - in_function: AttachmentService.scanForVirus
  Second occurrence: batch index 1736
    - source_expr: buffer.slice(0, 8).toString('hex')
    - in_function: AttachmentService.scanForVirus

[DEBUG] DUPLICATE #1737:
  File: backend/src/services/attachment.service.ts
  Line: 348
  Target: isValid
  First occurrence: batch index 1709
    - source_expr: false
    - in_function: AttachmentService.scanForVirus
  Second occurrence: batch index 1737
    - source_expr: false
    - in_function: AttachmentService.scanForVirus

[DEBUG] DUPLICATE #1738:
  File: backend/src/services/attachment.service.ts
  Line: 408
  Target: tx
  First occurrence: batch index 1710
    - source_expr: options?.transaction || transaction
    - in_function: AttachmentService.getStorageStats
  Second occurrence: batch index 1738
    - source_expr: options?.transaction || transaction
    - in_function: AttachmentService.getStorageStats

[DEBUG] DUPLICATE #1739:
  File: backend/src/services/attachment.service.ts
  Line: 410
  Target: attachments
  First occurrence: batch index 1711
    - source_expr: await Attachment.findAll({
        where: {
          account_id: accountId,
          deleted_at: n
    - in_function: AttachmentService.getStorageStats
  Second occurrence: batch index 1739
    - source_expr: await Attachment.findAll({
        where: {
          account_id: accountId,
          deleted_at: n
    - in_function: AttachmentService.getStorageStats

[DEBUG] DUPLICATE #1740:
  File: backend/src/services/attachment.service.ts
  Line: 419
  Target: stats
  First occurrence: batch index 1712
    - source_expr: {
        totalFiles: attachments.length,
        totalSize: 0,
        formattedSize: '',
        b
    - in_function: AttachmentService.getStorageStats
  Second occurrence: batch index 1740
    - source_expr: {
        totalFiles: attachments.length,
        totalSize: 0,
        formattedSize: '',
        b
    - in_function: AttachmentService.getStorageStats

[DEBUG] DUPLICATE #1741:
  File: backend/src/services/attachment.service.ts
  Line: 437
  Target: sizes
  First occurrence: batch index 1713
    - source_expr: ['Bytes', 'KB', 'MB', 'GB']
    - in_function: AttachmentService.getStorageStats
  Second occurrence: batch index 1741
    - source_expr: ['Bytes', 'KB', 'MB', 'GB']
    - in_function: AttachmentService.getStorageStats

[DEBUG] DUPLICATE #1742:
  File: backend/src/services/attachment.service.ts
  Line: 438
  Target: i
  First occurrence: batch index 1714
    - source_expr: stats.totalSize === 0 ? 0 : Math.floor(Math.log(stats.totalSize) / Math.log(1024))
    - in_function: AttachmentService.getStorageStats
  Second occurrence: batch index 1742
    - source_expr: stats.totalSize === 0 ? 0 : Math.floor(Math.log(stats.totalSize) / Math.log(1024))
    - in_function: AttachmentService.getStorageStats

[DEBUG] DUPLICATE #1754:
  File: backend/src/services/audit.service.ts
  Line: 68
  Target: content
  First occurrence: batch index 1745
    - source_expr: JSON.stringify({
      account_id: data.account_id,
      table_name: data.table_name,
      record_
    - in_function: AuditService.generateChecksum
  Second occurrence: batch index 1754
    - source_expr: JSON.stringify({
      account_id: data.account_id,
      table_name: data.table_name,
      record_
    - in_function: AuditService.generateChecksum

[DEBUG] DUPLICATE #1755:
  File: backend/src/services/audit.service.ts
  Line: 91
  Target: timestamp
  First occurrence: batch index 1746
    - source_expr: new Date()
    - in_function: AuditService.log
  Second occurrence: batch index 1755
    - source_expr: new Date()
    - in_function: AuditService.log

[DEBUG] DUPLICATE #1756:
  File: backend/src/services/audit.service.ts
  Line: 93
  Target: auditData: Partial<AuditLogAttributes>
  First occurrence: batch index 1747
    - source_expr: {
      account_id: accountId,
      table_name: entry.table_name,
      record_id: entry.record_id,
    - in_function: AuditService.log
  Second occurrence: batch index 1756
    - source_expr: {
      account_id: accountId,
      table_name: entry.table_name,
      record_id: entry.record_id,
    - in_function: AuditService.log

[DEBUG] DUPLICATE #1757:
  File: backend/src/services/audit.service.ts
  Line: 286
  Target: whereClause: WhereOptions<AuditLogAttributes>
  First occurrence: batch index 1748
    - source_expr: { account_id: accountId }
    - in_function: AuditService.queryLogs
  Second occurrence: batch index 1757
    - source_expr: { account_id: accountId }
    - in_function: AuditService.queryLogs

[DEBUG] DUPLICATE #1758:
  File: backend/src/services/audit.service.ts
  Line: 294
  Target: timestampConditions: Record<symbol, Date>
  First occurrence: batch index 1749
    - source_expr: {}
    - in_function: AuditService.queryLogs
  Second occurrence: batch index 1758
    - source_expr: {}
    - in_function: AuditService.queryLogs

[DEBUG] DUPLICATE #1759:
  File: backend/src/services/audit.service.ts
  Line: 300
  Target: { count, rows }
  First occurrence: batch index 1750
    - source_expr: await AuditLog.findAndCountAll({
      where: whereClause,
      order: [['timestamp', 'DESC']],
   
    - in_function: AuditService.queryLogs
  Second occurrence: batch index 1759
    - source_expr: await AuditLog.findAndCountAll({
      where: whereClause,
      order: [['timestamp', 'DESC']],
   
    - in_function: AuditService.queryLogs

[DEBUG] DUPLICATE #1760:
  File: backend/src/services/audit.service.ts
  Line: 314
  Target: where: { id: number; account_id?: string }
  First occurrence: batch index 1751
    - source_expr: { id: logId }
    - in_function: AuditService.verifyIntegrity
  Second occurrence: batch index 1760
    - source_expr: { id: logId }
    - in_function: AuditService.verifyIntegrity

[DEBUG] DUPLICATE #1761:
  File: backend/src/services/audit.service.ts
  Line: 318
  Target: log
  First occurrence: batch index 1752
    - source_expr: await AuditLog.findOne({ where })
    - in_function: AuditService.verifyIntegrity
  Second occurrence: batch index 1761
    - source_expr: await AuditLog.findOne({ where })
    - in_function: AuditService.verifyIntegrity

[DEBUG] DUPLICATE #1762:
  File: backend/src/services/audit.service.ts
  Line: 321
  Target: expectedChecksum
  First occurrence: batch index 1753
    - source_expr: this.generateChecksum({
      account_id: log.account_id,
      table_name: log.table_name,
      re
    - in_function: AuditService.verifyIntegrity
  Second occurrence: batch index 1762
    - source_expr: this.generateChecksum({
      account_id: log.account_id,
      table_name: log.table_name,
      re
    - in_function: AuditService.verifyIntegrity

[DEBUG] DUPLICATE #1791:
  File: backend/src/services/auth.service.ts
  Line: 53
  Target: transaction
  First occurrence: batch index 1763
    - source_expr: await sequelize.transaction()
    - in_function: AuthService.register
  Second occurrence: batch index 1791
    - source_expr: await sequelize.transaction()
    - in_function: AuthService.register

[DEBUG] DUPLICATE #1792:
  File: backend/src/services/auth.service.ts
  Line: 57
  Target: existingUser
  First occurrence: batch index 1764
    - source_expr: await User.findOne({
        where: { email: data.email },
        transaction
      })
    - in_function: AuthService.register
  Second occurrence: batch index 1792
    - source_expr: await User.findOne({
        where: { email: data.email },
        transaction
      })
    - in_function: AuthService.register

[DEBUG] DUPLICATE #1793:
  File: backend/src/services/auth.service.ts
  Line: 67
  Target: workerPrefix
  First occurrence: batch index 1765
    - source_expr: data.account_name
        .replace(/[^A-Z0-9]/gi, '')
        .substring(0, 4)
        .toUpperCase(
    - in_function: AuthService.register
  Second occurrence: batch index 1793
    - source_expr: data.account_name
        .replace(/[^A-Z0-9]/gi, '')
        .substring(0, 4)
        .toUpperCase(
    - in_function: AuthService.register

[DEBUG] DUPLICATE #1794:
  File: backend/src/services/auth.service.ts
  Line: 73
  Target: account
  First occurrence: batch index 1766
    - source_expr: await Account.create(
        {
          id: uuidv4(),
          company_name: data.account_name,
 
    - in_function: AuthService.register
  Second occurrence: batch index 1794
    - source_expr: await Account.create(
        {
          id: uuidv4(),
          company_name: data.account_name,
 
    - in_function: AuthService.register

[DEBUG] DUPLICATE #1795:
  File: backend/src/services/auth.service.ts
  Line: 84
  Target: hashedPassword
  First occurrence: batch index 1767
    - source_expr: await this.hashPassword(data.password)
    - in_function: AuthService.register
  Second occurrence: batch index 1795
    - source_expr: await this.hashPassword(data.password)
    - in_function: AuthService.register

[DEBUG] DUPLICATE #1796:
  File: backend/src/services/auth.service.ts
  Line: 87
  Target: existingUsername
  First occurrence: batch index 1768
    - source_expr: await User.findOne({
        where: { username: data.username },
        transaction
      })
    - in_function: AuthService.register
  Second occurrence: batch index 1796
    - source_expr: await User.findOne({
        where: { username: data.username },
        transaction
      })
    - in_function: AuthService.register

[DEBUG] DUPLICATE #1797:
  File: backend/src/services/auth.service.ts
  Line: 97
  Target: user
  First occurrence: batch index 1769
    - source_expr: await User.create(
        {
          id: uuidv4(),
          account_id: account.id,
          use
    - in_function: AuthService.register
  Second occurrence: batch index 1797
    - source_expr: await User.create(
        {
          id: uuidv4(),
          account_id: account.id,
          use
    - in_function: AuthService.register

[DEBUG] DUPLICATE #1798:
  File: backend/src/services/auth.service.ts
  Line: 115
  Target: tokens
  First occurrence: batch index 1770
    - source_expr: this.generateTokens({
        userId: user.id,
        accountId: account.id,
        type: 'user'
 
    - in_function: AuthService.register
  Second occurrence: batch index 1798
    - source_expr: this.generateTokens({
        userId: user.id,
        accountId: account.id,
        type: 'user'
 
    - in_function: AuthService.register

[DEBUG] DUPLICATE #1799:
  File: backend/src/services/auth.service.ts
  Line: 140
  Target: user
  First occurrence: batch index 1771
    - source_expr: await User.findOne({
      where: { email: data.email },
      include: [
        {
          model:
    - in_function: AuthService.login
  Second occurrence: batch index 1799
    - source_expr: await User.findOne({
      where: { email: data.email },
      include: [
        {
          model:
    - in_function: AuthService.login

[DEBUG] DUPLICATE #1800:
  File: backend/src/services/auth.service.ts
  Line: 164
  Target: isValidPassword
  First occurrence: batch index 1772
    - source_expr: await this.verifyPassword(data.password, user.password_hash)
    - in_function: AuthService.login
  Second occurrence: batch index 1800
    - source_expr: await this.verifyPassword(data.password, user.password_hash)
    - in_function: AuthService.login

[DEBUG] DUPLICATE #1801:
  File: backend/src/services/auth.service.ts
  Line: 170
  Target: tokens
  First occurrence: batch index 1773
    - source_expr: this.generateTokens({
      userId: user.id,
      accountId: user.account_id,
      type: 'user'
  
    - in_function: AuthService.login
  Second occurrence: batch index 1801
    - source_expr: this.generateTokens({
      userId: user.id,
      accountId: user.account_id,
      type: 'user'
  
    - in_function: AuthService.login

[DEBUG] DUPLICATE #1802:
  File: backend/src/services/auth.service.ts
  Line: 190
  Target: worker
  First occurrence: batch index 1774
    - source_expr: await Worker.findOne({
      where: {
        worker_code: data.worker_code,
        is_active: true
    - in_function: AuthService.loginWorker
  Second occurrence: batch index 1802
    - source_expr: await Worker.findOne({
      where: {
        worker_code: data.worker_code,
        is_active: true
    - in_function: AuthService.loginWorker

[DEBUG] DUPLICATE #1803:
  File: backend/src/services/auth.service.ts
  Line: 219
  Target: validPin
  First occurrence: batch index 1775
    - source_expr: await argon2.verify(worker.pin_hash, data.pin)
    - in_function: AuthService.loginWorker
  Second occurrence: batch index 1803
    - source_expr: await argon2.verify(worker.pin_hash, data.pin)
    - in_function: AuthService.loginWorker

[DEBUG] DUPLICATE #1804:
  File: backend/src/services/auth.service.ts
  Line: 240
  Target: tokenPayload: TokenPayload
  First occurrence: batch index 1776
    - source_expr: {
      userId: worker.id,
      accountId: worker.account_id,
      type: 'worker',
      facilityI
    - in_function: AuthService.loginWorker
  Second occurrence: batch index 1804
    - source_expr: {
      userId: worker.id,
      accountId: worker.account_id,
      type: 'worker',
      facilityI
    - in_function: AuthService.loginWorker

[DEBUG] DUPLICATE #1805:
  File: backend/src/services/auth.service.ts
  Line: 247
  Target: accessToken
  First occurrence: batch index 1777
    - source_expr: jwt.sign(
      tokenPayload,
      this.JWT_SECRET,
      { expiresIn: '12h' } // Full day shift in
    - in_function: AuthService.loginWorker
  Second occurrence: batch index 1805
    - source_expr: jwt.sign(
      tokenPayload,
      this.JWT_SECRET,
      { expiresIn: '12h' } // Full day shift in
    - in_function: AuthService.loginWorker

[DEBUG] DUPLICATE #1806:
  File: backend/src/services/auth.service.ts
  Line: 253
  Target: refreshToken
  First occurrence: batch index 1778
    - source_expr: jwt.sign(
      tokenPayload,
      this.REFRESH_SECRET,
      { expiresIn: '7d' } // Week rotation

    - in_function: AuthService.loginWorker
  Second occurrence: batch index 1806
    - source_expr: jwt.sign(
      tokenPayload,
      this.REFRESH_SECRET,
      { expiresIn: '7d' } // Week rotation

    - in_function: AuthService.loginWorker

[DEBUG] DUPLICATE #1807:
  File: backend/src/services/auth.service.ts
  Line: 297
  Target: payload
  First occurrence: batch index 1779
    - source_expr: jwt.verify(refreshToken, this.REFRESH_SECRET) as TokenPayload
    - in_function: AuthService.refreshToken
  Second occurrence: batch index 1807
    - source_expr: jwt.verify(refreshToken, this.REFRESH_SECRET) as TokenPayload
    - in_function: AuthService.refreshToken

[DEBUG] DUPLICATE #1808:
  File: backend/src/services/auth.service.ts
  Line: 306
  Target: user
  First occurrence: batch index 1780
    - source_expr: await User.findOne({
          where: {
            id: payload.userId,
            account_id: payl
    - in_function: AuthService.refreshToken
  Second occurrence: batch index 1808
    - source_expr: await User.findOne({
          where: {
            id: payload.userId,
            account_id: payl
    - in_function: AuthService.refreshToken

[DEBUG] DUPLICATE #1809:
  File: backend/src/services/auth.service.ts
  Line: 317
  Target: isValidRefreshToken
  First occurrence: batch index 1781
    - source_expr: await this.verifyRefreshToken(user.id, refreshToken)
    - in_function: AuthService.refreshToken
  Second occurrence: batch index 1809
    - source_expr: await this.verifyRefreshToken(user.id, refreshToken)
    - in_function: AuthService.refreshToken

[DEBUG] DUPLICATE #1810:
  File: backend/src/services/auth.service.ts
  Line: 323
  Target: tokens
  First occurrence: batch index 1782
    - source_expr: this.generateTokens({
          userId: user.id,
          accountId: user.account_id,
          typ
    - in_function: AuthService.refreshToken
  Second occurrence: batch index 1810
    - source_expr: this.generateTokens({
          userId: user.id,
          accountId: user.account_id,
          typ
    - in_function: AuthService.refreshToken

[DEBUG] DUPLICATE #1811:
  File: backend/src/services/auth.service.ts
  Line: 335
  Target: worker
  First occurrence: batch index 1783
    - source_expr: await Worker.findOne({
          where: {
            id: payload.userId,
            account_id: pa
    - in_function: AuthService.refreshToken
  Second occurrence: batch index 1811
    - source_expr: await Worker.findOne({
          where: {
            id: payload.userId,
            account_id: pa
    - in_function: AuthService.refreshToken

[DEBUG] DUPLICATE #1812:
  File: backend/src/services/auth.service.ts
  Line: 352
  Target: tokens
  First occurrence: batch index 1784
    - source_expr: this.generateTokens({
          userId: worker.id,
          accountId: worker.account_id,
         
    - in_function: AuthService.refreshToken
  Second occurrence: batch index 1812
    - source_expr: this.generateTokens({
          userId: worker.id,
          accountId: worker.account_id,
         
    - in_function: AuthService.refreshToken

[DEBUG] DUPLICATE #1813:
  File: backend/src/services/auth.service.ts
  Line: 390
  Target: payload
  First occurrence: batch index 1785
    - source_expr: jwt.verify(token, this.JWT_SECRET) as TokenPayload
    - in_function: AuthService./**
   * Verify access token
   */
  verifyAccessToken
  Second occurrence: batch index 1813
    - source_expr: jwt.verify(token, this.JWT_SECRET) as TokenPayload
    - in_function: AuthService./**
   * Verify access token
   */
  verifyAccessToken

[DEBUG] DUPLICATE #1814:
  File: backend/src/services/auth.service.ts
  Line: 405
  Target: accessToken
  First occurrence: batch index 1786
    - source_expr: jwt.sign(
      data,
      this.JWT_SECRET,
      { expiresIn: this.ACCESS_TOKEN_EXPIRY }
    )
    - in_function: AuthService.generateTokens
  Second occurrence: batch index 1814
    - source_expr: jwt.sign(
      data,
      this.JWT_SECRET,
      { expiresIn: this.ACCESS_TOKEN_EXPIRY }
    )
    - in_function: AuthService.generateTokens

[DEBUG] DUPLICATE #1815:
  File: backend/src/services/auth.service.ts
  Line: 411
  Target: refreshToken
  First occurrence: batch index 1787
    - source_expr: jwt.sign(
      data,
      this.REFRESH_SECRET,
      { expiresIn: this.REFRESH_TOKEN_EXPIRY }
    
    - in_function: AuthService.generateTokens
  Second occurrence: batch index 1815
    - source_expr: jwt.sign(
      data,
      this.REFRESH_SECRET,
      { expiresIn: this.REFRESH_TOKEN_EXPIRY }
    
    - in_function: AuthService.generateTokens

[DEBUG] DUPLICATE #1816:
  File: backend/src/services/auth.service.ts
  Line: 470
  Target: tokenHash
  First occurrence: batch index 1788
    - source_expr: await argon2.hash(refreshToken, {
      type: argon2.argon2id,
      memoryCost: 2 ** 16,
      time
    - in_function: AuthService.storeRefreshToken
  Second occurrence: batch index 1816
    - source_expr: await argon2.hash(refreshToken, {
      type: argon2.argon2id,
      memoryCost: 2 ** 16,
      time
    - in_function: AuthService.storeRefreshToken

[DEBUG] DUPLICATE #1817:
  File: backend/src/services/auth.service.ts
  Line: 492
  Target: payload
  First occurrence: batch index 1789
    - source_expr: jwt.decode(refreshToken) as TokenPayload
    - in_function: AuthService.verifyRefreshToken
  Second occurrence: batch index 1817
    - source_expr: jwt.decode(refreshToken) as TokenPayload
    - in_function: AuthService.verifyRefreshToken

[DEBUG] DUPLICATE #1818:
  File: backend/src/services/auth.service.ts
  Line: 494
  Target: user
  First occurrence: batch index 1790
    - source_expr: await User.findOne({
      where: {
        id: userId,
        account_id: payload?.accountId
     
    - in_function: AuthService.verifyRefreshToken
  Second occurrence: batch index 1818
    - source_expr: await User.findOne({
      where: {
        id: userId,
        account_id: payload?.accountId
     
    - in_function: AuthService.verifyRefreshToken

[DEBUG] DUPLICATE #1837:
  File: backend/src/services/base.service.ts
  Line: 67
  Target: whereClause
  First occurrence: batch index 1820
    - source_expr: {
        id,
        account_id: accountId
      } as unknown as WhereOptions<Attributes<TModel>
    - in_function: BaseService.findById
  Second occurrence: batch index 1837
    - source_expr: {
        id,
        account_id: accountId
      } as unknown as WhereOptions<Attributes<TModel>
    - in_function: BaseService.findById

[DEBUG] DUPLICATE #1838:
  File: backend/src/services/base.service.ts
  Line: 72
  Target: record
  First occurrence: batch index 1821
    - source_expr: await this.model.findOne({
        where: whereClause,
        include: options?.include,
       
    - in_function: BaseService.findById
  Second occurrence: batch index 1838
    - source_expr: await this.model.findOne({
        where: whereClause,
        include: options?.include,
       
    - in_function: BaseService.findById

[DEBUG] DUPLICATE #1839:
  File: backend/src/services/base.service.ts
  Line: 94
  Target: whereClause
  First occurrence: batch index 1822
    - source_expr: {
        account_id: accountId
      } as unknown as WhereOptions<Attributes<TModel>>
    - in_function: BaseService.findAll
  Second occurrence: batch index 1839
    - source_expr: {
        account_id: accountId
      } as unknown as WhereOptions<Attributes<TModel>>
    - in_function: BaseService.findAll

[DEBUG] DUPLICATE #1840:
  File: backend/src/services/base.service.ts
  Line: 103
  Target: queryOptions: FindOptions<Attributes<TModel>>
  First occurrence: batch index 1823
    - source_expr: {
        where: whereClause,
        include: options?.include,
        limit: options?.limit ||
    - in_function: BaseService.findAll
  Second occurrence: batch index 1840
    - source_expr: {
        where: whereClause,
        include: options?.include,
        limit: options?.limit ||
    - in_function: BaseService.findAll

[DEBUG] DUPLICATE #1841:
  File: backend/src/services/base.service.ts
  Line: 112
  Target: { count, rows }
  First occurrence: batch index 1824
    - source_expr: await this.model.findAndCountAll(queryOptions)
    - in_function: BaseService.findAll
  Second occurrence: batch index 1841
    - source_expr: await this.model.findAndCountAll(queryOptions)
    - in_function: BaseService.findAll

[DEBUG] DUPLICATE #1842:
  File: backend/src/services/base.service.ts
  Line: 114
  Target: limit
  First occurrence: batch index 1825
    - source_expr: options?.limit || 50
    - in_function: BaseService.findAll
  Second occurrence: batch index 1842
    - source_expr: options?.limit || 50
    - in_function: BaseService.findAll

[DEBUG] DUPLICATE #1843:
  File: backend/src/services/base.service.ts
  Line: 115
  Target: page
  First occurrence: batch index 1826
    - source_expr: Math.floor((options?.offset || 0) / limit) + 1
    - in_function: BaseService.findAll
  Second occurrence: batch index 1843
    - source_expr: Math.floor((options?.offset || 0) / limit) + 1
    - in_function: BaseService.findAll

[DEBUG] DUPLICATE #1844:
  File: backend/src/services/base.service.ts
  Line: 116
  Target: pages
  First occurrence: batch index 1827
    - source_expr: Math.ceil(count / limit)
    - in_function: BaseService.findAll
  Second occurrence: batch index 1844
    - source_expr: Math.ceil(count / limit)
    - in_function: BaseService.findAll

[DEBUG] DUPLICATE #1845:
  File: backend/src/services/base.service.ts
  Line: 141
  Target: createData
  First occurrence: batch index 1828
    - source_expr: {
        ...data,
        account_id: accountId
      } as unknown as CreationAttributes<TModel>
    - in_function: BaseService.create
  Second occurrence: batch index 1845
    - source_expr: {
        ...data,
        account_id: accountId
      } as unknown as CreationAttributes<TModel>
    - in_function: BaseService.create

[DEBUG] DUPLICATE #1846:
  File: backend/src/services/base.service.ts
  Line: 146
  Target: record
  First occurrence: batch index 1829
    - source_expr: await this.model.create(createData, {
        transaction: options?.transaction || transaction
   
    - in_function: BaseService.create
  Second occurrence: batch index 1846
    - source_expr: await this.model.create(createData, {
        transaction: options?.transaction || transaction
   
    - in_function: BaseService.create

[DEBUG] DUPLICATE #1847:
  File: backend/src/services/base.service.ts
  Line: 180
  Target: record
  First occurrence: batch index 1830
    - source_expr: await this.findById(accountId, id, {
        transaction: options?.transaction || transaction
    
    - in_function: BaseService.update
  Second occurrence: batch index 1847
    - source_expr: await this.findById(accountId, id, {
        transaction: options?.transaction || transaction
    
    - in_function: BaseService.update

[DEBUG] DUPLICATE #1848:
  File: backend/src/services/base.service.ts
  Line: 184
  Target: oldValues
  First occurrence: batch index 1831
    - source_expr: record.toJSON() as Record<string, unknown>
    - in_function: BaseService.update
  Second occurrence: batch index 1848
    - source_expr: record.toJSON() as Record<string, unknown>
    - in_function: BaseService.update

[DEBUG] DUPLICATE #1849:
  File: backend/src/services/base.service.ts
  Line: 223
  Target: record
  First occurrence: batch index 1832
    - source_expr: await this.findById(accountId, id, {
        transaction: options?.transaction || transaction
    
    - in_function: BaseService.delete
  Second occurrence: batch index 1849
    - source_expr: await this.findById(accountId, id, {
        transaction: options?.transaction || transaction
    
    - in_function: BaseService.delete

[DEBUG] DUPLICATE #1850:
  File: backend/src/services/base.service.ts
  Line: 227
  Target: oldValues
  First occurrence: batch index 1833
    - source_expr: record.toJSON() as Record<string, unknown>
    - in_function: BaseService.delete
  Second occurrence: batch index 1850
    - source_expr: record.toJSON() as Record<string, unknown>
    - in_function: BaseService.delete

[DEBUG] DUPLICATE #1851:
  File: backend/src/services/base.service.ts
  Line: 264
  Target: createData
  First occurrence: batch index 1834
    - source_expr: data.map(item => ({
        ...item,
        account_id: accountId
      })) as unknown as Creati
    - in_function: BaseService.bulkCreate
  Second occurrence: batch index 1851
    - source_expr: data.map(item => ({
        ...item,
        account_id: accountId
      })) as unknown as Creati
    - in_function: BaseService.bulkCreate

[DEBUG] DUPLICATE #1852:
  File: backend/src/services/base.service.ts
  Line: 269
  Target: records
  First occurrence: batch index 1835
    - source_expr: await this.model.bulkCreate(createData, {
        transaction: options?.transaction || transaction,
    - in_function: BaseService.bulkCreate
  Second occurrence: batch index 1852
    - source_expr: await this.model.bulkCreate(createData, {
        transaction: options?.transaction || transaction,
    - in_function: BaseService.bulkCreate

[DEBUG] DUPLICATE #1853:
  File: backend/src/services/base.service.ts
  Line: 365
  Target: data
  First occurrence: batch index 1836
    - source_expr: record.toJSON() as Record<string, unknown>
    - in_function: BaseService.getAuditData
  Second occurrence: batch index 1853
    - source_expr: record.toJSON() as Record<string, unknown>
    - in_function: BaseService.getAuditData

[DEBUG] DUPLICATE #1898:
  File: backend/src/services/batch.service.ts
  Line: 35
  Target: genetics
  First occurrence: batch index 1854
    - source_expr: await Genetics.findOne({
        where: { id: data.genetics_id, account_id: accountId },
        t
    - in_function: BatchService.createBatch
  Second occurrence: batch index 1898
    - source_expr: await Genetics.findOne({
        where: { id: data.genetics_id, account_id: accountId },
        t
    - in_function: BatchService.createBatch

[DEBUG] DUPLICATE #1899:
  File: backend/src/services/batch.service.ts
  Line: 44
  Target: zone
  First occurrence: batch index 1855
    - source_expr: await Zone.findOne({
        where: {
          id: data.zone_id,
          facility_id: facility
    - in_function: BatchService.createBatch
  Second occurrence: batch index 1899
    - source_expr: await Zone.findOne({
        where: {
          id: data.zone_id,
          facility_id: facility
    - in_function: BatchService.createBatch

[DEBUG] DUPLICATE #1900:
  File: backend/src/services/batch.service.ts
  Line: 57
  Target: facility
  First occurrence: batch index 1856
    - source_expr: await Facility.findOne({
        where: { id: zone.facility_id, account_id: accountId },
        t
    - in_function: BatchService.createBatch
  Second occurrence: batch index 1900
    - source_expr: await Facility.findOne({
        where: { id: zone.facility_id, account_id: accountId },
        t
    - in_function: BatchService.createBatch

[DEBUG] DUPLICATE #1901:
  File: backend/src/services/batch.service.ts
  Line: 61
  Target: facilityCode
  First occurrence: batch index 1857
    - source_expr: facility?.getFacilityCode() || 'XX'
    - in_function: BatchService.createBatch
  Second occurrence: batch index 1901
    - source_expr: facility?.getFacilityCode() || 'XX'
    - in_function: BatchService.createBatch

[DEBUG] DUPLICATE #1902:
  File: backend/src/services/batch.service.ts
  Line: 62
  Target: batchNumber
  First occurrence: batch index 1858
    - source_expr: await Batch.generateBatchNumber(
        facilityCode,
        accountId
      )
    - in_function: BatchService.createBatch
  Second occurrence: batch index 1902
    - source_expr: await Batch.generateBatchNumber(
        facilityCode,
        accountId
      )
    - in_function: BatchService.createBatch

[DEBUG] DUPLICATE #1903:
  File: backend/src/services/batch.service.ts
  Line: 68
  Target: batchStartDate
  First occurrence: batch index 1859
    - source_expr: parseDate(data.start_date)
    - in_function: BatchService.createBatch
  Second occurrence: batch index 1903
    - source_expr: parseDate(data.start_date)
    - in_function: BatchService.createBatch

[DEBUG] DUPLICATE #1904:
  File: backend/src/services/batch.service.ts
  Line: 71
  Target: batch
  First occurrence: batch index 1860
    - source_expr: await Batch.create(
        {
          id: uuidv4(),
          account_id: accountId,
         
    - in_function: BatchService.createBatch
  Second occurrence: batch index 1904
    - source_expr: await Batch.create(
        {
          id: uuidv4(),
          account_id: accountId,
         
    - in_function: BatchService.createBatch

[DEBUG] DUPLICATE #1905:
  File: backend/src/services/batch.service.ts
  Line: 93
  Target: qrCode
  First occurrence: batch index 1861
    - source_expr: await qrService.generateQRCode(
        accountId,
        'batch',
        batch.id,
        cr
    - in_function: BatchService.createBatch
  Second occurrence: batch index 1905
    - source_expr: await qrService.generateQRCode(
        accountId,
        'batch',
        batch.id,
        cr
    - in_function: BatchService.createBatch

[DEBUG] DUPLICATE #1906:
  File: backend/src/services/batch.service.ts
  Line: 111
  Target: plants: Omit<PlantAttributes, 'created_at' | 'updated_at' | 'deleted_at'>[]
  First occurrence: batch index 1862
    - source_expr: []
    - in_function: BatchService.createBatch
  Second occurrence: batch index 1906
    - source_expr: []
    - in_function: BatchService.createBatch

[DEBUG] DUPLICATE #1907:
  File: backend/src/services/batch.service.ts
  Line: 112
  Target: plantIds: string[]
  First occurrence: batch index 1863
    - source_expr: []
    - in_function: BatchService.createBatch
  Second occurrence: batch index 1907
    - source_expr: []
    - in_function: BatchService.createBatch

[DEBUG] DUPLICATE #1908:
  File: backend/src/services/batch.service.ts
  Line: 113
  Target: i
  First occurrence: batch index 1864
    - source_expr: 1
    - in_function: BatchService.createBatch
  Second occurrence: batch index 1908
    - source_expr: 1
    - in_function: BatchService.createBatch

[DEBUG] DUPLICATE #1909:
  File: backend/src/services/batch.service.ts
  Line: 114
  Target: plantId
  First occurrence: batch index 1865
    - source_expr: uuidv4()
    - in_function: BatchService.createBatch
  Second occurrence: batch index 1909
    - source_expr: uuidv4()
    - in_function: BatchService.createBatch

[DEBUG] DUPLICATE #1910:
  File: backend/src/services/batch.service.ts
  Line: 116
  Target: plantCode
  First occurrence: batch index 1866
    - source_expr: `${batchNumber}-P${String(i).padStart(4, '0')}`
    - in_function: BatchService.createBatch
  Second occurrence: batch index 1910
    - source_expr: `${batchNumber}-P${String(i).padStart(4, '0')}`
    - in_function: BatchService.createBatch

[DEBUG] DUPLICATE #1911:
  File: backend/src/services/batch.service.ts
  Line: 151
  Target: fullBatch
  First occurrence: batch index 1867
    - source_expr: await Batch.findOne({
        where: { id: batch.id, account_id: accountId },
        include: [

    - in_function: BatchService.createBatch
  Second occurrence: batch index 1911
    - source_expr: await Batch.findOne({
        where: { id: batch.id, account_id: accountId },
        include: [

    - in_function: BatchService.createBatch

[DEBUG] DUPLICATE #1912:
  File: backend/src/services/batch.service.ts
  Line: 170
  Target: batch
  First occurrence: batch index 1868
    - source_expr: await Batch.findOne({
        where: { id: batchId, account_id: accountId },
        include: [
 
    - in_function: BatchService.getBatchWithDetails
  Second occurrence: batch index 1912
    - source_expr: await Batch.findOne({
        where: { id: batchId, account_id: accountId },
        include: [
 
    - in_function: BatchService.getBatchWithDetails

[DEBUG] DUPLICATE #1913:
  File: backend/src/services/batch.service.ts
  Line: 199
  Target: batch
  First occurrence: batch index 1869
    - source_expr: await Batch.findOne({
        where: {
          qr_code: qrCode,
          account_id: accountId
    - in_function: BatchService.getBatchByQRCode
  Second occurrence: batch index 1913
    - source_expr: await Batch.findOne({
        where: {
          qr_code: qrCode,
          account_id: accountId
    - in_function: BatchService.getBatchByQRCode

[DEBUG] DUPLICATE #1914:
  File: backend/src/services/batch.service.ts
  Line: 233
  Target: whereClause: WhereOptions<BatchAttributes>
  First occurrence: batch index 1870
    - source_expr: {}
    - in_function: BatchService.listBatches
  Second occurrence: batch index 1914
    - source_expr: {}
    - in_function: BatchService.listBatches

[DEBUG] DUPLICATE #1915:
  File: backend/src/services/batch.service.ts
  Line: 247
  Target: zoneInclude: ZoneInclude
  First occurrence: batch index 1871
    - source_expr: {
        model: Zone,
        as: 'zone',
        required: true
      }
    - in_function: BatchService.listBatches
  Second occurrence: batch index 1915
    - source_expr: {
        model: Zone,
        as: 'zone',
        required: true
      }
    - in_function: BatchService.listBatches

[DEBUG] DUPLICATE #1916:
  File: backend/src/services/batch.service.ts
  Line: 258
  Target: batches
  First occurrence: batch index 1872
    - source_expr: await Batch.findAll({
        where: whereClause,
        include: [
          { model: Genetics,
    - in_function: BatchService.listBatches
  Second occurrence: batch index 1916
    - source_expr: await Batch.findAll({
        where: whereClause,
        include: [
          { model: Genetics,
    - in_function: BatchService.listBatches

[DEBUG] DUPLICATE #1917:
  File: backend/src/services/batch.service.ts
  Line: 284
  Target: batch
  First occurrence: batch index 1873
    - source_expr: await Batch.findOne({
        where: { id: batchId, account_id: accountId },
        transaction

    - in_function: BatchService.moveBatch
  Second occurrence: batch index 1917
    - source_expr: await Batch.findOne({
        where: { id: batchId, account_id: accountId },
        transaction

    - in_function: BatchService.moveBatch

[DEBUG] DUPLICATE #1918:
  File: backend/src/services/batch.service.ts
  Line: 294
  Target: zone
  First occurrence: batch index 1874
    - source_expr: await Zone.findOne({
        where: { id: newZoneId, account_id: accountId },
        transaction
    - in_function: BatchService.moveBatch
  Second occurrence: batch index 1918
    - source_expr: await Zone.findOne({
        where: { id: newZoneId, account_id: accountId },
        transaction
    - in_function: BatchService.moveBatch

[DEBUG] DUPLICATE #1919:
  File: backend/src/services/batch.service.ts
  Line: 302
  Target: oldValues
  First occurrence: batch index 1875
    - source_expr: batch.toJSON()
    - in_function: BatchService.moveBatch
  Second occurrence: batch index 1919
    - source_expr: batch.toJSON()
    - in_function: BatchService.moveBatch

[DEBUG] DUPLICATE #1920:
  File: backend/src/services/batch.service.ts
  Line: 318
  Target: updatedBatch
  First occurrence: batch index 1876
    - source_expr: await Batch.findOne({
        where: { id: batchId, account_id: accountId },
        include: [
 
    - in_function: BatchService.moveBatch
  Second occurrence: batch index 1920
    - source_expr: await Batch.findOne({
        where: { id: batchId, account_id: accountId },
        include: [
 
    - in_function: BatchService.moveBatch

[DEBUG] DUPLICATE #1921:
  File: backend/src/services/batch.service.ts
  Line: 341
  Target: sourceBatch
  First occurrence: batch index 1877
    - source_expr: await Batch.findOne({
        where: { id: batchId, account_id: accountId },
        include: [
 
    - in_function: BatchService.splitBatch
  Second occurrence: batch index 1921
    - source_expr: await Batch.findOne({
        where: { id: batchId, account_id: accountId },
        include: [
 
    - in_function: BatchService.splitBatch

[DEBUG] DUPLICATE #1922:
  File: backend/src/services/batch.service.ts
  Line: 359
  Target: _totalSplitCount
  First occurrence: batch index 1878
    - source_expr: splits.reduce((sum, s) => sum + s.plant_count, 0)
    - in_function: BatchService.splitBatch
  Second occurrence: batch index 1922
    - source_expr: splits.reduce((sum, s) => sum + s.plant_count, 0)
    - in_function: BatchService.splitBatch

[DEBUG] DUPLICATE #1923:
  File: backend/src/services/batch.service.ts
  Line: 362
  Target: newBatches: Batch[]
  First occurrence: batch index 1879
    - source_expr: []
    - in_function: BatchService.splitBatch
  Second occurrence: batch index 1923
    - source_expr: []
    - in_function: BatchService.splitBatch

[DEBUG] DUPLICATE #1924:
  File: backend/src/services/batch.service.ts
  Line: 363
  Target: _plantIndex
  First occurrence: batch index 1880
    - source_expr: 0
    - in_function: BatchService.splitBatch
  Second occurrence: batch index 1924
    - source_expr: 0
    - in_function: BatchService.splitBatch

[DEBUG] DUPLICATE #1925:
  File: backend/src/services/batch.service.ts
  Line: 367
  Target: zone
  First occurrence: batch index 1881
    - source_expr: await Zone.findOne({
          where: { id: split.zone_id, account_id: accountId },
          tran
    - in_function: BatchService.splitBatch
  Second occurrence: batch index 1925
    - source_expr: await Zone.findOne({
          where: { id: split.zone_id, account_id: accountId },
          tran
    - in_function: BatchService.splitBatch

[DEBUG] DUPLICATE #1926:
  File: backend/src/services/batch.service.ts
  Line: 376
  Target: facility
  First occurrence: batch index 1882
    - source_expr: await Facility.findOne({
          where: { id: sourceBatch.facility_id, account_id: accountId },

    - in_function: BatchService.splitBatch
  Second occurrence: batch index 1926
    - source_expr: await Facility.findOne({
          where: { id: sourceBatch.facility_id, account_id: accountId },

    - in_function: BatchService.splitBatch

[DEBUG] DUPLICATE #1927:
  File: backend/src/services/batch.service.ts
  Line: 380
  Target: facilityCode
  First occurrence: batch index 1883
    - source_expr: facility ? facility.getFacilityCode() : 'XX'
    - in_function: BatchService.splitBatch
  Second occurrence: batch index 1927
    - source_expr: facility ? facility.getFacilityCode() : 'XX'
    - in_function: BatchService.splitBatch

[DEBUG] DUPLICATE #1928:
  File: backend/src/services/batch.service.ts
  Line: 381
  Target: batchNumber
  First occurrence: batch index 1884
    - source_expr: await Batch.generateBatchNumber(
          facilityCode,
          accountId
        )
    - in_function: BatchService.splitBatch
  Second occurrence: batch index 1928
    - source_expr: await Batch.generateBatchNumber(
          facilityCode,
          accountId
        )
    - in_function: BatchService.splitBatch

[DEBUG] DUPLICATE #1929:
  File: backend/src/services/batch.service.ts
  Line: 387
  Target: qrCode
  First occurrence: batch index 1885
    - source_expr: `BT-${new Date().toISOString().slice(2, 10).replace(/-/g, '')}-${Math.random().toString(36).substr(2
    - in_function: BatchService.splitBatch
  Second occurrence: batch index 1929
    - source_expr: `BT-${new Date().toISOString().slice(2, 10).replace(/-/g, '')}-${Math.random().toString(36).substr(2
    - in_function: BatchService.splitBatch

[DEBUG] DUPLICATE #1930:
  File: backend/src/services/batch.service.ts
  Line: 390
  Target: newBatch
  First occurrence: batch index 1886
    - source_expr: await Batch.create(
          {
            id: uuidv4(),
            account_id: accountId,
   
    - in_function: BatchService.splitBatch
  Second occurrence: batch index 1930
    - source_expr: await Batch.create(
          {
            id: uuidv4(),
            account_id: accountId,
   
    - in_function: BatchService.splitBatch

[DEBUG] DUPLICATE #1931:
  File: backend/src/services/batch.service.ts
  Line: 442
  Target: batch
  First occurrence: batch index 1887
    - source_expr: await Batch.findOne({
        where: {
          id: batchId,
          account_id: accountId
  
    - in_function: BatchService.changeStage
  Second occurrence: batch index 1931
    - source_expr: await Batch.findOne({
        where: {
          id: batchId,
          account_id: accountId
  
    - in_function: BatchService.changeStage

[DEBUG] DUPLICATE #1932:
  File: backend/src/services/batch.service.ts
  Line: 455
  Target: validTransitions: Record<string, string[]>
  First occurrence: batch index 1888
    - source_expr: {
        'germination': ['vegetative', 'destroyed'],
        'vegetative': ['flowering', 'destroy
    - in_function: BatchService.changeStage
  Second occurrence: batch index 1932
    - source_expr: {
        'germination': ['vegetative', 'destroyed'],
        'vegetative': ['flowering', 'destroy
    - in_function: BatchService.changeStage

[DEBUG] DUPLICATE #1933:
  File: backend/src/services/batch.service.ts
  Line: 466
  Target: currentStage
  First occurrence: batch index 1889
    - source_expr: batch.current_stage || 'germination'
    - in_function: BatchService.changeStage
  Second occurrence: batch index 1933
    - source_expr: batch.current_stage || 'germination'
    - in_function: BatchService.changeStage

[DEBUG] DUPLICATE #1934:
  File: backend/src/services/batch.service.ts
  Line: 474
  Target: oldStage
  First occurrence: batch index 1890
    - source_expr: batch.current_stage
    - in_function: BatchService.changeStage
  Second occurrence: batch index 1934
    - source_expr: batch.current_stage
    - in_function: BatchService.changeStage

[DEBUG] DUPLICATE #1935:
  File: backend/src/services/batch.service.ts
  Line: 480
  Target: timestampMap: Record<string, string>
  First occurrence: batch index 1891
    - source_expr: {
        'germination': 'germination_date',
        'vegetative': 'veg_date',
        'flowering
    - in_function: BatchService.changeStage
  Second occurrence: batch index 1935
    - source_expr: {
        'germination': 'germination_date',
        'vegetative': 'veg_date',
        'flowering
    - in_function: BatchService.changeStage

[DEBUG] DUPLICATE #1936:
  File: backend/src/services/batch.service.ts
  Line: 490
  Target: dateField
  First occurrence: batch index 1892
    - source_expr: timestampMap[newStage]
    - in_function: BatchService.changeStage
  Second occurrence: batch index 1936
    - source_expr: timestampMap[newStage]
    - in_function: BatchService.changeStage

[DEBUG] DUPLICATE #1937:
  File: backend/src/services/batch.service.ts
  Line: 493
  Target: batchRecord
  First occurrence: batch index 1893
    - source_expr: batch as unknown as Record<string, unknown>
    - in_function: BatchService.changeStage
  Second occurrence: batch index 1937
    - source_expr: batch as unknown as Record<string, unknown>
    - in_function: BatchService.changeStage

[DEBUG] DUPLICATE #1938:
  File: backend/src/services/batch.service.ts
  Line: 500
  Target: plantService
  First occurrence: batch index 1894
    - source_expr: new PlantService()
    - in_function: BatchService.changeStage
  Second occurrence: batch index 1938
    - source_expr: new PlantService()
    - in_function: BatchService.changeStage

[DEBUG] DUPLICATE #1939:
  File: backend/src/services/batch.service.ts
  Line: 501
  Target: activePlants
  First occurrence: batch index 1895
    - source_expr: await Plant.findAll({
        where: {
          account_id: accountId,
          batch_id: batch
    - in_function: BatchService.changeStage
  Second occurrence: batch index 1939
    - source_expr: await Plant.findAll({
        where: {
          account_id: accountId,
          batch_id: batch
    - in_function: BatchService.changeStage

[DEBUG] DUPLICATE #1940:
  File: backend/src/services/batch.service.ts
  Line: 512
  Target: plantIds
  First occurrence: batch index 1896
    - source_expr: activePlants.map(p => p.id)
    - in_function: BatchService.changeStage
  Second occurrence: batch index 1940
    - source_expr: activePlants.map(p => p.id)
    - in_function: BatchService.changeStage

[DEBUG] DUPLICATE #1941:
  File: backend/src/services/batch.service.ts
  Line: 541
  Target: updatedBatch
  First occurrence: batch index 1897
    - source_expr: await Batch.findOne({
        where: { id: batchId, account_id: accountId },
        include: [
 
    - in_function: BatchService.changeStage
  Second occurrence: batch index 1941
    - source_expr: await Batch.findOne({
        where: { id: batchId, account_id: accountId },
        include: [
 
    - in_function: BatchService.changeStage

[DEBUG] DUPLICATE #1976:
  File: backend/src/services/compliance.report.service.ts
  Line: 126
  Target: queries
  First occurrence: batch index 1942
    - source_expr: await this.buildHierarchicalQueries(filters, transaction)
    - in_function: ComplianceReportService.generateAuditReport
  Second occurrence: batch index 1976
    - source_expr: await this.buildHierarchicalQueries(filters, transaction)
    - in_function: ComplianceReportService.generateAuditReport

[DEBUG] DUPLICATE #1977:
  File: backend/src/services/compliance.report.service.ts
  Line: 129
  Target: [operations, plants, batches, auditLogs, workers, attachments]
  First occurrence: batch index 1943
    - source_expr: await Promise.all([
          this.getOperations(queries.operation, transaction),
          this.g
    - in_function: ComplianceReportService.generateAuditReport
  Second occurrence: batch index 1977
    - source_expr: await Promise.all([
          this.getOperations(queries.operation, transaction),
          this.g
    - in_function: ComplianceReportService.generateAuditReport

[DEBUG] DUPLICATE #1978:
  File: backend/src/services/compliance.report.service.ts
  Line: 139
  Target: metadata
  First occurrence: batch index 1944
    - source_expr: await this.getMetadata(accountId, filters, transaction)
    - in_function: ComplianceReportService.generateAuditReport
  Second occurrence: batch index 1978
    - source_expr: await this.getMetadata(accountId, filters, transaction)
    - in_function: ComplianceReportService.generateAuditReport

[DEBUG] DUPLICATE #1979:
  File: backend/src/services/compliance.report.service.ts
  Line: 177
  Target: queries: Record<string, DynamicWhereClause>
  First occurrence: batch index 1945
    - source_expr: {
      operation: {} as DynamicWhereClause,
      plant: {} as DynamicWhereClause,
      batch: 
    - in_function: ComplianceReportService.buildHierarchicalQueries
  Second occurrence: batch index 1979
    - source_expr: {
      operation: {} as DynamicWhereClause,
      plant: {} as DynamicWhereClause,
      batch: 
    - in_function: ComplianceReportService.buildHierarchicalQueries

[DEBUG] DUPLICATE #1980:
  File: backend/src/services/compliance.report.service.ts
  Line: 188
  Target: dateFilter: { [Op.gte]?: Date; [Op.lte]?: Date }
  First occurrence: batch index 1946
    - source_expr: {}
    - in_function: ComplianceReportService.buildHierarchicalQueries
  Second occurrence: batch index 1980
    - source_expr: {}
    - in_function: ComplianceReportService.buildHierarchicalQueries

[DEBUG] DUPLICATE #1981:
  File: backend/src/services/compliance.report.service.ts
  Line: 203
  Target: areas
  First occurrence: batch index 1947
    - source_expr: await Area.findAll({
        where: { zone_id: filters.zoneId },
        attributes: ['id'],
    
    - in_function: ComplianceReportService.buildHierarchicalQueries
  Second occurrence: batch index 1981
    - source_expr: await Area.findAll({
        where: { zone_id: filters.zoneId },
        attributes: ['id'],
    
    - in_function: ComplianceReportService.buildHierarchicalQueries

[DEBUG] DUPLICATE #1982:
  File: backend/src/services/compliance.report.service.ts
  Line: 208
  Target: areaIds
  First occurrence: batch index 1948
    - source_expr: areas.map(a => a.id)
    - in_function: ComplianceReportService.buildHierarchicalQueries
  Second occurrence: batch index 1982
    - source_expr: areas.map(a => a.id)
    - in_function: ComplianceReportService.buildHierarchicalQueries

[DEBUG] DUPLICATE #1983:
  File: backend/src/services/compliance.report.service.ts
  Line: 216
  Target: zones
  First occurrence: batch index 1949
    - source_expr: await Zone.findAll({
        where: { location_id: filters.locationId },
        include: [{ model
    - in_function: ComplianceReportService.buildHierarchicalQueries
  Second occurrence: batch index 1983
    - source_expr: await Zone.findAll({
        where: { location_id: filters.locationId },
        include: [{ model
    - in_function: ComplianceReportService.buildHierarchicalQueries

[DEBUG] DUPLICATE #1984:
  File: backend/src/services/compliance.report.service.ts
  Line: 222
  Target: areaIds: string[]
  First occurrence: batch index 1950
    - source_expr: []
    - in_function: ComplianceReportService.buildHierarchicalQueries
  Second occurrence: batch index 1984
    - source_expr: []
    - in_function: ComplianceReportService.buildHierarchicalQueries

[DEBUG] DUPLICATE #1985:
  File: backend/src/services/compliance.report.service.ts
  Line: 266
  Target: typedQueries: Record<string, WhereOptions>
  First occurrence: batch index 1951
    - source_expr: {}
    - in_function: ComplianceReportService.buildHierarchicalQueries
  Second occurrence: batch index 1985
    - source_expr: {}
    - in_function: ComplianceReportService.buildHierarchicalQueries

[DEBUG] DUPLICATE #1986:
  File: backend/src/services/compliance.report.service.ts
  Line: 351
  Target: operations
  First occurrence: batch index 1952
    - source_expr: await Operation.findAll({
      where,
      attributes: ['performed_by'],
      group: ['perform
    - in_function: ComplianceReportService.getWorkers
  Second occurrence: batch index 1986
    - source_expr: await Operation.findAll({
      where,
      attributes: ['performed_by'],
      group: ['perform
    - in_function: ComplianceReportService.getWorkers

[DEBUG] DUPLICATE #1987:
  File: backend/src/services/compliance.report.service.ts
  Line: 358
  Target: workerIds
  First occurrence: batch index 1953
    - source_expr: operations.map(op => op.performed_by).filter(id => id)
    - in_function: ComplianceReportService.getWorkers
  Second occurrence: batch index 1987
    - source_expr: operations.map(op => op.performed_by).filter(id => id)
    - in_function: ComplianceReportService.getWorkers

[DEBUG] DUPLICATE #1988:
  File: backend/src/services/compliance.report.service.ts
  Line: 393
  Target: metadata: ReportMetadata
  First occurrence: batch index 1954
    - source_expr: {
      generatedAt: new Date(),
      filters
    }
    - in_function: ComplianceReportService.getMetadata
  Second occurrence: batch index 1988
    - source_expr: {
      generatedAt: new Date(),
      filters
    }
    - in_function: ComplianceReportService.getMetadata

[DEBUG] DUPLICATE #1989:
  File: backend/src/services/compliance.report.service.ts
  Line: 450
  Target: zones
  First occurrence: batch index 1955
    - source_expr: await Zone.findAll({
        where: { location_id: locationId },
        include: [{
          mo
    - in_function: ComplianceReportService.getLocationSummary
  Second occurrence: batch index 1989
    - source_expr: await Zone.findAll({
        where: { location_id: locationId },
        include: [{
          mo
    - in_function: ComplianceReportService.getLocationSummary

[DEBUG] DUPLICATE #1990:
  File: backend/src/services/compliance.report.service.ts
  Line: 460
  Target: totalAreas
  First occurrence: batch index 1956
    - source_expr: 0
    - in_function: ComplianceReportService.getLocationSummary
  Second occurrence: batch index 1990
    - source_expr: 0
    - in_function: ComplianceReportService.getLocationSummary

[DEBUG] DUPLICATE #1991:
  File: backend/src/services/compliance.report.service.ts
  Line: 462
  Target: zoneWithAreas
  First occurrence: batch index 1957
    - source_expr: zone as Zone & { areas?: Area[] }
    - in_function: ComplianceReportService.getLocationSummary
  Second occurrence: batch index 1991
    - source_expr: zone as Zone & { areas?: Area[] }
    - in_function: ComplianceReportService.getLocationSummary

[DEBUG] DUPLICATE #1992:
  File: backend/src/services/compliance.report.service.ts
  Line: 469
  Target: areaIds
  First occurrence: batch index 1958
    - source_expr: zones.flatMap(z => {
        const zoneWithAreas = z as Zone & { areas?: Area[] };
        return 
    - in_function: ComplianceReportService.getLocationSummary
  Second occurrence: batch index 1992
    - source_expr: zones.flatMap(z => {
        const zoneWithAreas = z as Zone & { areas?: Area[] };
        return 
    - in_function: ComplianceReportService.getLocationSummary

[DEBUG] DUPLICATE #1993:
  File: backend/src/services/compliance.report.service.ts
  Line: 470
  Target: zoneWithAreas
  First occurrence: batch index 1959
    - source_expr: z as Zone & { areas?: Area[] }
    - in_function: ComplianceReportService.getLocationSummary
  Second occurrence: batch index 1993
    - source_expr: z as Zone & { areas?: Area[] }
    - in_function: ComplianceReportService.getLocationSummary

[DEBUG] DUPLICATE #1994:
  File: backend/src/services/compliance.report.service.ts
  Line: 473
  Target: plantCount
  First occurrence: batch index 1960
    - source_expr: await Plant.count({
        where: {
          area_id: { [Op.in]: areaIds },
          ...(dateR
    - in_function: ComplianceReportService.getLocationSummary
  Second occurrence: batch index 1994
    - source_expr: await Plant.count({
        where: {
          area_id: { [Op.in]: areaIds },
          ...(dateR
    - in_function: ComplianceReportService.getLocationSummary

[DEBUG] DUPLICATE #1995:
  File: backend/src/services/compliance.report.service.ts
  Line: 487
  Target: batchWhere: WhereOptions
  First occurrence: batch index 1961
    - source_expr: {
        zone_id: { [Op.in]: zones.map(z => z.id) },
        current_stage: { [Op.ne]: 'completed
    - in_function: ComplianceReportService.getLocationSummary
  Second occurrence: batch index 1995
    - source_expr: {
        zone_id: { [Op.in]: zones.map(z => z.id) },
        current_stage: { [Op.ne]: 'completed
    - in_function: ComplianceReportService.getLocationSummary

[DEBUG] DUPLICATE #1996:
  File: backend/src/services/compliance.report.service.ts
  Line: 491
  Target: batches
  First occurrence: batch index 1962
    - source_expr: await Batch.count({
        where: batchWhere,
        transaction
      })
    - in_function: ComplianceReportService.getLocationSummary
  Second occurrence: batch index 1996
    - source_expr: await Batch.count({
        where: batchWhere,
        transaction
      })
    - in_function: ComplianceReportService.getLocationSummary

[DEBUG] DUPLICATE #1997:
  File: backend/src/services/compliance.report.service.ts
  Line: 517
  Target: batch
  First occurrence: batch index 1963
    - source_expr: await Batch.findOne({
        where: { id: batchId, account_id: accountId },
        include: [
 
    - in_function: ComplianceReportService.generateBatchGenealogyReport
  Second occurrence: batch index 1997
    - source_expr: await Batch.findOne({
        where: { id: batchId, account_id: accountId },
        include: [
 
    - in_function: ComplianceReportService.generateBatchGenealogyReport

[DEBUG] DUPLICATE #1998:
  File: backend/src/services/compliance.report.service.ts
  Line: 531
  Target: parentBatch
  First occurrence: batch index 1964
    - source_expr: null
    - in_function: ComplianceReportService.generateBatchGenealogyReport
  Second occurrence: batch index 1998
    - source_expr: null
    - in_function: ComplianceReportService.generateBatchGenealogyReport

[DEBUG] DUPLICATE #1999:
  File: backend/src/services/compliance.report.service.ts
  Line: 541
  Target: childBatches
  First occurrence: batch index 1965
    - source_expr: await Batch.findAll({
        where: {
          source_batch_id: batchId,
          account_id: 
    - in_function: ComplianceReportService.generateBatchGenealogyReport
  Second occurrence: batch index 1999
    - source_expr: await Batch.findAll({
        where: {
          source_batch_id: batchId,
          account_id: 
    - in_function: ComplianceReportService.generateBatchGenealogyReport

[DEBUG] DUPLICATE #2000:
  File: backend/src/services/compliance.report.service.ts
  Line: 552
  Target: operations
  First occurrence: batch index 1966
    - source_expr: await Operation.findAll({
        where: {
          batch_id: batchId,
          deleted_at: { [
    - in_function: ComplianceReportService.generateBatchGenealogyReport
  Second occurrence: batch index 2000
    - source_expr: await Operation.findAll({
        where: {
          batch_id: batchId,
          deleted_at: { [
    - in_function: ComplianceReportService.generateBatchGenealogyReport

[DEBUG] DUPLICATE #2001:
  File: backend/src/services/compliance.report.service.ts
  Line: 586
  Target: operations
  First occurrence: batch index 1967
    - source_expr: await Operation.findAll({
        where: {
          created_at: {
            [Op.between]: [sta
    - in_function: ComplianceReportService.generateOperationSummary
  Second occurrence: batch index 2001
    - source_expr: await Operation.findAll({
        where: {
          created_at: {
            [Op.between]: [sta
    - in_function: ComplianceReportService.generateOperationSummary

[DEBUG] DUPLICATE #2002:
  File: backend/src/services/compliance.report.service.ts
  Line: 597
  Target: byType: Record<string, number>
  First occurrence: batch index 1968
    - source_expr: {}
    - in_function: ComplianceReportService.generateOperationSummary
  Second occurrence: batch index 2002
    - source_expr: {}
    - in_function: ComplianceReportService.generateOperationSummary

[DEBUG] DUPLICATE #2003:
  File: backend/src/services/compliance.report.service.ts
  Line: 598
  Target: byDay: Record<string, number>
  First occurrence: batch index 1969
    - source_expr: {}
    - in_function: ComplianceReportService.generateOperationSummary
  Second occurrence: batch index 2003
    - source_expr: {}
    - in_function: ComplianceReportService.generateOperationSummary

[DEBUG] DUPLICATE #2004:
  File: backend/src/services/compliance.report.service.ts
  Line: 599
  Target: workers: Set<string>
  First occurrence: batch index 1970
    - source_expr: new Set()
    - in_function: ComplianceReportService.generateOperationSummary
  Second occurrence: batch index 2004
    - source_expr: new Set()
    - in_function: ComplianceReportService.generateOperationSummary

[DEBUG] DUPLICATE #2005:
  File: backend/src/services/compliance.report.service.ts
  Line: 606
  Target: day
  First occurrence: batch index 1971
    - source_expr: op.created_at.toISOString().split('T')[0]
    - in_function: ComplianceReportService.generateOperationSummary
  Second occurrence: batch index 2005
    - source_expr: op.created_at.toISOString().split('T')[0]
    - in_function: ComplianceReportService.generateOperationSummary

[DEBUG] DUPLICATE #2006:
  File: backend/src/services/compliance.report.service.ts
  Line: 637
  Target: logs
  First occurrence: batch index 1972
    - source_expr: await AuditLog.findAll({
        where: {
          table_name: entityType,
          record_id: 
    - in_function: ComplianceReportService.getAuditTrail
  Second occurrence: batch index 2006
    - source_expr: await AuditLog.findAll({
        where: {
          table_name: entityType,
          record_id: 
    - in_function: ComplianceReportService.getAuditTrail

[DEBUG] DUPLICATE #2007:
  File: backend/src/services/compliance.report.service.ts
  Line: 648
  Target: currentEntity
  First occurrence: batch index 1973
    - source_expr: null
    - in_function: ComplianceReportService.getAuditTrail
  Second occurrence: batch index 2007
    - source_expr: null
    - in_function: ComplianceReportService.getAuditTrail

[DEBUG] DUPLICATE #2008:
  File: backend/src/services/compliance.report.service.ts
  Line: 649
  Target: modelName
  First occurrence: batch index 1974
    - source_expr: entityType.charAt(0).toUpperCase() + entityType.slice(1)
    - in_function: ComplianceReportService.getAuditTrail
  Second occurrence: batch index 2008
    - source_expr: entityType.charAt(0).toUpperCase() + entityType.slice(1)
    - in_function: ComplianceReportService.getAuditTrail

[DEBUG] DUPLICATE #2009:
  File: backend/src/services/compliance.report.service.ts
  Line: 650
  Target: Model
  First occurrence: batch index 1975
    - source_expr: sequelize.models[modelName]
    - in_function: ComplianceReportService.getAuditTrail
  Second occurrence: batch index 2009
    - source_expr: sequelize.models[modelName]
    - in_function: ComplianceReportService.getAuditTrail

[DEBUG] DUPLICATE #2040:
  File: backend/src/services/dashboard.service.ts
  Line: 111
  Target: totalPlants
  First occurrence: batch index 2011
    - source_expr: await Plant.count({
        where: { account_id: accountId },
        transaction
      })
    - in_function: DashboardService.getDashboardStats
  Second occurrence: batch index 2040
    - source_expr: await Plant.count({
        where: { account_id: accountId },
        transaction
      })
    - in_function: DashboardService.getDashboardStats

[DEBUG] DUPLICATE #2041:
  File: backend/src/services/dashboard.service.ts
  Line: 116
  Target: activePlants
  First occurrence: batch index 2012
    - source_expr: await Plant.count({
        where: {
          account_id: accountId,
          status: 'active'
    - in_function: DashboardService.getDashboardStats
  Second occurrence: batch index 2041
    - source_expr: await Plant.count({
        where: {
          account_id: accountId,
          status: 'active'
    - in_function: DashboardService.getDashboardStats

[DEBUG] DUPLICATE #2042:
  File: backend/src/services/dashboard.service.ts
  Line: 125
  Target: totalBatches
  First occurrence: batch index 2013
    - source_expr: await Batch.count({
        where: { account_id: accountId },
        transaction
      })
    - in_function: DashboardService.getDashboardStats
  Second occurrence: batch index 2042
    - source_expr: await Batch.count({
        where: { account_id: accountId },
        transaction
      })
    - in_function: DashboardService.getDashboardStats

[DEBUG] DUPLICATE #2043:
  File: backend/src/services/dashboard.service.ts
  Line: 130
  Target: activeBatches
  First occurrence: batch index 2014
    - source_expr: await Batch.count({
        where: {
          account_id: accountId
        },
        transact
    - in_function: DashboardService.getDashboardStats
  Second occurrence: batch index 2043
    - source_expr: await Batch.count({
        where: {
          account_id: accountId
        },
        transact
    - in_function: DashboardService.getDashboardStats

[DEBUG] DUPLICATE #2044:
  File: backend/src/services/dashboard.service.ts
  Line: 138
  Target: totalWorkers
  First occurrence: batch index 2015
    - source_expr: await Worker.count({
        where: { account_id: accountId },
        transaction
      })
    - in_function: DashboardService.getDashboardStats
  Second occurrence: batch index 2044
    - source_expr: await Worker.count({
        where: { account_id: accountId },
        transaction
      })
    - in_function: DashboardService.getDashboardStats

[DEBUG] DUPLICATE #2045:
  File: backend/src/services/dashboard.service.ts
  Line: 143
  Target: activeWorkers
  First occurrence: batch index 2016
    - source_expr: await Worker.count({
        where: {
          account_id: accountId,
          is_active: true
    - in_function: DashboardService.getDashboardStats
  Second occurrence: batch index 2045
    - source_expr: await Worker.count({
        where: {
          account_id: accountId,
          is_active: true
    - in_function: DashboardService.getDashboardStats

[DEBUG] DUPLICATE #2046:
  File: backend/src/services/dashboard.service.ts
  Line: 152
  Target: totalFacilities
  First occurrence: batch index 2017
    - source_expr: await Facility.count({
        where: { account_id: accountId },
        transaction
      })
    - in_function: DashboardService.getDashboardStats
  Second occurrence: batch index 2046
    - source_expr: await Facility.count({
        where: { account_id: accountId },
        transaction
      })
    - in_function: DashboardService.getDashboardStats

[DEBUG] DUPLICATE #2047:
  File: backend/src/services/dashboard.service.ts
  Line: 158
  Target: twentyFourHoursAgo
  First occurrence: batch index 2018
    - source_expr: new Date(Date.now() - 24 * 60 * 60 * 1000)
    - in_function: DashboardService.getDashboardStats
  Second occurrence: batch index 2047
    - source_expr: new Date(Date.now() - 24 * 60 * 60 * 1000)
    - in_function: DashboardService.getDashboardStats

[DEBUG] DUPLICATE #2048:
  File: backend/src/services/dashboard.service.ts
  Line: 159
  Target: recentOperations
  First occurrence: batch index 2019
    - source_expr: await Operation.count({
        where: {
          account_id: accountId,
          created_at: {
    - in_function: DashboardService.getDashboardStats
  Second occurrence: batch index 2048
    - source_expr: await Operation.count({
        where: {
          account_id: accountId,
          created_at: {
    - in_function: DashboardService.getDashboardStats

[DEBUG] DUPLICATE #2049:
  File: backend/src/services/dashboard.service.ts
  Line: 168
  Target: pendingHarvests
  First occurrence: batch index 2020
    - source_expr: await Harvest.count({
        where: {
          account_id: accountId
        },
        transa
    - in_function: DashboardService.getDashboardStats
  Second occurrence: batch index 2049
    - source_expr: await Harvest.count({
        where: {
          account_id: accountId
        },
        transa
    - in_function: DashboardService.getDashboardStats

[DEBUG] DUPLICATE #2050:
  File: backend/src/services/dashboard.service.ts
  Line: 175
  Target: totalHarvests
  First occurrence: batch index 2021
    - source_expr: await Harvest.count({
        where: { account_id: accountId },
        transaction
      })
    - in_function: DashboardService.getDashboardStats
  Second occurrence: batch index 2050
    - source_expr: await Harvest.count({
        where: { account_id: accountId },
        transaction
      })
    - in_function: DashboardService.getDashboardStats

[DEBUG] DUPLICATE #2051:
  File: backend/src/services/dashboard.service.ts
  Line: 200
  Target: recentOperations
  First occurrence: batch index 2022
    - source_expr: await Operation.findAll({
        where: { account_id: accountId },
        order: [['created_at',
    - in_function: DashboardService.getRecentActivities
  Second occurrence: batch index 2051
    - source_expr: await Operation.findAll({
        where: { account_id: accountId },
        order: [['created_at',
    - in_function: DashboardService.getRecentActivities

[DEBUG] DUPLICATE #2052:
  File: backend/src/services/dashboard.service.ts
  Line: 225
  Target: performer
  First occurrence: batch index 2023
    - source_expr: op.worker || op.user
    - in_function: DashboardService.getRecentActivities
  Second occurrence: batch index 2052
    - source_expr: op.worker || op.user
    - in_function: DashboardService.getRecentActivities

[DEBUG] DUPLICATE #2053:
  File: backend/src/services/dashboard.service.ts
  Line: 240
  Target: plantsByStage
  First occurrence: batch index 2024
    - source_expr: await sequelize.query(
        `SELECT growth_stage, COUNT(*) as count
         FROM plants
     
    - in_function: DashboardService.getDetailedMetrics
  Second occurrence: batch index 2053
    - source_expr: await sequelize.query(
        `SELECT growth_stage, COUNT(*) as count
         FROM plants
     
    - in_function: DashboardService.getDetailedMetrics

[DEBUG] DUPLICATE #2054:
  File: backend/src/services/dashboard.service.ts
  Line: 253
  Target: stageMetrics
  First occurrence: batch index 2025
    - source_expr: plantsByStage.reduce((acc, curr) => {
        acc[curr.growth_stage] = parseInt(curr.count);
     
    - in_function: DashboardService.getDetailedMetrics
  Second occurrence: batch index 2054
    - source_expr: plantsByStage.reduce((acc, curr) => {
        acc[curr.growth_stage] = parseInt(curr.count);
     
    - in_function: DashboardService.getDetailedMetrics

[DEBUG] DUPLICATE #2055:
  File: backend/src/services/dashboard.service.ts
  Line: 259
  Target: plantsByFacility
  First occurrence: batch index 2026
    - source_expr: await sequelize.query(
        `SELECT f.name, COUNT(p.id) as count
         FROM facilities f
  
    - in_function: DashboardService.getDetailedMetrics
  Second occurrence: batch index 2055
    - source_expr: await sequelize.query(
        `SELECT f.name, COUNT(p.id) as count
         FROM facilities f
  
    - in_function: DashboardService.getDetailedMetrics

[DEBUG] DUPLICATE #2056:
  File: backend/src/services/dashboard.service.ts
  Line: 274
  Target: facilityMetrics
  First occurrence: batch index 2027
    - source_expr: plantsByFacility.reduce((acc, curr) => {
        acc[curr.name] = parseInt(curr.count);
        re
    - in_function: DashboardService.getDetailedMetrics
  Second occurrence: batch index 2056
    - source_expr: plantsByFacility.reduce((acc, curr) => {
        acc[curr.name] = parseInt(curr.count);
        re
    - in_function: DashboardService.getDetailedMetrics

[DEBUG] DUPLICATE #2057:
  File: backend/src/services/dashboard.service.ts
  Line: 280
  Target: healthyPlants
  First occurrence: batch index 2028
    - source_expr: await Plant.count({
        where: {
          account_id: accountId,
          status: 'active'
    - in_function: DashboardService.getDetailedMetrics
  Second occurrence: batch index 2057
    - source_expr: await Plant.count({
        where: {
          account_id: accountId,
          status: 'active'
    - in_function: DashboardService.getDetailedMetrics

[DEBUG] DUPLICATE #2058:
  File: backend/src/services/dashboard.service.ts
  Line: 289
  Target: thirtyDaysAgo
  First occurrence: batch index 2029
    - source_expr: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000)
    - in_function: DashboardService.getDetailedMetrics
  Second occurrence: batch index 2058
    - source_expr: new Date(Date.now() - 30 * 24 * 60 * 60 * 1000)
    - in_function: DashboardService.getDetailedMetrics

[DEBUG] DUPLICATE #2059:
  File: backend/src/services/dashboard.service.ts
  Line: 290
  Target: recentHarvests
  First occurrence: batch index 2030
    - source_expr: await Harvest.findAll({
        where: {
          account_id: accountId,
          harvest_date:
    - in_function: DashboardService.getDetailedMetrics
  Second occurrence: batch index 2059
    - source_expr: await Harvest.findAll({
        where: {
          account_id: accountId,
          harvest_date:
    - in_function: DashboardService.getDetailedMetrics

[DEBUG] DUPLICATE #2060:
  File: backend/src/services/dashboard.service.ts
  Line: 299
  Target: last30DaysCount
  First occurrence: batch index 2031
    - source_expr: recentHarvests.length
    - in_function: DashboardService.getDetailedMetrics
  Second occurrence: batch index 2060
    - source_expr: recentHarvests.length
    - in_function: DashboardService.getDetailedMetrics

[DEBUG] DUPLICATE #2061:
  File: backend/src/services/dashboard.service.ts
  Line: 300
  Target: totalYield
  First occurrence: batch index 2032
    - source_expr: recentHarvests.reduce((sum, h) => sum + (h.wet_weight || 0), 0)
    - in_function: DashboardService.getDetailedMetrics
  Second occurrence: batch index 2061
    - source_expr: recentHarvests.reduce((sum, h) => sum + (h.wet_weight || 0), 0)
    - in_function: DashboardService.getDetailedMetrics

[DEBUG] DUPLICATE #2062:
  File: backend/src/services/dashboard.service.ts
  Line: 301
  Target: averageYield
  First occurrence: batch index 2033
    - source_expr: last30DaysCount > 0 ? totalYield / last30DaysCount : 0
    - in_function: DashboardService.getDetailedMetrics
  Second occurrence: batch index 2062
    - source_expr: last30DaysCount > 0 ? totalYield / last30DaysCount : 0
    - in_function: DashboardService.getDetailedMetrics

[DEBUG] DUPLICATE #2063:
  File: backend/src/services/dashboard.service.ts
  Line: 304
  Target: today
  First occurrence: batch index 2034
    - source_expr: new Date()
    - in_function: DashboardService.getDetailedMetrics
  Second occurrence: batch index 2063
    - source_expr: new Date()
    - in_function: DashboardService.getDetailedMetrics

[DEBUG] DUPLICATE #2064:
  File: backend/src/services/dashboard.service.ts
  Line: 306
  Target: weekAgo
  First occurrence: batch index 2035
    - source_expr: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000)
    - in_function: DashboardService.getDetailedMetrics
  Second occurrence: batch index 2064
    - source_expr: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000)
    - in_function: DashboardService.getDetailedMetrics

[DEBUG] DUPLICATE #2065:
  File: backend/src/services/dashboard.service.ts
  Line: 308
  Target: todayCount
  First occurrence: batch index 2036
    - source_expr: await Operation.count({
        where: {
          account_id: accountId,
          created_at: {
    - in_function: DashboardService.getDetailedMetrics
  Second occurrence: batch index 2065
    - source_expr: await Operation.count({
        where: {
          account_id: accountId,
          created_at: {
    - in_function: DashboardService.getDetailedMetrics

[DEBUG] DUPLICATE #2066:
  File: backend/src/services/dashboard.service.ts
  Line: 316
  Target: weekCount
  First occurrence: batch index 2037
    - source_expr: await Operation.count({
        where: {
          account_id: accountId,
          created_at: {
    - in_function: DashboardService.getDetailedMetrics
  Second occurrence: batch index 2066
    - source_expr: await Operation.count({
        where: {
          account_id: accountId,
          created_at: {
    - in_function: DashboardService.getDetailedMetrics

[DEBUG] DUPLICATE #2067:
  File: backend/src/services/dashboard.service.ts
  Line: 324
  Target: operationsByType
  First occurrence: batch index 2038
    - source_expr: await sequelize.query(
        `SELECT type, COUNT(*) as count
         FROM operations
         
    - in_function: DashboardService.getDetailedMetrics
  Second occurrence: batch index 2067
    - source_expr: await sequelize.query(
        `SELECT type, COUNT(*) as count
         FROM operations
         
    - in_function: DashboardService.getDetailedMetrics

[DEBUG] DUPLICATE #2068:
  File: backend/src/services/dashboard.service.ts
  Line: 337
  Target: typeMetrics
  First occurrence: batch index 2039
    - source_expr: operationsByType.reduce((acc, curr) => {
        acc[curr.type] = parseInt(curr.count);
        re
    - in_function: DashboardService.getDetailedMetrics
  Second occurrence: batch index 2068
    - source_expr: operationsByType.reduce((acc, curr) => {
        acc[curr.type] = parseInt(curr.count);
        re
    - in_function: DashboardService.getDetailedMetrics

[DEBUG] DUPLICATE #2085:
  File: backend/src/services/destruction.service.ts
  Line: 29
  Target: batch
  First occurrence: batch index 2069
    - source_expr: await Batch.findOne({
        where: {
          id: data.batch_id,
          account_id: account
    - in_function: DestructionService.createDestruction
  Second occurrence: batch index 2085
    - source_expr: await Batch.findOne({
        where: {
          id: data.batch_id,
          account_id: account
    - in_function: DestructionService.createDestruction

[DEBUG] DUPLICATE #2086:
  File: backend/src/services/destruction.service.ts
  Line: 43
  Target: witness
  First occurrence: batch index 2070
    - source_expr: await User.findOne({
          where: {
            id: data.witnessed_by,
            account_id
    - in_function: DestructionService.createDestruction
  Second occurrence: batch index 2086
    - source_expr: await User.findOne({
          where: {
            id: data.witnessed_by,
            account_id
    - in_function: DestructionService.createDestruction

[DEBUG] DUPLICATE #2087:
  File: backend/src/services/destruction.service.ts
  Line: 73
  Target: destruction
  First occurrence: batch index 2071
    - source_expr: await Destruction.create({
        account_id: accountId,
        batch_id: data.batch_id,
      
    - in_function: DestructionService.createDestruction
  Second occurrence: batch index 2087
    - source_expr: await Destruction.create({
        account_id: accountId,
        batch_id: data.batch_id,
      
    - in_function: DestructionService.createDestruction

[DEBUG] DUPLICATE #2088:
  File: backend/src/services/destruction.service.ts
  Line: 122
  Target: destruction
  First occurrence: batch index 2072
    - source_expr: await Destruction.findOne({
      where: {
        id: destructionId,
        account_id: account
    - in_function: DestructionService.getDestruction
  Second occurrence: batch index 2088
    - source_expr: await Destruction.findOne({
      where: {
        id: destructionId,
        account_id: account
    - in_function: DestructionService.getDestruction

[DEBUG] DUPLICATE #2089:
  File: backend/src/services/destruction.service.ts
  Line: 169
  Target: whereClause: WhereOptions<DestructionAttributes>
  First occurrence: batch index 2073
    - source_expr: { account_id: accountId }
    - in_function: DestructionService.listDestructions
  Second occurrence: batch index 2089
    - source_expr: { account_id: accountId }
    - in_function: DestructionService.listDestructions

[DEBUG] DUPLICATE #2090:
  File: backend/src/services/destruction.service.ts
  Line: 176
  Target: destructionDateConditions: Record<symbol, Date>
  First occurrence: batch index 2074
    - source_expr: {}
    - in_function: DestructionService.listDestructions
  Second occurrence: batch index 2090
    - source_expr: {}
    - in_function: DestructionService.listDestructions

[DEBUG] DUPLICATE #2091:
  File: backend/src/services/destruction.service.ts
  Line: 186
  Target: { count, rows }
  First occurrence: batch index 2075
    - source_expr: await Destruction.findAndCountAll({
      where: whereClause,
      include: [
        {
       
    - in_function: DestructionService.listDestructions
  Second occurrence: batch index 2091
    - source_expr: await Destruction.findAndCountAll({
      where: whereClause,
      include: [
        {
       
    - in_function: DestructionService.listDestructions

[DEBUG] DUPLICATE #2092:
  File: backend/src/services/destruction.service.ts
  Line: 218
  Target: whereClause: WhereOptions<DestructionAttributes>
  First occurrence: batch index 2076
    - source_expr: { account_id: accountId }
    - in_function: DestructionService.getDestructionStats
  Second occurrence: batch index 2092
    - source_expr: { account_id: accountId }
    - in_function: DestructionService.getDestructionStats

[DEBUG] DUPLICATE #2093:
  File: backend/src/services/destruction.service.ts
  Line: 221
  Target: destructionDateConditions: Record<symbol, Date>
  First occurrence: batch index 2077
    - source_expr: {}
    - in_function: DestructionService.getDestructionStats
  Second occurrence: batch index 2093
    - source_expr: {}
    - in_function: DestructionService.getDestructionStats

[DEBUG] DUPLICATE #2094:
  File: backend/src/services/destruction.service.ts
  Line: 231
  Target: destructions
  First occurrence: batch index 2078
    - source_expr: await Destruction.findAll({
      where: whereClause,
      limit: 1000 // Reasonable limit for st
    - in_function: DestructionService.getDestructionStats
  Second occurrence: batch index 2094
    - source_expr: await Destruction.findAll({
      where: whereClause,
      limit: 1000 // Reasonable limit for st
    - in_function: DestructionService.getDestructionStats

[DEBUG] DUPLICATE #2095:
  File: backend/src/services/destruction.service.ts
  Line: 236
  Target: stats
  First occurrence: batch index 2079
    - source_expr: {
      total_destructions: destructions.length,
      by_reason: {} as { [key: string]: number },
    - in_function: DestructionService.getDestructionStats
  Second occurrence: batch index 2095
    - source_expr: {
      total_destructions: destructions.length,
      by_reason: {} as { [key: string]: number },
    - in_function: DestructionService.getDestructionStats

[DEBUG] DUPLICATE #2096:
  File: backend/src/services/destruction.service.ts
  Line: 269
  Target: whereClause: WhereOptions<DestructionAttributes>
  First occurrence: batch index 2080
    - source_expr: {
      account_id: accountId,
      destruction_date: {
        $gte: filters.start_date,
     
    - in_function: DestructionService.exportDestructionReport
  Second occurrence: batch index 2096
    - source_expr: {
      account_id: accountId,
      destruction_date: {
        $gte: filters.start_date,
     
    - in_function: DestructionService.exportDestructionReport

[DEBUG] DUPLICATE #2097:
  File: backend/src/services/destruction.service.ts
  Line: 281
  Target: destructions
  First occurrence: batch index 2081
    - source_expr: await Destruction.findAll({
      where: whereClause,
      include: [
        {
          model
    - in_function: DestructionService.exportDestructionReport
  Second occurrence: batch index 2097
    - source_expr: await Destruction.findAll({
      where: whereClause,
      include: [
        {
          model
    - in_function: DestructionService.exportDestructionReport

[DEBUG] DUPLICATE #2098:
  File: backend/src/services/destruction.service.ts
  Line: 331
  Target: issues: string[]
  First occurrence: batch index 2082
    - source_expr: []
    - in_function: DestructionService./**
   * Validate destruction meets GACP requirements
   */
  validateGACPCompliance
  Second occurrence: batch index 2098
    - source_expr: []
    - in_function: DestructionService./**
   * Validate destruction meets GACP requirements
   */
  validateGACPCompliance

[DEBUG] DUPLICATE #2099:
  File: backend/src/services/destruction.service.ts
  Line: 334
  Target: validReasons
  First occurrence: batch index 2083
    - source_expr: ['disease', 'pest', 'quality', 'regulatory', 'contamination', 'other']
    - in_function: DestructionService./**
   * Validate destruction meets GACP requirements
   */
  validateGACPCompliance
  Second occurrence: batch index 2099
    - source_expr: ['disease', 'pest', 'quality', 'regulatory', 'contamination', 'other']
    - in_function: DestructionService./**
   * Validate destruction meets GACP requirements
   */
  validateGACPCompliance

[DEBUG] DUPLICATE #2100:
  File: backend/src/services/destruction.service.ts
  Line: 335
  Target: validMethods
  First occurrence: batch index 2084
    - source_expr: ['burning', 'composting', 'chemical', 'shredding', 'burial']
    - in_function: DestructionService./**
   * Validate destruction meets GACP requirements
   */
  validateGACPCompliance
  Second occurrence: batch index 2100
    - source_expr: ['burning', 'composting', 'chemical', 'shredding', 'burial']
    - in_function: DestructionService./**
   * Validate destruction meets GACP requirements
   */
  validateGACPCompliance

[DEBUG] DUPLICATE #2120:
  File: backend/src/services/email.service.ts
  Line: 71
  Target: redisConnection
  First occurrence: batch index 2101
    - source_expr: new IORedis({
      host: process.env.REDIS_HOST || 'localhost',
      port: parseInt(process.env.
    - in_function: constructor
  Second occurrence: batch index 2120
    - source_expr: new IORedis({
      host: process.env.REDIS_HOST || 'localhost',
      port: parseInt(process.env.
    - in_function: constructor

[DEBUG] DUPLICATE #2121:
  File: backend/src/services/email.service.ts
  Line: 102
  Target: { to, template, data }
  First occurrence: batch index 2102
    - source_expr: job.data
    - in_function: constructor
  Second occurrence: batch index 2121
    - source_expr: job.data
    - in_function: constructor

[DEBUG] DUPLICATE #2122:
  File: backend/src/services/email.service.ts
  Line: 194
  Target: job
  First occurrence: batch index 2103
    - source_expr: await this.emailQueue.add(
      'send-email',
      {
        to,
        template,
        da
    - in_function: EmailService.queueEmail
  Second occurrence: batch index 2122
    - source_expr: await this.emailQueue.add(
      'send-email',
      {
        to,
        template,
        da
    - in_function: EmailService.queueEmail

[DEBUG] DUPLICATE #2123:
  File: backend/src/services/email.service.ts
  Line: 219
  Target: compiledTemplate
  First occurrence: batch index 2104
    - source_expr: this.templates.get(template)
    - in_function: EmailService.sendImmediate
  Second occurrence: batch index 2123
    - source_expr: this.templates.get(template)
    - in_function: EmailService.sendImmediate

[DEBUG] DUPLICATE #2124:
  File: backend/src/services/email.service.ts
  Line: 224
  Target: html
  First occurrence: batch index 2105
    - source_expr: compiledTemplate(data)
    - in_function: EmailService.sendImmediate
  Second occurrence: batch index 2124
    - source_expr: compiledTemplate(data)
    - in_function: EmailService.sendImmediate

[DEBUG] DUPLICATE #2125:
  File: backend/src/services/email.service.ts
  Line: 225
  Target: subject
  First occurrence: batch index 2106
    - source_expr: this.getSubject(template, data)
    - in_function: EmailService.sendImmediate
  Second occurrence: batch index 2125
    - source_expr: this.getSubject(template, data)
    - in_function: EmailService.sendImmediate

[DEBUG] DUPLICATE #2126:
  File: backend/src/services/email.service.ts
  Line: 227
  Target: mailOptions
  First occurrence: batch index 2107
    - source_expr: {
      from: `"${process.env.EMAIL_FROM_NAME || 'PlantPro'}" <${process.env.EMAIL_FROM || 'noreply
    - in_function: EmailService.sendImmediate
  Second occurrence: batch index 2126
    - source_expr: {
      from: `"${process.env.EMAIL_FROM_NAME || 'PlantPro'}" <${process.env.EMAIL_FROM || 'noreply
    - in_function: EmailService.sendImmediate

[DEBUG] DUPLICATE #2127:
  File: backend/src/services/email.service.ts
  Line: 236
  Target: info
  First occurrence: batch index 2108
    - source_expr: await this.transporter.sendMail(mailOptions) as { messageId: string }
    - in_function: EmailService.sendImmediate
  Second occurrence: batch index 2127
    - source_expr: await this.transporter.sendMail(mailOptions) as { messageId: string }
    - in_function: EmailService.sendImmediate

[DEBUG] DUPLICATE #2128:
  File: backend/src/services/email.service.ts
  Line: 251
  Target: templatesDir
  First occurrence: batch index 2109
    - source_expr: path.join(__dirname, '../templates/email')
    - in_function: EmailService.loadTemplates
  Second occurrence: batch index 2128
    - source_expr: path.join(__dirname, '../templates/email')
    - in_function: EmailService.loadTemplates

[DEBUG] DUPLICATE #2129:
  File: backend/src/services/email.service.ts
  Line: 254
  Target: templateFiles
  First occurrence: batch index 2110
    - source_expr: fs.readdirSync(templatesDir)
    - in_function: EmailService.loadTemplates
  Second occurrence: batch index 2129
    - source_expr: fs.readdirSync(templatesDir)
    - in_function: EmailService.loadTemplates

[DEBUG] DUPLICATE #2130:
  File: backend/src/services/email.service.ts
  Line: 258
  Target: templateName
  First occurrence: batch index 2111
    - source_expr: file.replace('.hbs', '')
    - in_function: EmailService.loadTemplates
  Second occurrence: batch index 2130
    - source_expr: file.replace('.hbs', '')
    - in_function: EmailService.loadTemplates

[DEBUG] DUPLICATE #2131:
  File: backend/src/services/email.service.ts
  Line: 259
  Target: templatePath
  First occurrence: batch index 2112
    - source_expr: path.join(templatesDir, file)
    - in_function: EmailService.loadTemplates
  Second occurrence: batch index 2131
    - source_expr: path.join(templatesDir, file)
    - in_function: EmailService.loadTemplates

[DEBUG] DUPLICATE #2132:
  File: backend/src/services/email.service.ts
  Line: 260
  Target: templateContent
  First occurrence: batch index 2113
    - source_expr: fs.readFileSync(templatePath, 'utf-8')
    - in_function: EmailService.loadTemplates
  Second occurrence: batch index 2132
    - source_expr: fs.readFileSync(templatePath, 'utf-8')
    - in_function: EmailService.loadTemplates

[DEBUG] DUPLICATE #2133:
  File: backend/src/services/email.service.ts
  Line: 261
  Target: compiledTemplate
  First occurrence: batch index 2114
    - source_expr: handlebars.compile(templateContent)
    - in_function: EmailService.loadTemplates
  Second occurrence: batch index 2133
    - source_expr: handlebars.compile(templateContent)
    - in_function: EmailService.loadTemplates

[DEBUG] DUPLICATE #2134:
  File: backend/src/services/email.service.ts
  Line: 308
  Target: subjects: Record<string, string>
  First occurrence: batch index 2115
    - source_expr: {
      'operation-complete': `Operation ${data.operationType} completed`,
      'compliance-alert
    - in_function: EmailService.getSubject
  Second occurrence: batch index 2134
    - source_expr: {
      'operation-complete': `Operation ${data.operationType} completed`,
      'compliance-alert
    - in_function: EmailService.getSubject

[DEBUG] DUPLICATE #2135:
  File: backend/src/services/email.service.ts
  Line: 325
  Target: priorities: Record<EmailTemplate, number>
  First occurrence: batch index 2116
    - source_expr: {
      'compliance-alert': 1, // Highest priority
      'password-reset': 2,
      'operation-co
    - in_function: EmailService.getPriority
  Second occurrence: batch index 2135
    - source_expr: {
      'compliance-alert': 1, // Highest priority
      'password-reset': 2,
      'operation-co
    - in_function: EmailService.getPriority

[DEBUG] DUPLICATE #2136:
  File: backend/src/services/email.service.ts
  Line: 350
  Target: data
  First occurrence: batch index 2117
    - source_expr: {
        to,
        template,
        messageId,
        sentAt: new Date()
      }
    - in_function: EmailService.auditEmail
  Second occurrence: batch index 2136
    - source_expr: {
        to,
        template,
        messageId,
        sentAt: new Date()
      }
    - in_function: EmailService.auditEmail

[DEBUG] DUPLICATE #2137:
  File: backend/src/services/email.service.ts
  Line: 357
  Target: checksum
  First occurrence: batch index 2118
    - source_expr: crypto
        .createHash('sha256')
        .update(JSON.stringify(data))
        .digest('hex')
    - in_function: EmailService.auditEmail
  Second occurrence: batch index 2137
    - source_expr: crypto
        .createHash('sha256')
        .update(JSON.stringify(data))
        .digest('hex')
    - in_function: EmailService.auditEmail

[DEBUG] DUPLICATE #2138:
  File: backend/src/services/email.service.ts
  Line: 388
  Target: [waiting, active, completed, failed, delayed]
  First occurrence: batch index 2119
    - source_expr: await Promise.all([
      this.emailQueue.getWaitingCount(),
      this.emailQueue.getActiveCount(
    - in_function: EmailService.getQueueStatus
  Second occurrence: batch index 2138
    - source_expr: await Promise.all([
      this.emailQueue.getWaitingCount(),
      this.emailQueue.getActiveCount(
    - in_function: EmailService.getQueueStatus

[DEBUG] DUPLICATE #2160:
  File: backend/src/services/export.service.ts
  Line: 56
  Target: plants
  First occurrence: batch index 2140
    - source_expr: await Plant.findAll({
          where: filters,
          include: [
            {
             
    - in_function: ExportService.exportPlants
  Second occurrence: batch index 2160
    - source_expr: await Plant.findAll({
          where: filters,
          include: [
            {
             
    - in_function: ExportService.exportPlants

[DEBUG] DUPLICATE #2161:
  File: backend/src/services/export.service.ts
  Line: 69
  Target: data
  First occurrence: batch index 2141
    - source_expr: plants.map((plant) => ({
          plant_code: plant.plant_code,
          batch_number: plant.bat
    - in_function: ExportService.exportPlants
  Second occurrence: batch index 2161
    - source_expr: plants.map((plant) => ({
          plant_code: plant.plant_code,
          batch_number: plant.bat
    - in_function: ExportService.exportPlants

[DEBUG] DUPLICATE #2162:
  File: backend/src/services/export.service.ts
  Line: 92
  Target: csv
  First occurrence: batch index 2142
    - source_expr: Papa.unparse(data, {
          header: options.includeHeaders !== false
        })
    - in_function: ExportService.exportPlants
  Second occurrence: batch index 2162
    - source_expr: Papa.unparse(data, {
          header: options.includeHeaders !== false
        })
    - in_function: ExportService.exportPlants

[DEBUG] DUPLICATE #2163:
  File: backend/src/services/export.service.ts
  Line: 114
  Target: batches
  First occurrence: batch index 2143
    - source_expr: await Batch.findAll({
          where: filters,
          include: [
            { model: Genetic
    - in_function: ExportService.exportBatches
  Second occurrence: batch index 2163
    - source_expr: await Batch.findAll({
          where: filters,
          include: [
            { model: Genetic
    - in_function: ExportService.exportBatches

[DEBUG] DUPLICATE #2164:
  File: backend/src/services/export.service.ts
  Line: 124
  Target: data
  First occurrence: batch index 2144
    - source_expr: batches.map((batch) => ({
          batch_number: batch.batch_number,
          strain_name: batch
    - in_function: ExportService.exportBatches
  Second occurrence: batch index 2164
    - source_expr: batches.map((batch) => ({
          batch_number: batch.batch_number,
          strain_name: batch
    - in_function: ExportService.exportBatches

[DEBUG] DUPLICATE #2165:
  File: backend/src/services/export.service.ts
  Line: 150
  Target: csv
  First occurrence: batch index 2145
    - source_expr: Papa.unparse(data, {
          header: options.includeHeaders !== false
        })
    - in_function: ExportService.exportBatches
  Second occurrence: batch index 2165
    - source_expr: Papa.unparse(data, {
          header: options.includeHeaders !== false
        })
    - in_function: ExportService.exportBatches

[DEBUG] DUPLICATE #2166:
  File: backend/src/services/export.service.ts
  Line: 172
  Target: operations
  First occurrence: batch index 2146
    - source_expr: await Operation.findAll({
          where: filters,
          include: [
            { model: Wor
    - in_function: ExportService.exportOperations
  Second occurrence: batch index 2166
    - source_expr: await Operation.findAll({
          where: filters,
          include: [
            { model: Wor
    - in_function: ExportService.exportOperations

[DEBUG] DUPLICATE #2167:
  File: backend/src/services/export.service.ts
  Line: 184
  Target: data
  First occurrence: batch index 2147
    - source_expr: operations.map((op) => {
          const opData = op.data_json as OperationData;
          return 
    - in_function: ExportService.exportOperations
  Second occurrence: batch index 2167
    - source_expr: operations.map((op) => {
          const opData = op.data_json as OperationData;
          return 
    - in_function: ExportService.exportOperations

[DEBUG] DUPLICATE #2168:
  File: backend/src/services/export.service.ts
  Line: 185
  Target: opData
  First occurrence: batch index 2148
    - source_expr: op.data_json as OperationData
    - in_function: ExportService.exportOperations
  Second occurrence: batch index 2168
    - source_expr: op.data_json as OperationData
    - in_function: ExportService.exportOperations

[DEBUG] DUPLICATE #2169:
  File: backend/src/services/export.service.ts
  Line: 204
  Target: csv
  First occurrence: batch index 2149
    - source_expr: Papa.unparse(data, {
          header: options.includeHeaders !== false
        })
    - in_function: ExportService.exportOperations
  Second occurrence: batch index 2169
    - source_expr: Papa.unparse(data, {
          header: options.includeHeaders !== false
        })
    - in_function: ExportService.exportOperations

[DEBUG] DUPLICATE #2170:
  File: backend/src/services/export.service.ts
  Line: 226
  Target: logs
  First occurrence: batch index 2150
    - source_expr: await AuditLog.findAll({
          where: filters,
          order: [['created_at', 'DESC']],
   
    - in_function: ExportService.exportAuditLogs
  Second occurrence: batch index 2170
    - source_expr: await AuditLog.findAll({
          where: filters,
          order: [['created_at', 'DESC']],
   
    - in_function: ExportService.exportAuditLogs

[DEBUG] DUPLICATE #2171:
  File: backend/src/services/export.service.ts
  Line: 233
  Target: data
  First occurrence: batch index 2151
    - source_expr: logs.map((log) => ({
          timestamp: this.formatDateTime(log.timestamp),
          operation:
    - in_function: ExportService.exportAuditLogs
  Second occurrence: batch index 2171
    - source_expr: logs.map((log) => ({
          timestamp: this.formatDateTime(log.timestamp),
          operation:
    - in_function: ExportService.exportAuditLogs

[DEBUG] DUPLICATE #2172:
  File: backend/src/services/export.service.ts
  Line: 249
  Target: csv
  First occurrence: batch index 2152
    - source_expr: Papa.unparse(data, {
          header: options.includeHeaders !== false
        })
    - in_function: ExportService.exportAuditLogs
  Second occurrence: batch index 2172
    - source_expr: Papa.unparse(data, {
          header: options.includeHeaders !== false
        })
    - in_function: ExportService.exportAuditLogs

[DEBUG] DUPLICATE #2173:
  File: backend/src/services/export.service.ts
  Line: 270
  Target: genetics
  First occurrence: batch index 2153
    - source_expr: await Genetics.findAll({
          where: { is_active: true },
          transaction
        })
    - in_function: ExportService.exportGenetics
  Second occurrence: batch index 2173
    - source_expr: await Genetics.findAll({
          where: { is_active: true },
          transaction
        })
    - in_function: ExportService.exportGenetics

[DEBUG] DUPLICATE #2174:
  File: backend/src/services/export.service.ts
  Line: 275
  Target: data
  First occurrence: batch index 2154
    - source_expr: genetics.map((g) => ({
          name: g.name,
          strain_name: g.strain_name || g.name,
  
    - in_function: ExportService.exportGenetics
  Second occurrence: batch index 2174
    - source_expr: genetics.map((g) => ({
          name: g.name,
          strain_name: g.strain_name || g.name,
  
    - in_function: ExportService.exportGenetics

[DEBUG] DUPLICATE #2175:
  File: backend/src/services/export.service.ts
  Line: 300
  Target: csv
  First occurrence: batch index 2155
    - source_expr: Papa.unparse(data, {
          header: options.includeHeaders !== false
        })
    - in_function: ExportService.exportGenetics
  Second occurrence: batch index 2175
    - source_expr: Papa.unparse(data, {
          header: options.includeHeaders !== false
        })
    - in_function: ExportService.exportGenetics

[DEBUG] DUPLICATE #2176:
  File: backend/src/services/export.service.ts
  Line: 322
  Target: locations
  First occurrence: batch index 2156
    - source_expr: await Location.findAll({
          where: { facility_id: facilityId },
          include: [{
    
    - in_function: ExportService.exportLocationHierarchy
  Second occurrence: batch index 2176
    - source_expr: await Location.findAll({
          where: { facility_id: facilityId },
          include: [{
    
    - in_function: ExportService.exportLocationHierarchy

[DEBUG] DUPLICATE #2177:
  File: backend/src/services/export.service.ts
  Line: 335
  Target: data: ExportRecord[]
  First occurrence: batch index 2157
    - source_expr: []
    - in_function: ExportService.exportLocationHierarchy
  Second occurrence: batch index 2177
    - source_expr: []
    - in_function: ExportService.exportLocationHierarchy

[DEBUG] DUPLICATE #2178:
  File: backend/src/services/export.service.ts
  Line: 341
  Target: locationWithZones
  First occurrence: batch index 2158
    - source_expr: location as LocationWithZones
    - in_function: ExportService.exportLocationHierarchy
  Second occurrence: batch index 2178
    - source_expr: location as LocationWithZones
    - in_function: ExportService.exportLocationHierarchy

[DEBUG] DUPLICATE #2179:
  File: backend/src/services/export.service.ts
  Line: 364
  Target: csv
  First occurrence: batch index 2159
    - source_expr: Papa.unparse(data, {
          header: options.includeHeaders !== false
        })
    - in_function: ExportService.exportLocationHierarchy
  Second occurrence: batch index 2179
    - source_expr: Papa.unparse(data, {
          header: options.includeHeaders !== false
        })
    - in_function: ExportService.exportLocationHierarchy

[DEBUG] DUPLICATE #2188:
  File: backend/src/services/facility.service.ts
  Line: 23
  Target: existing
  First occurrence: batch index 2181
    - source_expr: await Facility.findOne({
      where: { license_number: data.license_number },
      transaction

    - in_function: FacilityService.beforeCreate
  Second occurrence: batch index 2188
    - source_expr: await Facility.findOne({
      where: { license_number: data.license_number },
      transaction

    - in_function: FacilityService.beforeCreate

[DEBUG] DUPLICATE #2189:
  File: backend/src/services/facility.service.ts
  Line: 85
  Target: whereClause: WhereOptions<FacilityAttributes>
  First occurrence: batch index 2182
    - source_expr: {}
    - in_function: FacilityService.listFacilities
  Second occurrence: batch index 2189
    - source_expr: {}
    - in_function: FacilityService.listFacilities

[DEBUG] DUPLICATE #2190:
  File: backend/src/services/facility.service.ts
  Line: 91
  Target: result
  First occurrence: batch index 2183
    - source_expr: await this.findAll(accountId, {
      where: whereClause,
      limit: options?.limit || 20,
    
    - in_function: FacilityService.listFacilities
  Second occurrence: batch index 2190
    - source_expr: await this.findAll(accountId, {
      where: whereClause,
      limit: options?.limit || 20,
    
    - in_function: FacilityService.listFacilities

[DEBUG] DUPLICATE #2191:
  File: backend/src/services/facility.service.ts
  Line: 111
  Target: existing
  First occurrence: batch index 2184
    - source_expr: await Facility.findOne({
        where: { license_number: data.license_number },
        transacti
    - in_function: FacilityService.beforeUpdate
  Second occurrence: batch index 2191
    - source_expr: await Facility.findOne({
        where: { license_number: data.license_number },
        transacti
    - in_function: FacilityService.beforeUpdate

[DEBUG] DUPLICATE #2192:
  File: backend/src/services/facility.service.ts
  Line: 152
  Target: words
  First occurrence: batch index 2185
    - source_expr: name.split(' ').filter(w => w.length > 0)
    - in_function: FacilityService.generateFacilityCode
  Second occurrence: batch index 2192
    - source_expr: name.split(' ').filter(w => w.length > 0)
    - in_function: FacilityService.generateFacilityCode

[DEBUG] DUPLICATE #2193:
  File: backend/src/services/facility.service.ts
  Line: 153
  Target: code
  First occurrence: batch index 2186
    - source_expr: ''
    - in_function: FacilityService.generateFacilityCode
  Second occurrence: batch index 2193
    - source_expr: ''
    - in_function: FacilityService.generateFacilityCode

[DEBUG] DUPLICATE #2194:
  File: backend/src/services/facility.service.ts
  Line: 183
  Target: patterns
  First occurrence: batch index 2187
    - source_expr: [
      /^[ก-ฮ]\.\d{1,2}-\d{5}\/\d{4}$/,  // Thai format
      /^FDA-\d{4}-\d{6}$/,               
    - in_function: FacilityService./**
   * Validate Thai FDA license format
   * Note: This is a utility method that doesn't need tenant context
   */
  validateLicense
  Second occurrence: batch index 2194
    - source_expr: [
      /^[ก-ฮ]\.\d{1,2}-\d{5}\/\d{4}$/,  // Thai format
      /^FDA-\d{4}-\d{6}$/,               
    - in_function: FacilityService./**
   * Validate Thai FDA license format
   * Note: This is a utility method that doesn't need tenant context
   */
  validateLicense

[DEBUG] DUPLICATE #2210:
  File: backend/src/services/genetics.service.ts
  Line: 21
  Target: existing
  First occurrence: batch index 2195
    - source_expr: await Genetics.findOne({
      where: {
        account_id: accountId,
        name: data.name
     
    - in_function: GeneticsService.beforeCreate
  Second occurrence: batch index 2210
    - source_expr: await Genetics.findOne({
      where: {
        account_id: accountId,
        name: data.name
     
    - in_function: GeneticsService.beforeCreate

[DEBUG] DUPLICATE #2211:
  File: backend/src/services/genetics.service.ts
  Line: 43
  Target: existing
  First occurrence: batch index 2196
    - source_expr: await Genetics.findOne({
        where: {
          account_id: genetics.account_id,
          name:
    - in_function: GeneticsService.beforeUpdate
  Second occurrence: batch index 2211
    - source_expr: await Genetics.findOne({
        where: {
          account_id: genetics.account_id,
          name:
    - in_function: GeneticsService.beforeUpdate

[DEBUG] DUPLICATE #2212:
  File: backend/src/services/genetics.service.ts
  Line: 106
  Target: whereClause: WhereOptions<GeneticsAttributes>
  First occurrence: batch index 2197
    - source_expr: {}
    - in_function: GeneticsService.listGenetics
  Second occurrence: batch index 2212
    - source_expr: {}
    - in_function: GeneticsService.listGenetics

[DEBUG] DUPLICATE #2213:
  File: backend/src/services/genetics.service.ts
  Line: 114
  Target: result
  First occurrence: batch index 2198
    - source_expr: await this.findAll(accountId, {
      where: whereClause,
      limit: filters.limit || 50,
      of
    - in_function: GeneticsService.listGenetics
  Second occurrence: batch index 2213
    - source_expr: await this.findAll(accountId, {
      where: whereClause,
      limit: filters.limit || 50,
      of
    - in_function: GeneticsService.listGenetics

[DEBUG] DUPLICATE #2214:
  File: backend/src/services/genetics.service.ts
  Line: 144
  Target: genetics
  First occurrence: batch index 2199
    - source_expr: await this.findById(accountId, geneticsId)
    - in_function: GeneticsService.checkInventoryAvailable
  Second occurrence: batch index 2214
    - source_expr: await this.findById(accountId, geneticsId)
    - in_function: GeneticsService.checkInventoryAvailable

[DEBUG] DUPLICATE #2215:
  File: backend/src/services/genetics.service.ts
  Line: 164
  Target: genetics
  First occurrence: batch index 2200
    - source_expr: await this.findById(accountId, geneticsId)
    - in_function: GeneticsService.depleteInventory
  Second occurrence: batch index 2215
    - source_expr: await this.findById(accountId, geneticsId)
    - in_function: GeneticsService.depleteInventory

[DEBUG] DUPLICATE #2216:
  File: backend/src/services/genetics.service.ts
  Line: 174
  Target: newQuantityRemaining
  First occurrence: batch index 2201
    - source_expr: (genetics.quantity_remaining || 0) - quantity
    - in_function: GeneticsService.depleteInventory
  Second occurrence: batch index 2216
    - source_expr: (genetics.quantity_remaining || 0) - quantity
    - in_function: GeneticsService.depleteInventory

[DEBUG] DUPLICATE #2217:
  File: backend/src/services/genetics.service.ts
  Line: 175
  Target: newQuantityPlanted
  First occurrence: batch index 2202
    - source_expr: (genetics.quantity_planted || 0) + quantity
    - in_function: GeneticsService.depleteInventory
  Second occurrence: batch index 2217
    - source_expr: (genetics.quantity_planted || 0) + quantity
    - in_function: GeneticsService.depleteInventory

[DEBUG] DUPLICATE #2218:
  File: backend/src/services/genetics.service.ts
  Line: 199
  Target: genetics
  First occurrence: batch index 2203
    - source_expr: await this.findById(accountId, geneticsId)
    - in_function: GeneticsService.returnInventory
  Second occurrence: batch index 2218
    - source_expr: await this.findById(accountId, geneticsId)
    - in_function: GeneticsService.returnInventory

[DEBUG] DUPLICATE #2219:
  File: backend/src/services/genetics.service.ts
  Line: 202
  Target: newQuantityRemaining
  First occurrence: batch index 2204
    - source_expr: (genetics.quantity_remaining || 0) + quantity
    - in_function: GeneticsService.returnInventory
  Second occurrence: batch index 2219
    - source_expr: (genetics.quantity_remaining || 0) + quantity
    - in_function: GeneticsService.returnInventory

[DEBUG] DUPLICATE #2220:
  File: backend/src/services/genetics.service.ts
  Line: 203
  Target: newQuantityPlanted
  First occurrence: batch index 2205
    - source_expr: Math.max(0, (genetics.quantity_planted || 0) - quantity)
    - in_function: GeneticsService.returnInventory
  Second occurrence: batch index 2220
    - source_expr: Math.max(0, (genetics.quantity_planted || 0) - quantity)
    - in_function: GeneticsService.returnInventory

[DEBUG] DUPLICATE #2221:
  File: backend/src/services/genetics.service.ts
  Line: 225
  Target: genetics
  First occurrence: batch index 2206
    - source_expr: await this.findById(accountId, geneticsId)
    - in_function: GeneticsService.recordDestruction
  Second occurrence: batch index 2221
    - source_expr: await this.findById(accountId, geneticsId)
    - in_function: GeneticsService.recordDestruction

[DEBUG] DUPLICATE #2222:
  File: backend/src/services/genetics.service.ts
  Line: 235
  Target: newQuantityRemaining
  First occurrence: batch index 2207
    - source_expr: (genetics.quantity_remaining || 0) - quantity
    - in_function: GeneticsService.recordDestruction
  Second occurrence: batch index 2222
    - source_expr: (genetics.quantity_remaining || 0) - quantity
    - in_function: GeneticsService.recordDestruction

[DEBUG] DUPLICATE #2223:
  File: backend/src/services/genetics.service.ts
  Line: 236
  Target: newQuantityDestroyed
  First occurrence: batch index 2208
    - source_expr: (genetics.quantity_destroyed || 0) + quantity
    - in_function: GeneticsService.recordDestruction
  Second occurrence: batch index 2223
    - source_expr: (genetics.quantity_destroyed || 0) + quantity
    - in_function: GeneticsService.recordDestruction

[DEBUG] DUPLICATE #2224:
  File: backend/src/services/genetics.service.ts
  Line: 254
  Target: genetics
  First occurrence: batch index 2209
    - source_expr: await Genetics.findAll({
      where: {
        account_id: accountId,
        is_active: true,
    
    - in_function: GeneticsService.getLowInventory
  Second occurrence: batch index 2224
    - source_expr: await Genetics.findAll({
      where: {
        account_id: accountId,
        is_active: true,
    
    - in_function: GeneticsService.getLowInventory

[DEBUG] DUPLICATE #2239:
  File: backend/src/services/harvest.service.ts
  Line: 25
  Target: batch
  First occurrence: batch index 2225
    - source_expr: await Batch.findOne({
        where: {
          id: data.batch_id,
          account_id: account
    - in_function: HarvestService.createHarvest
  Second occurrence: batch index 2239
    - source_expr: await Batch.findOne({
        where: {
          id: data.batch_id,
          account_id: account
    - in_function: HarvestService.createHarvest

[DEBUG] DUPLICATE #2240:
  File: backend/src/services/harvest.service.ts
  Line: 39
  Target: plants
  First occurrence: batch index 2226
    - source_expr: await Plant.findAll({
          where: {
            account_id: accountId,
            batch_id:
    - in_function: HarvestService.createHarvest
  Second occurrence: batch index 2240
    - source_expr: await Plant.findAll({
          where: {
            account_id: accountId,
            batch_id:
    - in_function: HarvestService.createHarvest

[DEBUG] DUPLICATE #2241:
  File: backend/src/services/harvest.service.ts
  Line: 67
  Target: harvest
  First occurrence: batch index 2227
    - source_expr: await Harvest.create({
        account_id: accountId,
        batch_id: data.batch_id,
        ha
    - in_function: HarvestService.createHarvest
  Second occurrence: batch index 2241
    - source_expr: await Harvest.create({
        account_id: accountId,
        batch_id: data.batch_id,
        ha
    - in_function: HarvestService.createHarvest

[DEBUG] DUPLICATE #2242:
  File: backend/src/services/harvest.service.ts
  Line: 107
  Target: harvest
  First occurrence: batch index 2228
    - source_expr: await Harvest.findOne({
        where: {
          id: harvestId,
          account_id: accountId
    - in_function: HarvestService.updateHarvest
  Second occurrence: batch index 2242
    - source_expr: await Harvest.findOne({
        where: {
          id: harvestId,
          account_id: accountId
    - in_function: HarvestService.updateHarvest

[DEBUG] DUPLICATE #2243:
  File: backend/src/services/harvest.service.ts
  Line: 119
  Target: oldValues
  First occurrence: batch index 2229
    - source_expr: harvest.toJSON()
    - in_function: HarvestService.updateHarvest
  Second occurrence: batch index 2243
    - source_expr: harvest.toJSON()
    - in_function: HarvestService.updateHarvest

[DEBUG] DUPLICATE #2244:
  File: backend/src/services/harvest.service.ts
  Line: 145
  Target: harvest
  First occurrence: batch index 2230
    - source_expr: await Harvest.findOne({
      where: {
        id: harvestId,
        account_id: accountId
    
    - in_function: HarvestService.getHarvest
  Second occurrence: batch index 2244
    - source_expr: await Harvest.findOne({
      where: {
        id: harvestId,
        account_id: accountId
    
    - in_function: HarvestService.getHarvest

[DEBUG] DUPLICATE #2245:
  File: backend/src/services/harvest.service.ts
  Line: 179
  Target: whereClause: WhereOptions<HarvestAttributes>
  First occurrence: batch index 2231
    - source_expr: { account_id: accountId }
    - in_function: HarvestService.listHarvests
  Second occurrence: batch index 2245
    - source_expr: { account_id: accountId }
    - in_function: HarvestService.listHarvests

[DEBUG] DUPLICATE #2246:
  File: backend/src/services/harvest.service.ts
  Line: 184
  Target: harvestDateConditions: Record<symbol, Date>
  First occurrence: batch index 2232
    - source_expr: {}
    - in_function: HarvestService.listHarvests
  Second occurrence: batch index 2246
    - source_expr: {}
    - in_function: HarvestService.listHarvests

[DEBUG] DUPLICATE #2247:
  File: backend/src/services/harvest.service.ts
  Line: 190
  Target: { count, rows }
  First occurrence: batch index 2233
    - source_expr: await Harvest.findAndCountAll({
      where: whereClause,
      limit: filters.limit || 50,
     
    - in_function: HarvestService.listHarvests
  Second occurrence: batch index 2247
    - source_expr: await Harvest.findAndCountAll({
      where: whereClause,
      limit: filters.limit || 50,
     
    - in_function: HarvestService.listHarvests

[DEBUG] DUPLICATE #2248:
  File: backend/src/services/harvest.service.ts
  Line: 212
  Target: harvests
  First occurrence: batch index 2234
    - source_expr: await Harvest.findAll({
      where: {
        account_id: accountId,
        batch_id: batchId

    - in_function: HarvestService.getBatchHarvestStats
  Second occurrence: batch index 2248
    - source_expr: await Harvest.findAll({
      where: {
        account_id: accountId,
        batch_id: batchId

    - in_function: HarvestService.getBatchHarvestStats

[DEBUG] DUPLICATE #2249:
  File: backend/src/services/harvest.service.ts
  Line: 228
  Target: stats
  First occurrence: batch index 2235
    - source_expr: harvests.reduce((acc, harvest) => {
      acc.total_wet_weight += harvest.wet_weight || 0;
      a
    - in_function: HarvestService.getBatchHarvestStats
  Second occurrence: batch index 2249
    - source_expr: harvests.reduce((acc, harvest) => {
      acc.total_wet_weight += harvest.wet_weight || 0;
      a
    - in_function: HarvestService.getBatchHarvestStats

[DEBUG] DUPLICATE #2250:
  File: backend/src/services/harvest.service.ts
  Line: 257
  Target: whereClause: WhereOptions<HarvestAttributes>
  First occurrence: batch index 2236
    - source_expr: { account_id: accountId }
    - in_function: HarvestService.exportHarvestData
  Second occurrence: batch index 2250
    - source_expr: { account_id: accountId }
    - in_function: HarvestService.exportHarvestData

[DEBUG] DUPLICATE #2251:
  File: backend/src/services/harvest.service.ts
  Line: 264
  Target: harvestDateConditions: Record<symbol, Date>
  First occurrence: batch index 2237
    - source_expr: {}
    - in_function: HarvestService.exportHarvestData
  Second occurrence: batch index 2251
    - source_expr: {}
    - in_function: HarvestService.exportHarvestData

[DEBUG] DUPLICATE #2252:
  File: backend/src/services/harvest.service.ts
  Line: 270
  Target: harvests
  First occurrence: batch index 2238
    - source_expr: await Harvest.findAll({
      where: whereClause,
      include: [
        {
          model: Ba
    - in_function: HarvestService.exportHarvestData
  Second occurrence: batch index 2252
    - source_expr: await Harvest.findAll({
      where: whereClause,
      include: [
        {
          model: Ba
    - in_function: HarvestService.exportHarvestData

[DEBUG] DUPLICATE #2256:
  File: backend/src/services/location.service.ts
  Line: 74
  Target: location
  First occurrence: batch index 2253
    - source_expr: await Location.findOne({
        where: { id: locationId, account_id: accountId },
        include
    - in_function: LocationService.getLocationHierarchy
  Second occurrence: batch index 2256
    - source_expr: await Location.findOne({
        where: { id: locationId, account_id: accountId },
        include
    - in_function: LocationService.getLocationHierarchy

[DEBUG] DUPLICATE #2257:
  File: backend/src/services/location.service.ts
  Line: 100
  Target: stats
  First occurrence: batch index 2254
    - source_expr: {
        totalZones: location.zones?.length || 0,
        totalAreas: location.zones?.reduce((sum
    - in_function: LocationService.getLocationHierarchy
  Second occurrence: batch index 2257
    - source_expr: {
        totalZones: location.zones?.length || 0,
        totalAreas: location.zones?.reduce((sum
    - in_function: LocationService.getLocationHierarchy

[DEBUG] DUPLICATE #2258:
  File: backend/src/services/location.service.ts
  Line: 153
  Target: count
  First occurrence: batch index 2255
    - source_expr: await Location.count({
        where: {
          id: locationId,
          facility_id: facility
    - in_function: LocationService.validateLocationFacility
  Second occurrence: batch index 2258
    - source_expr: await Location.count({
        where: {
          id: locationId,
          facility_id: facility
    - in_function: LocationService.validateLocationFacility

[DEBUG] DUPLICATE #2290:
  File: backend/src/services/operation.service.ts
  Line: 52
  Target: { Sop }
  First occurrence: batch index 2259
    - source_expr: await import('@models/sop.model')
    - in_function: OperationService.recordOperation
  Second occurrence: batch index 2290
    - source_expr: await import('@models/sop.model')
    - in_function: OperationService.recordOperation

[DEBUG] DUPLICATE #2291:
  File: backend/src/services/operation.service.ts
  Line: 55
  Target: batch
  First occurrence: batch index 2260
    - source_expr: await Batch.findOne({
        where: { id: data.batch_id, account_id: accountId },
        transac
    - in_function: OperationService.recordOperation
  Second occurrence: batch index 2291
    - source_expr: await Batch.findOne({
        where: { id: data.batch_id, account_id: accountId },
        transac
    - in_function: OperationService.recordOperation

[DEBUG] DUPLICATE #2292:
  File: backend/src/services/operation.service.ts
  Line: 64
  Target: user
  First occurrence: batch index 2261
    - source_expr: await User.findOne({
        where: { id: userId, account_id: accountId },
        transaction
  
    - in_function: OperationService.recordOperation
  Second occurrence: batch index 2292
    - source_expr: await User.findOne({
        where: { id: userId, account_id: accountId },
        transaction
  
    - in_function: OperationService.recordOperation

[DEBUG] DUPLICATE #2293:
  File: backend/src/services/operation.service.ts
  Line: 73
  Target: sopVersion: string | null
  First occurrence: batch index 2262
    - source_expr: null
    - in_function: OperationService.recordOperation
  Second occurrence: batch index 2293
    - source_expr: null
    - in_function: OperationService.recordOperation

[DEBUG] DUPLICATE #2294:
  File: backend/src/services/operation.service.ts
  Line: 75
  Target: sop
  First occurrence: batch index 2263
    - source_expr: await Sop.findOne({
          where: {
            id: data.sop_id,
            account_id: accou
    - in_function: OperationService.recordOperation
  Second occurrence: batch index 2294
    - source_expr: await Sop.findOne({
          where: {
            id: data.sop_id,
            account_id: accou
    - in_function: OperationService.recordOperation

[DEBUG] DUPLICATE #2295:
  File: backend/src/services/operation.service.ts
  Line: 93
  Target: operationTimestamp
  First occurrence: batch index 2264
    - source_expr: new Date()
    - in_function: OperationService.recordOperation
  Second occurrence: batch index 2295
    - source_expr: new Date()
    - in_function: OperationService.recordOperation

[DEBUG] DUPLICATE #2296:
  File: backend/src/services/operation.service.ts
  Line: 96
  Target: operation
  First occurrence: batch index 2265
    - source_expr: await Operation.create(
        {
          id: uuidv4(),
          account_id: accountId,
     
    - in_function: OperationService.recordOperation
  Second occurrence: batch index 2296
    - source_expr: await Operation.create(
        {
          id: uuidv4(),
          account_id: accountId,
     
    - in_function: OperationService.recordOperation

[DEBUG] DUPLICATE #2297:
  File: backend/src/services/operation.service.ts
  Line: 145
  Target: fullOperation
  First occurrence: batch index 2266
    - source_expr: await Operation.findOne({
        where: { id: operation.id, account_id: accountId },
        incl
    - in_function: OperationService.recordOperation
  Second occurrence: batch index 2297
    - source_expr: await Operation.findOne({
        where: { id: operation.id, account_id: accountId },
        incl
    - in_function: OperationService.recordOperation

[DEBUG] DUPLICATE #2298:
  File: backend/src/services/operation.service.ts
  Line: 169
  Target: recordedOperations: Operation[]
  First occurrence: batch index 2267
    - source_expr: []
    - in_function: OperationService.bulkRecordOperations
  Second occurrence: batch index 2298
    - source_expr: []
    - in_function: OperationService.bulkRecordOperations

[DEBUG] DUPLICATE #2299:
  File: backend/src/services/operation.service.ts
  Line: 172
  Target: sortedOps
  First occurrence: batch index 2268
    - source_expr: operations.sort((a, b) =>
        (new Date(a.performed_at || new Date())).getTime() - (new Date(b.
    - in_function: OperationService.bulkRecordOperations
  Second occurrence: batch index 2299
    - source_expr: operations.sort((a, b) =>
        (new Date(a.performed_at || new Date())).getTime() - (new Date(b.
    - in_function: OperationService.bulkRecordOperations

[DEBUG] DUPLICATE #2300:
  File: backend/src/services/operation.service.ts
  Line: 179
  Target: existing
  First occurrence: batch index 2269
    - source_expr: await Operation.findOne({
            where: {
              batch_id: opData.batch_id,
         
    - in_function: OperationService.bulkRecordOperations
  Second occurrence: batch index 2300
    - source_expr: await Operation.findOne({
            where: {
              batch_id: opData.batch_id,
         
    - in_function: OperationService.bulkRecordOperations

[DEBUG] DUPLICATE #2301:
  File: backend/src/services/operation.service.ts
  Line: 190
  Target: operation
  First occurrence: batch index 2270
    - source_expr: await this.recordOperation(accountId, userId, opData)
    - in_function: OperationService.bulkRecordOperations
  Second occurrence: batch index 2301
    - source_expr: await this.recordOperation(accountId, userId, opData)
    - in_function: OperationService.bulkRecordOperations

[DEBUG] DUPLICATE #2302:
  File: backend/src/services/operation.service.ts
  Line: 212
  Target: whereClause: WhereOptions<OperationAttributes>
  First occurrence: batch index 2271
    - source_expr: { batch_id: batchId }
    - in_function: OperationService.getBatchOperations
  Second occurrence: batch index 2302
    - source_expr: { batch_id: batchId }
    - in_function: OperationService.getBatchOperations

[DEBUG] DUPLICATE #2303:
  File: backend/src/services/operation.service.ts
  Line: 218
  Target: timestampConditions: Record<symbol, Date>
  First occurrence: batch index 2272
    - source_expr: {}
    - in_function: OperationService.getBatchOperations
  Second occurrence: batch index 2303
    - source_expr: {}
    - in_function: OperationService.getBatchOperations

[DEBUG] DUPLICATE #2304:
  File: backend/src/services/operation.service.ts
  Line: 228
  Target: operations
  First occurrence: batch index 2273
    - source_expr: await Operation.findAll({
        where: whereClause,
        include: [
          { model: User,
    - in_function: OperationService.getBatchOperations
  Second occurrence: batch index 2304
    - source_expr: await Operation.findAll({
        where: whereClause,
        include: [
          { model: User,
    - in_function: OperationService.getBatchOperations

[DEBUG] DUPLICATE #2305:
  File: backend/src/services/operation.service.ts
  Line: 251
  Target: whereClause: WhereOptions<OperationAttributes>
  First occurrence: batch index 2274
    - source_expr: { performed_by: userId }
    - in_function: OperationService.getUserOperations
  Second occurrence: batch index 2305
    - source_expr: { performed_by: userId }
    - in_function: OperationService.getUserOperations

[DEBUG] DUPLICATE #2306:
  File: backend/src/services/operation.service.ts
  Line: 257
  Target: timestampConditions: Record<symbol, Date>
  First occurrence: batch index 2275
    - source_expr: {}
    - in_function: OperationService.getUserOperations
  Second occurrence: batch index 2306
    - source_expr: {}
    - in_function: OperationService.getUserOperations

[DEBUG] DUPLICATE #2307:
  File: backend/src/services/operation.service.ts
  Line: 263
  Target: operations
  First occurrence: batch index 2276
    - source_expr: await Operation.findAll({
        where: whereClause,
        include: [
          { model: Batch
    - in_function: OperationService.getUserOperations
  Second occurrence: batch index 2307
    - source_expr: await Operation.findAll({
        where: whereClause,
        include: [
          { model: Batch
    - in_function: OperationService.getUserOperations

[DEBUG] DUPLICATE #2308:
  File: backend/src/services/operation.service.ts
  Line: 285
  Target: whereClause: WhereOptions<OperationAttributes>
  First occurrence: batch index 2277
    - source_expr: {}
    - in_function: OperationService.listOperations
  Second occurrence: batch index 2308
    - source_expr: {}
    - in_function: OperationService.listOperations

[DEBUG] DUPLICATE #2309:
  File: backend/src/services/operation.service.ts
  Line: 292
  Target: timestampConditions: Record<symbol, Date>
  First occurrence: batch index 2278
    - source_expr: {}
    - in_function: OperationService.listOperations
  Second occurrence: batch index 2309
    - source_expr: {}
    - in_function: OperationService.listOperations

[DEBUG] DUPLICATE #2310:
  File: backend/src/services/operation.service.ts
  Line: 303
  Target: include
  First occurrence: batch index 2279
    - source_expr: [
        {
          model: Batch,
          as: 'batch',
          attributes: ['id', 'batch_n
    - in_function: OperationService.listOperations
  Second occurrence: batch index 2310
    - source_expr: [
        {
          model: Batch,
          as: 'batch',
          attributes: ['id', 'batch_n
    - in_function: OperationService.listOperations

[DEBUG] DUPLICATE #2311:
  File: backend/src/services/operation.service.ts
  Line: 333
  Target: operations
  First occurrence: batch index 2280
    - source_expr: await Operation.findAll({
        where: whereClause,
        include,
        order: [['timestam
    - in_function: OperationService.listOperations
  Second occurrence: batch index 2311
    - source_expr: await Operation.findAll({
        where: whereClause,
        include,
        order: [['timestam
    - in_function: OperationService.listOperations

[DEBUG] DUPLICATE #2312:
  File: backend/src/services/operation.service.ts
  Line: 354
  Target: { sequelize }
  First occurrence: batch index 2281
    - source_expr: Operation
    - in_function: OperationService.getOperationStats
  Second occurrence: batch index 2312
    - source_expr: Operation
    - in_function: OperationService.getOperationStats

[DEBUG] DUPLICATE #2313:
  File: backend/src/services/operation.service.ts
  Line: 356
  Target: whereClause
  First occurrence: batch index 2282
    - source_expr: ''
    - in_function: OperationService.getOperationStats
  Second occurrence: batch index 2313
    - source_expr: ''
    - in_function: OperationService.getOperationStats

[DEBUG] DUPLICATE #2314:
  File: backend/src/services/operation.service.ts
  Line: 357
  Target: replacements: Record<string, unknown>
  First occurrence: batch index 2283
    - source_expr: { accountId }
    - in_function: OperationService.getOperationStats
  Second occurrence: batch index 2314
    - source_expr: { accountId }
    - in_function: OperationService.getOperationStats

[DEBUG] DUPLICATE #2315:
  File: backend/src/services/operation.service.ts
  Line: 370
  Target: query
  First occurrence: batch index 2284
    - source_expr: `
        SELECT
          o.type,
          COUNT(*) as count,
          DATE(o.timestamp) as d
    - in_function: OperationService.getOperationStats
  Second occurrence: batch index 2315
    - source_expr: `
        SELECT
          o.type,
          COUNT(*) as count,
          DATE(o.timestamp) as d
    - in_function: OperationService.getOperationStats

[DEBUG] DUPLICATE #2316:
  File: backend/src/services/operation.service.ts
  Line: 385
  Target: results
  First occurrence: batch index 2285
    - source_expr: await sequelize!.query<OperationStats>(query, {
        replacements,
        transaction,
      
    - in_function: OperationService.getOperationStats
  Second occurrence: batch index 2316
    - source_expr: await sequelize!.query<OperationStats>(query, {
        replacements,
        transaction,
      
    - in_function: OperationService.getOperationStats

[DEBUG] DUPLICATE #2317:
  File: backend/src/services/operation.service.ts
  Line: 403
  Target: { type, data_json }
  First occurrence: batch index 2286
    - source_expr: operation
    - in_function: OperationService.applyOperationEffects
  Second occurrence: batch index 2317
    - source_expr: operation
    - in_function: OperationService.applyOperationEffects

[DEBUG] DUPLICATE #2318:
  File: backend/src/services/operation.service.ts
  Line: 412
  Target: zoneData
  First occurrence: batch index 2287
    - source_expr: data_json as { new_zone_id?: string }
    - in_function: OperationService.applyOperationEffects
  Second occurrence: batch index 2318
    - source_expr: data_json as { new_zone_id?: string }
    - in_function: OperationService.applyOperationEffects

[DEBUG] DUPLICATE #2319:
  File: backend/src/services/operation.service.ts
  Line: 431
  Target: harvestData
  First occurrence: batch index 2288
    - source_expr: data_json as { harvest_weight?: number }
    - in_function: OperationService.applyOperationEffects
  Second occurrence: batch index 2319
    - source_expr: data_json as { harvest_weight?: number }
    - in_function: OperationService.applyOperationEffects

[DEBUG] DUPLICATE #2320:
  File: backend/src/services/operation.service.ts
  Line: 434
  Target: { Harvest }
  First occurrence: batch index 2289
    - source_expr: await import('@models/harvest.model')
    - in_function: OperationService.applyOperationEffects
  Second occurrence: batch index 2320
    - source_expr: await import('@models/harvest.model')
    - in_function: OperationService.applyOperationEffects

[DEBUG] DUPLICATE #2342:
  File: backend/src/services/pdf.service.ts
  Line: 129
  Target: d
  First occurrence: batch index 2321
    - source_expr: new Date(date)
    - in_function: PDFService.registerHelpers
  Second occurrence: batch index 2342
    - source_expr: new Date(date)
    - in_function: PDFService.registerHelpers

[DEBUG] DUPLICATE #2343:
  File: backend/src/services/pdf.service.ts
  Line: 140
  Target: d
  First occurrence: batch index 2322
    - source_expr: new Date(date)
    - in_function: PDFService.registerHelpers
  Second occurrence: batch index 2343
    - source_expr: new Date(date)
    - in_function: PDFService.registerHelpers

[DEBUG] DUPLICATE #2344:
  File: backend/src/services/pdf.service.ts
  Line: 177
  Target: templatePath
  First occurrence: batch index 2323
    - source_expr: path.join(__dirname, '..', 'templates', 'reports', `${templateName}.hbs`)
    - in_function: PDFService.getTemplate
  Second occurrence: batch index 2344
    - source_expr: path.join(__dirname, '..', 'templates', 'reports', `${templateName}.hbs`)
    - in_function: PDFService.getTemplate

[DEBUG] DUPLICATE #2345:
  File: backend/src/services/pdf.service.ts
  Line: 178
  Target: templateContent
  First occurrence: batch index 2324
    - source_expr: await fs.readFile(templatePath, 'utf-8')
    - in_function: PDFService.getTemplate
  Second occurrence: batch index 2345
    - source_expr: await fs.readFile(templatePath, 'utf-8')
    - in_function: PDFService.getTemplate

[DEBUG] DUPLICATE #2346:
  File: backend/src/services/pdf.service.ts
  Line: 179
  Target: template
  First occurrence: batch index 2325
    - source_expr: handlebars.compile(templateContent)
    - in_function: PDFService.getTemplate
  Second occurrence: batch index 2346
    - source_expr: handlebars.compile(templateContent)
    - in_function: PDFService.getTemplate

[DEBUG] DUPLICATE #2347:
  File: backend/src/services/pdf.service.ts
  Line: 200
  Target: template
  First occurrence: batch index 2326
    - source_expr: await this.getTemplate('compliance-audit')
    - in_function: PDFService.generateComplianceReport
  Second occurrence: batch index 2347
    - source_expr: await this.getTemplate('compliance-audit')
    - in_function: PDFService.generateComplianceReport

[DEBUG] DUPLICATE #2348:
  File: backend/src/services/pdf.service.ts
  Line: 201
  Target: html
  First occurrence: batch index 2327
    - source_expr: template({
        ...data,
        requestedBy,
        generatedAt: new Date(),
        pageTi
    - in_function: PDFService.generateComplianceReport
  Second occurrence: batch index 2348
    - source_expr: template({
        ...data,
        requestedBy,
        generatedAt: new Date(),
        pageTi
    - in_function: PDFService.generateComplianceReport

[DEBUG] DUPLICATE #2349:
  File: backend/src/services/pdf.service.ts
  Line: 209
  Target: pdf
  First occurrence: batch index 2328
    - source_expr: await this.htmlToPDF(html, {
        format: 'A4',
        printBackground: true,
        margin:
    - in_function: PDFService.generateComplianceReport
  Second occurrence: batch index 2349
    - source_expr: await this.htmlToPDF(html, {
        format: 'A4',
        printBackground: true,
        margin:
    - in_function: PDFService.generateComplianceReport

[DEBUG] DUPLICATE #2350:
  File: backend/src/services/pdf.service.ts
  Line: 242
  Target: template
  First occurrence: batch index 2329
    - source_expr: await this.getTemplate('batch-certificate')
    - in_function: PDFService.generateBatchCertificate
  Second occurrence: batch index 2350
    - source_expr: await this.getTemplate('batch-certificate')
    - in_function: PDFService.generateBatchCertificate

[DEBUG] DUPLICATE #2351:
  File: backend/src/services/pdf.service.ts
  Line: 243
  Target: html
  First occurrence: batch index 2330
    - source_expr: template({
        batch,
        ...certificationData,
        certificateNumber: this.generateC
    - in_function: PDFService.generateBatchCertificate
  Second occurrence: batch index 2351
    - source_expr: template({
        batch,
        ...certificationData,
        certificateNumber: this.generateC
    - in_function: PDFService.generateBatchCertificate

[DEBUG] DUPLICATE #2352:
  File: backend/src/services/pdf.service.ts
  Line: 251
  Target: pdf
  First occurrence: batch index 2331
    - source_expr: await this.htmlToPDF(html, {
        format: 'A4',
        printBackground: true,
        margin:
    - in_function: PDFService.generateBatchCertificate
  Second occurrence: batch index 2352
    - source_expr: await this.htmlToPDF(html, {
        format: 'A4',
        printBackground: true,
        margin:
    - in_function: PDFService.generateBatchCertificate

[DEBUG] DUPLICATE #2353:
  File: backend/src/services/pdf.service.ts
  Line: 284
  Target: template
  First occurrence: batch index 2332
    - source_expr: await this.getTemplate('batch-label')
    - in_function: PDFService.generateBatchLabel
  Second occurrence: batch index 2353
    - source_expr: await this.getTemplate('batch-label')
    - in_function: PDFService.generateBatchLabel

[DEBUG] DUPLICATE #2354:
  File: backend/src/services/pdf.service.ts
  Line: 285
  Target: html
  First occurrence: batch index 2333
    - source_expr: template({
        batch,
        qrCodeData,
        printDate: new Date()
      })
    - in_function: PDFService.generateBatchLabel
  Second occurrence: batch index 2354
    - source_expr: template({
        batch,
        qrCodeData,
        printDate: new Date()
      })
    - in_function: PDFService.generateBatchLabel

[DEBUG] DUPLICATE #2355:
  File: backend/src/services/pdf.service.ts
  Line: 292
  Target: pdf
  First occurrence: batch index 2334
    - source_expr: await this.htmlToPDF(html, {
        format: 'A4',
        printBackground: true,
        margin:
    - in_function: PDFService.generateBatchLabel
  Second occurrence: batch index 2355
    - source_expr: await this.htmlToPDF(html, {
        format: 'A4',
        printBackground: true,
        margin:
    - in_function: PDFService.generateBatchLabel

[DEBUG] DUPLICATE #2356:
  File: backend/src/services/pdf.service.ts
  Line: 326
  Target: template
  First occurrence: batch index 2335
    - source_expr: await this.getTemplate('operation-log')
    - in_function: PDFService.generateOperationLog
  Second occurrence: batch index 2356
    - source_expr: await this.getTemplate('operation-log')
    - in_function: PDFService.generateOperationLog

[DEBUG] DUPLICATE #2357:
  File: backend/src/services/pdf.service.ts
  Line: 327
  Target: html
  First occurrence: batch index 2336
    - source_expr: template({
        operations,
        dateRange,
        location,
        generatedAt: new Dat
    - in_function: PDFService.generateOperationLog
  Second occurrence: batch index 2357
    - source_expr: template({
        operations,
        dateRange,
        location,
        generatedAt: new Dat
    - in_function: PDFService.generateOperationLog

[DEBUG] DUPLICATE #2358:
  File: backend/src/services/pdf.service.ts
  Line: 334
  Target: pdf
  First occurrence: batch index 2337
    - source_expr: await this.htmlToPDF(html, {
        format: 'A4',
        landscape: true, // Better for tables

    - in_function: PDFService.generateOperationLog
  Second occurrence: batch index 2358
    - source_expr: await this.htmlToPDF(html, {
        format: 'A4',
        landscape: true, // Better for tables

    - in_function: PDFService.generateOperationLog

[DEBUG] DUPLICATE #2359:
  File: backend/src/services/pdf.service.ts
  Line: 365
  Target: page: Page | null
  First occurrence: batch index 2338
    - source_expr: null
    - in_function: PDFService.htmlToPDF
  Second occurrence: batch index 2359
    - source_expr: null
    - in_function: PDFService.htmlToPDF

[DEBUG] DUPLICATE #2360:
  File: backend/src/services/pdf.service.ts
  Line: 391
  Target: pdf
  First occurrence: batch index 2339
    - source_expr: await page.pdf({
        ...options,
        displayHeaderFooter: true,
        headerTemplate: `
    - in_function: PDFService.htmlToPDF
  Second occurrence: batch index 2360
    - source_expr: await page.pdf({
        ...options,
        displayHeaderFooter: true,
        headerTemplate: `
    - in_function: PDFService.htmlToPDF

[DEBUG] DUPLICATE #2361:
  File: backend/src/services/pdf.service.ts
  Line: 418
  Target: year
  First occurrence: batch index 2340
    - source_expr: new Date().getFullYear()
    - in_function: PDFService.generateCertificateNumber
  Second occurrence: batch index 2361
    - source_expr: new Date().getFullYear()
    - in_function: PDFService.generateCertificateNumber

[DEBUG] DUPLICATE #2362:
  File: backend/src/services/pdf.service.ts
  Line: 419
  Target: random
  First occurrence: batch index 2341
    - source_expr: Math.random().toString(36).substring(2, 8).toUpperCase()
    - in_function: PDFService.generateCertificateNumber
  Second occurrence: batch index 2362
    - source_expr: Math.random().toString(36).substring(2, 8).toUpperCase()
    - in_function: PDFService.generateCertificateNumber

[DEBUG] DUPLICATE #2396:
  File: backend/src/services/plant.service.ts
  Line: 31
  Target: batch
  First occurrence: batch index 2364
    - source_expr: await Batch.findOne({
        where: {
          id: batchId,
          account_id: accountId
  
    - in_function: PlantService.createPlants
  Second occurrence: batch index 2396
    - source_expr: await Batch.findOne({
        where: {
          id: batchId,
          account_id: accountId
  
    - in_function: PlantService.createPlants

[DEBUG] DUPLICATE #2397:
  File: backend/src/services/plant.service.ts
  Line: 45
  Target: area
  First occurrence: batch index 2365
    - source_expr: await Area.findOne({
          where: {
            id: areaId,
            account_id: accountId
    - in_function: PlantService.createPlants
  Second occurrence: batch index 2397
    - source_expr: await Area.findOne({
          where: {
            id: areaId,
            account_id: accountId
    - in_function: PlantService.createPlants

[DEBUG] DUPLICATE #2398:
  File: backend/src/services/plant.service.ts
  Line: 61
  Target: plants: Plant[]
  First occurrence: batch index 2366
    - source_expr: []
    - in_function: PlantService.createPlants
  Second occurrence: batch index 2398
    - source_expr: []
    - in_function: PlantService.createPlants

[DEBUG] DUPLICATE #2399:
  File: backend/src/services/plant.service.ts
  Line: 62
  Target: i
  First occurrence: batch index 2367
    - source_expr: 0
    - in_function: PlantService.createPlants
  Second occurrence: batch index 2399
    - source_expr: 0
    - in_function: PlantService.createPlants

[DEBUG] DUPLICATE #2400:
  File: backend/src/services/plant.service.ts
  Line: 63
  Target: plantCode
  First occurrence: batch index 2368
    - source_expr: `${batch.batch_number}-P${String(i + 1).padStart(4, '0')}`
    - in_function: PlantService.createPlants
  Second occurrence: batch index 2400
    - source_expr: `${batch.batch_number}-P${String(i + 1).padStart(4, '0')}`
    - in_function: PlantService.createPlants

[DEBUG] DUPLICATE #2401:
  File: backend/src/services/plant.service.ts
  Line: 64
  Target: plant
  First occurrence: batch index 2369
    - source_expr: await Plant.create({
          account_id: accountId,
          batch_id: batchId,
          area
    - in_function: PlantService.createPlants
  Second occurrence: batch index 2401
    - source_expr: await Plant.create({
          account_id: accountId,
          batch_id: batchId,
          area
    - in_function: PlantService.createPlants

[DEBUG] DUPLICATE #2402:
  File: backend/src/services/plant.service.ts
  Line: 105
  Target: whereClause: WhereOptions<PlantAttributes>
  First occurrence: batch index 2370
    - source_expr: {
      account_id: accountId,
      [Op.or]: [
        { id: identifier },
        { id: identi
    - in_function: PlantService.getPlant
  Second occurrence: batch index 2402
    - source_expr: {
      account_id: accountId,
      [Op.or]: [
        { id: identifier },
        { id: identi
    - in_function: PlantService.getPlant

[DEBUG] DUPLICATE #2403:
  File: backend/src/services/plant.service.ts
  Line: 113
  Target: plant
  First occurrence: batch index 2371
    - source_expr: await Plant.findOne({
      where: whereClause,
      include: [
        {
          model: Batc
    - in_function: PlantService.getPlant
  Second occurrence: batch index 2403
    - source_expr: await Plant.findOne({
      where: whereClause,
      include: [
        {
          model: Batc
    - in_function: PlantService.getPlant

[DEBUG] DUPLICATE #2404:
  File: backend/src/services/plant.service.ts
  Line: 146
  Target: plant
  First occurrence: batch index 2372
    - source_expr: await Plant.findOne({
        where: {
          id: plantId,
          account_id: accountId
  
    - in_function: PlantService.updatePlant
  Second occurrence: batch index 2404
    - source_expr: await Plant.findOne({
        where: {
          id: plantId,
          account_id: accountId
  
    - in_function: PlantService.updatePlant

[DEBUG] DUPLICATE #2405:
  File: backend/src/services/plant.service.ts
  Line: 158
  Target: oldValues
  First occurrence: batch index 2373
    - source_expr: plant.toJSON()
    - in_function: PlantService.updatePlant
  Second occurrence: batch index 2405
    - source_expr: plant.toJSON()
    - in_function: PlantService.updatePlant

[DEBUG] DUPLICATE #2406:
  File: backend/src/services/plant.service.ts
  Line: 162
  Target: area
  First occurrence: batch index 2374
    - source_expr: await Area.findOne({
          where: {
            id: data.area_id,
            account_id: acc
    - in_function: PlantService.updatePlant
  Second occurrence: batch index 2406
    - source_expr: await Area.findOne({
          where: {
            id: data.area_id,
            account_id: acc
    - in_function: PlantService.updatePlant

[DEBUG] DUPLICATE #2407:
  File: backend/src/services/plant.service.ts
  Line: 176
  Target: updateData: Record<string, unknown>
  First occurrence: batch index 2375
    - source_expr: { ...data }
    - in_function: PlantService.updatePlant
  Second occurrence: batch index 2407
    - source_expr: { ...data }
    - in_function: PlantService.updatePlant

[DEBUG] DUPLICATE #2408:
  File: backend/src/services/plant.service.ts
  Line: 207
  Target: area
  First occurrence: batch index 2376
    - source_expr: await Area.findOne({
        where: {
          id: data.to_area_id,
          account_id: accoun
    - in_function: PlantService.transferPlants
  Second occurrence: batch index 2408
    - source_expr: await Area.findOne({
        where: {
          id: data.to_area_id,
          account_id: accoun
    - in_function: PlantService.transferPlants

[DEBUG] DUPLICATE #2409:
  File: backend/src/services/plant.service.ts
  Line: 220
  Target: [affectedRows]
  First occurrence: batch index 2377
    - source_expr: await Plant.update(
        {
          area_id: data.to_area_id,
          notes: data.reason ||
    - in_function: PlantService.transferPlants
  Second occurrence: batch index 2409
    - source_expr: await Plant.update(
        {
          area_id: data.to_area_id,
          notes: data.reason ||
    - in_function: PlantService.transferPlants

[DEBUG] DUPLICATE #2410:
  File: backend/src/services/plant.service.ts
  Line: 271
  Target: whereClause: WhereOptions<PlantAttributes>
  First occurrence: batch index 2378
    - source_expr: { account_id: accountId }
    - in_function: PlantService.listPlants
  Second occurrence: batch index 2410
    - source_expr: { account_id: accountId }
    - in_function: PlantService.listPlants

[DEBUG] DUPLICATE #2411:
  File: backend/src/services/plant.service.ts
  Line: 277
  Target: include: IncludeOptions[]
  First occurrence: batch index 2379
    - source_expr: []
    - in_function: PlantService.listPlants
  Second occurrence: batch index 2411
    - source_expr: []
    - in_function: PlantService.listPlants

[DEBUG] DUPLICATE #2412:
  File: backend/src/services/plant.service.ts
  Line: 289
  Target: { count, rows }
  First occurrence: batch index 2380
    - source_expr: await Plant.findAndCountAll({
      where: whereClause,
      include,
      limit: filters.limit
    - in_function: PlantService.listPlants
  Second occurrence: batch index 2412
    - source_expr: await Plant.findAndCountAll({
      where: whereClause,
      include,
      limit: filters.limit
    - in_function: PlantService.listPlants

[DEBUG] DUPLICATE #2413:
  File: backend/src/services/plant.service.ts
  Line: 314
  Target: counts
  First occurrence: batch index 2381
    - source_expr: await Plant.findAll({
      where: {
        account_id: accountId,
        batch_id: batchId
  
    - in_function: PlantService.getBatchStatistics
  Second occurrence: batch index 2413
    - source_expr: await Plant.findAll({
      where: {
        account_id: accountId,
        batch_id: batchId
  
    - in_function: PlantService.getBatchStatistics

[DEBUG] DUPLICATE #2414:
  File: backend/src/services/plant.service.ts
  Line: 327
  Target: stats
  First occurrence: batch index 2382
    - source_expr: {
      total: 0,
      healthy: 0,
      sick: 0,
      dead: 0,
      harvested: 0,
      de
    - in_function: PlantService.getBatchStatistics
  Second occurrence: batch index 2414
    - source_expr: {
      total: 0,
      healthy: 0,
      sick: 0,
      dead: 0,
      harvested: 0,
      de
    - in_function: PlantService.getBatchStatistics

[DEBUG] DUPLICATE #2415:
  File: backend/src/services/plant.service.ts
  Line: 337
  Target: status
  First occurrence: batch index 2383
    - source_expr: row.status as keyof typeof stats
    - in_function: PlantService.getBatchStatistics
  Second occurrence: batch index 2415
    - source_expr: row.status as keyof typeof stats
    - in_function: PlantService.getBatchStatistics

[DEBUG] DUPLICATE #2416:
  File: backend/src/services/plant.service.ts
  Line: 338
  Target: count
  First occurrence: batch index 2384
    - source_expr: parseInt(row.count)
    - in_function: PlantService.getBatchStatistics
  Second occurrence: batch index 2416
    - source_expr: parseInt(row.count)
    - in_function: PlantService.getBatchStatistics

[DEBUG] DUPLICATE #2417:
  File: backend/src/services/plant.service.ts
  Line: 358
  Target: plants
  First occurrence: batch index 2385
    - source_expr: await Plant.findAll({
        where: {
          account_id: accountId,
          id: { [Op.in]: 
    - in_function: PlantService.destroyPlants
  Second occurrence: batch index 2417
    - source_expr: await Plant.findAll({
        where: {
          account_id: accountId,
          id: { [Op.in]: 
    - in_function: PlantService.destroyPlants

[DEBUG] DUPLICATE #2418:
  File: backend/src/services/plant.service.ts
  Line: 371
  Target: destroyedDate
  First occurrence: batch index 2386
    - source_expr: new Date()
    - in_function: PlantService.destroyPlants
  Second occurrence: batch index 2418
    - source_expr: new Date()
    - in_function: PlantService.destroyPlants

[DEBUG] DUPLICATE #2419:
  File: backend/src/services/plant.service.ts
  Line: 374
  Target: [affectedRows]
  First occurrence: batch index 2387
    - source_expr: await Plant.update(
        {
          status: 'destroyed',
          destroyed_date: destroyedD
    - in_function: PlantService.destroyPlants
  Second occurrence: batch index 2419
    - source_expr: await Plant.update(
        {
          status: 'destroyed',
          destroyed_date: destroyedD
    - in_function: PlantService.destroyPlants

[DEBUG] DUPLICATE #2420:
  File: backend/src/services/plant.service.ts
  Line: 392
  Target: batchIds
  First occurrence: batch index 2388
    - source_expr: [...new Set(plants.map(p => p.batch_id))]
    - in_function: PlantService.destroyPlants
  Second occurrence: batch index 2420
    - source_expr: [...new Set(plants.map(p => p.batch_id))]
    - in_function: PlantService.destroyPlants

[DEBUG] DUPLICATE #2421:
  File: backend/src/services/plant.service.ts
  Line: 394
  Target: _batchPlantsDestroyed
  First occurrence: batch index 2389
    - source_expr: plants.filter(p => p.batch_id === batchId).length
    - in_function: PlantService.destroyPlants
  Second occurrence: batch index 2421
    - source_expr: plants.filter(p => p.batch_id === batchId).length
    - in_function: PlantService.destroyPlants

[DEBUG] DUPLICATE #2422:
  File: backend/src/services/plant.service.ts
  Line: 395
  Target: batch
  First occurrence: batch index 2390
    - source_expr: await Batch.findByPk(batchId, { transaction })
    - in_function: PlantService.destroyPlants
  Second occurrence: batch index 2422
    - source_expr: await Batch.findByPk(batchId, { transaction })
    - in_function: PlantService.destroyPlants

[DEBUG] DUPLICATE #2423:
  File: backend/src/services/plant.service.ts
  Line: 444
  Target: { plant_ids, new_stage, transition_date, notes }
  First occurrence: batch index 2391
    - source_expr: data
    - in_function: PlantService.bulkUpdateStage
  Second occurrence: batch index 2423
    - source_expr: data
    - in_function: PlantService.bulkUpdateStage

[DEBUG] DUPLICATE #2424:
  File: backend/src/services/plant.service.ts
  Line: 447
  Target: plants
  First occurrence: batch index 2392
    - source_expr: await Plant.findAll({
        where: {
          account_id: accountId,
          id: { [Op.in]: 
    - in_function: PlantService.bulkUpdateStage
  Second occurrence: batch index 2424
    - source_expr: await Plant.findAll({
        where: {
          account_id: accountId,
          id: { [Op.in]: 
    - in_function: PlantService.bulkUpdateStage

[DEBUG] DUPLICATE #2425:
  File: backend/src/services/plant.service.ts
  Line: 461
  Target: previousStage
  First occurrence: batch index 2393
    - source_expr: plants[0].growth_stage
    - in_function: PlantService.bulkUpdateStage
  Second occurrence: batch index 2425
    - source_expr: plants[0].growth_stage
    - in_function: PlantService.bulkUpdateStage

[DEBUG] DUPLICATE #2426:
  File: backend/src/services/plant.service.ts
  Line: 464
  Target: [updatedCount]
  First occurrence: batch index 2394
    - source_expr: await Plant.update(
        {
          growth_stage: new_stage as Plant['growth_stage'],
       
    - in_function: PlantService.bulkUpdateStage
  Second occurrence: batch index 2426
    - source_expr: await Plant.update(
        {
          growth_stage: new_stage as Plant['growth_stage'],
       
    - in_function: PlantService.bulkUpdateStage

[DEBUG] DUPLICATE #2427:
  File: backend/src/services/plant.service.ts
  Line: 480
  Target: operation
  First occurrence: batch index 2395
    - source_expr: await Operation.create({
        id: uuidv4(),
        account_id: accountId,
        batch_id: p
    - in_function: PlantService.bulkUpdateStage
  Second occurrence: batch index 2427
    - source_expr: await Operation.create({
        id: uuidv4(),
        account_id: accountId,
        batch_id: p
    - in_function: PlantService.bulkUpdateStage

[DEBUG] DUPLICATE #2445:
  File: backend/src/services/print.service.ts
  Line: 58
  Target: templatePath
  First occurrence: batch index 2428
    - source_expr: path.join(
        __dirname,
        '../templates/reports',
        `${templateName}.hbs`
    
    - in_function: PrintService.preparePrintData
  Second occurrence: batch index 2445
    - source_expr: path.join(
        __dirname,
        '../templates/reports',
        `${templateName}.hbs`
    
    - in_function: PrintService.preparePrintData

[DEBUG] DUPLICATE #2446:
  File: backend/src/services/print.service.ts
  Line: 63
  Target: templateSource
  First occurrence: batch index 2429
    - source_expr: await fs.readFile(templatePath, 'utf-8')
    - in_function: PrintService.preparePrintData
  Second occurrence: batch index 2446
    - source_expr: await fs.readFile(templatePath, 'utf-8')
    - in_function: PrintService.preparePrintData

[DEBUG] DUPLICATE #2447:
  File: backend/src/services/print.service.ts
  Line: 64
  Target: template
  First occurrence: batch index 2430
    - source_expr: Handlebars.compile(templateSource)
    - in_function: PrintService.preparePrintData
  Second occurrence: batch index 2447
    - source_expr: Handlebars.compile(templateSource)
    - in_function: PrintService.preparePrintData

[DEBUG] DUPLICATE #2448:
  File: backend/src/services/print.service.ts
  Line: 68
  Target: qrDataUrl
  First occurrence: batch index 2431
    - source_expr: await QRGenerator.generateQRCode(
          (data.entity_type as 'zone' | 'area' | 'batch' | 'plant
    - in_function: PrintService.preparePrintData
  Second occurrence: batch index 2448
    - source_expr: await QRGenerator.generateQRCode(
          (data.entity_type as 'zone' | 'area' | 'batch' | 'plant
    - in_function: PrintService.preparePrintData

[DEBUG] DUPLICATE #2449:
  File: backend/src/services/print.service.ts
  Line: 78
  Target: printCss
  First occurrence: batch index 2432
    - source_expr: `
        @media print {
          body { margin: 0; }
          .no-print { display: none !impor
    - in_function: PrintService.preparePrintData
  Second occurrence: batch index 2449
    - source_expr: `
        @media print {
          body { margin: 0; }
          .no-print { display: none !impor
    - in_function: PrintService.preparePrintData

[DEBUG] DUPLICATE #2450:
  File: backend/src/services/print.service.ts
  Line: 92
  Target: html
  First occurrence: batch index 2433
    - source_expr: template({
        ...data,
        printDate: new Date(),
        printCss: printCss
      })
    - in_function: PrintService.preparePrintData
  Second occurrence: batch index 2450
    - source_expr: template({
        ...data,
        printDate: new Date(),
        printCss: printCss
      })
    - in_function: PrintService.preparePrintData

[DEBUG] DUPLICATE #2451:
  File: backend/src/services/print.service.ts
  Line: 121
  Target: layouts
  First occurrence: batch index 2434
    - source_expr: {
      '1up': { cols: 1, rows: 1, width: '200mm', height: '280mm' },
      '2up': { cols: 1, rows
    - in_function: PrintService.generateLabelBatch
  Second occurrence: batch index 2451
    - source_expr: {
      '1up': { cols: 1, rows: 1, width: '200mm', height: '280mm' },
      '2up': { cols: 1, rows
    - in_function: PrintService.generateLabelBatch

[DEBUG] DUPLICATE #2452:
  File: backend/src/services/print.service.ts
  Line: 129
  Target: config
  First occurrence: batch index 2435
    - source_expr: layouts[layout]
    - in_function: PrintService.generateLabelBatch
  Second occurrence: batch index 2452
    - source_expr: layouts[layout]
    - in_function: PrintService.generateLabelBatch

[DEBUG] DUPLICATE #2453:
  File: backend/src/services/print.service.ts
  Line: 130
  Target: pages: string[]
  First occurrence: batch index 2436
    - source_expr: []
    - in_function: PrintService.generateLabelBatch
  Second occurrence: batch index 2453
    - source_expr: []
    - in_function: PrintService.generateLabelBatch

[DEBUG] DUPLICATE #2454:
  File: backend/src/services/print.service.ts
  Line: 131
  Target: itemsPerPage
  First occurrence: batch index 2437
    - source_expr: config.cols * config.rows
    - in_function: PrintService.generateLabelBatch
  Second occurrence: batch index 2454
    - source_expr: config.cols * config.rows
    - in_function: PrintService.generateLabelBatch

[DEBUG] DUPLICATE #2455:
  File: backend/src/services/print.service.ts
  Line: 134
  Target: i
  First occurrence: batch index 2438
    - source_expr: 0
    - in_function: PrintService.generateLabelBatch
  Second occurrence: batch index 2455
    - source_expr: 0
    - in_function: PrintService.generateLabelBatch

[DEBUG] DUPLICATE #2456:
  File: backend/src/services/print.service.ts
  Line: 135
  Target: pageItems
  First occurrence: batch index 2439
    - source_expr: items.slice(i, i + itemsPerPage)
    - in_function: PrintService.generateLabelBatch
  Second occurrence: batch index 2456
    - source_expr: items.slice(i, i + itemsPerPage)
    - in_function: PrintService.generateLabelBatch

[DEBUG] DUPLICATE #2457:
  File: backend/src/services/print.service.ts
  Line: 150
  Target: gridHtml
  First occurrence: batch index 2440
    - source_expr: `
        <div class="label-grid" style="
          display: grid;
          grid-template-column
    - in_function: PrintService.generateLabelBatch
  Second occurrence: batch index 2457
    - source_expr: `
        <div class="label-grid" style="
          display: grid;
          grid-template-column
    - in_function: PrintService.generateLabelBatch

[DEBUG] DUPLICATE #2458:
  File: backend/src/services/print.service.ts
  Line: 191
  Target: headers
  First occurrence: batch index 2441
    - source_expr: Object.keys(data[0])
    - in_function: PrintService./**
   * Generate CSV export
   */
  generateCSV
  Second occurrence: batch index 2458
    - source_expr: Object.keys(data[0])
    - in_function: PrintService./**
   * Generate CSV export
   */
  generateCSV

[DEBUG] DUPLICATE #2459:
  File: backend/src/services/print.service.ts
  Line: 192
  Target: csvRows
  First occurrence: batch index 2442
    - source_expr: []
    - in_function: PrintService./**
   * Generate CSV export
   */
  generateCSV
  Second occurrence: batch index 2459
    - source_expr: []
    - in_function: PrintService./**
   * Generate CSV export
   */
  generateCSV

[DEBUG] DUPLICATE #2460:
  File: backend/src/services/print.service.ts
  Line: 199
  Target: values
  First occurrence: batch index 2443
    - source_expr: headers.map(header => {
        const value = row[header];
        // Escape commas and quotes
  
    - in_function: PrintService./**
   * Generate CSV export
   */
  generateCSV
  Second occurrence: batch index 2460
    - source_expr: headers.map(header => {
        const value = row[header];
        // Escape commas and quotes
  
    - in_function: PrintService./**
   * Generate CSV export
   */
  generateCSV

[DEBUG] DUPLICATE #2461:
  File: backend/src/services/print.service.ts
  Line: 200
  Target: value
  First occurrence: batch index 2444
    - source_expr: row[header]
    - in_function: PrintService./**
   * Generate CSV export
   */
  generateCSV
  Second occurrence: batch index 2461
    - source_expr: row[header]
    - in_function: PrintService./**
   * Generate CSV export
   */
  generateCSV

[DEBUG] DUPLICATE #2491:
  File: backend/src/services/qr.registry.service.ts
  Line: 58
  Target: qrEntry
  First occurrence: batch index 2463
    - source_expr: await QRRegistry.findByQRCode(accountId, qrCode)
    - in_function: QRService.scanQRCode
  Second occurrence: batch index 2491
    - source_expr: await QRRegistry.findByQRCode(accountId, qrCode)
    - in_function: QRService.scanQRCode

[DEBUG] DUPLICATE #2492:
  File: backend/src/services/qr.registry.service.ts
  Line: 86
  Target: existsElsewhere
  First occurrence: batch index 2464
    - source_expr: await QRRegistry.existsInOtherAccount(accountId, qrCode)
    - in_function: QRService.scanQRCode
  Second occurrence: batch index 2492
    - source_expr: await QRRegistry.existsInOtherAccount(accountId, qrCode)
    - in_function: QRService.scanQRCode

[DEBUG] DUPLICATE #2493:
  File: backend/src/services/qr.registry.service.ts
  Line: 153
  Target: entity
  First occurrence: batch index 2465
    - source_expr: await this.fetchEntity(
        qrEntry.entity_type,
        qrEntry.entity_id,
        accountId,
 
    - in_function: QRService.scanQRCode
  Second occurrence: batch index 2493
    - source_expr: await this.fetchEntity(
        qrEntry.entity_type,
        qrEntry.entity_id,
        accountId,
 
    - in_function: QRService.scanQRCode

[DEBUG] DUPLICATE #2494:
  File: backend/src/services/qr.registry.service.ts
  Line: 206
  Target: existing
  First occurrence: batch index 2466
    - source_expr: await QRRegistry.findByEntity(accountId, entityType, entityId)
    - in_function: QRService.generateQRCode
  Second occurrence: batch index 2494
    - source_expr: await QRRegistry.findByEntity(accountId, entityType, entityId)
    - in_function: QRService.generateQRCode

[DEBUG] DUPLICATE #2495:
  File: backend/src/services/qr.registry.service.ts
  Line: 212
  Target: qrEntry
  First occurrence: batch index 2467
    - source_expr: await QRRegistry.createForEntity(
        accountId,
        entityType,
        entityId,
        g
    - in_function: QRService.generateQRCode
  Second occurrence: batch index 2495
    - source_expr: await QRRegistry.createForEntity(
        accountId,
        entityType,
        entityId,
        g
    - in_function: QRService.generateQRCode

[DEBUG] DUPLICATE #2496:
  File: backend/src/services/qr.registry.service.ts
  Line: 256
  Target: qrEntry
  First occurrence: batch index 2468
    - source_expr: await QRRegistry.findByQRCode(accountId, qrCode)
    - in_function: QRService.deactivateQRCode
  Second occurrence: batch index 2496
    - source_expr: await QRRegistry.findByQRCode(accountId, qrCode)
    - in_function: QRService.deactivateQRCode

[DEBUG] DUPLICATE #2497:
  File: backend/src/services/qr.registry.service.ts
  Line: 299
  Target: modelMap: Record<QREntityType, string>
  First occurrence: batch index 2469
    - source_expr: {
      batch: 'Batch',
      zone: 'Zone',
      area: 'Area',
      facility: 'Facility',
      lo
    - in_function: QRService.fetchEntity
  Second occurrence: batch index 2497
    - source_expr: {
      batch: 'Batch',
      zone: 'Zone',
      area: 'Area',
      facility: 'Facility',
      lo
    - in_function: QRService.fetchEntity

[DEBUG] DUPLICATE #2498:
  File: backend/src/services/qr.registry.service.ts
  Line: 307
  Target: modelName
  First occurrence: batch index 2470
    - source_expr: modelMap[entityType]
    - in_function: QRService.fetchEntity
  Second occurrence: batch index 2498
    - source_expr: modelMap[entityType]
    - in_function: QRService.fetchEntity

[DEBUG] DUPLICATE #2499:
  File: backend/src/services/qr.registry.service.ts
  Line: 313
  Target: Model
  First occurrence: batch index 2471
    - source_expr: sequelize.models[modelName]
    - in_function: QRService.fetchEntity
  Second occurrence: batch index 2499
    - source_expr: sequelize.models[modelName]
    - in_function: QRService.fetchEntity

[DEBUG] DUPLICATE #2500:
  File: backend/src/services/qr.registry.service.ts
  Line: 319
  Target: entity
  First occurrence: batch index 2472
    - source_expr: await Model.findOne({
      where: { id: entityId, account_id: accountId },
      transaction,
     
    - in_function: QRService.fetchEntity
  Second occurrence: batch index 2500
    - source_expr: await Model.findOne({
      where: { id: entityId, account_id: accountId },
      transaction,
     
    - in_function: QRService.fetchEntity

[DEBUG] DUPLICATE #2501:
  File: backend/src/services/qr.registry.service.ts
  Line: 385
  Target: pattern
  First occurrence: batch index 2473
    - source_expr: /^(BATCH|ZONE|AREA|FACILITY|LOCATION)-[A-F0-9]{16}$/
    - in_function: QRService./**
   * Validate QR code format
   */
  isValidQRFormat
  Second occurrence: batch index 2501
    - source_expr: /^(BATCH|ZONE|AREA|FACILITY|LOCATION)-[A-F0-9]{16}$/
    - in_function: QRService./**
   * Validate QR code format
   */
  isValidQRFormat

[DEBUG] DUPLICATE #2502:
  File: backend/src/services/qr.registry.service.ts
  Line: 402
  Target: auditFilters: WhereOptions<AuditLogAttributes>
  First occurrence: batch index 2474
    - source_expr: {
      account_id: accountId,
      operation: 'SCAN'
    }
    - in_function: QRService.getQRScanStats
  Second occurrence: batch index 2502
    - source_expr: {
      account_id: accountId,
      operation: 'SCAN'
    }
    - in_function: QRService.getQRScanStats

[DEBUG] DUPLICATE #2503:
  File: backend/src/services/qr.registry.service.ts
  Line: 409
  Target: dateFilters: Record<symbol, Date>
  First occurrence: batch index 2475
    - source_expr: {}
    - in_function: QRService.getQRScanStats
  Second occurrence: batch index 2503
    - source_expr: {}
    - in_function: QRService.getQRScanStats

[DEBUG] DUPLICATE #2504:
  File: backend/src/services/qr.registry.service.ts
  Line: 416
  Target: stats
  First occurrence: batch index 2476
    - source_expr: await sequelize.query(
      `SELECT
        event_type,
        COUNT(*) as count,
        DATE(tim
    - in_function: QRService.getQRScanStats
  Second occurrence: batch index 2504
    - source_expr: await sequelize.query(
      `SELECT
        event_type,
        COUNT(*) as count,
        DATE(tim
    - in_function: QRService.getQRScanStats

[DEBUG] DUPLICATE #2505:
  File: backend/src/services/qr.registry.service.ts
  Line: 455
  Target: existing
  First occurrence: batch index 2477
    - source_expr: await QRRegistry.findByQRCode(accountId, qrCode)
    - in_function: QRService.assignQRCode
  Second occurrence: batch index 2505
    - source_expr: await QRRegistry.findByQRCode(accountId, qrCode)
    - in_function: QRService.assignQRCode

[DEBUG] DUPLICATE #2506:
  File: backend/src/services/qr.registry.service.ts
  Line: 467
  Target: code
  First occurrence: batch index 2478
    - source_expr: await this.generateQRCode(
      accountId,
      entityType,
      entityId,
      assignedBy,
    
    - in_function: QRService.assignQRCode
  Second occurrence: batch index 2506
    - source_expr: await this.generateQRCode(
      accountId,
      entityType,
      entityId,
      assignedBy,
    
    - in_function: QRService.assignQRCode

[DEBUG] DUPLICATE #2507:
  File: backend/src/services/qr.registry.service.ts
  Line: 487
  Target: result
  First occurrence: batch index 2479
    - source_expr: await this.scanQRCode(
        accountId,
        'system', // System lookup, not worker scan
      
    - in_function: QRService.getEntityByQRCode
  Second occurrence: batch index 2507
    - source_expr: await this.scanQRCode(
        accountId,
        'system', // System lookup, not worker scan
      
    - in_function: QRService.getEntityByQRCode

[DEBUG] DUPLICATE #2508:
  File: backend/src/services/qr.registry.service.ts
  Line: 522
  Target: where: WhereOptions<QRRegistryAttributes>
  First occurrence: batch index 2480
    - source_expr: {
      account_id: accountId
    }
    - in_function: QRService.listQRCodes
  Second occurrence: batch index 2508
    - source_expr: {
      account_id: accountId
    }
    - in_function: QRService.listQRCodes

[DEBUG] DUPLICATE #2509:
  File: backend/src/services/qr.registry.service.ts
  Line: 534
  Target: offset
  First occurrence: batch index 2481
    - source_expr: (pagination.page - 1) * pagination.limit
    - in_function: QRService.listQRCodes
  Second occurrence: batch index 2509
    - source_expr: (pagination.page - 1) * pagination.limit
    - in_function: QRService.listQRCodes

[DEBUG] DUPLICATE #2510:
  File: backend/src/services/qr.registry.service.ts
  Line: 567
  Target: qrEntry
  First occurrence: batch index 2482
    - source_expr: await this.getQRCodeById(accountId, id)
    - in_function: QRService.deleteUnusedQRCode
  Second occurrence: batch index 2510
    - source_expr: await this.getQRCodeById(accountId, id)
    - in_function: QRService.deleteUnusedQRCode

[DEBUG] DUPLICATE #2511:
  File: backend/src/services/qr.registry.service.ts
  Line: 592
  Target: qrEntry
  First occurrence: batch index 2483
    - source_expr: await QRRegistry.findByQRCode(accountId, qrCode)
    - in_function: QRService.getQRCodeHierarchy
  Second occurrence: batch index 2511
    - source_expr: await QRRegistry.findByQRCode(accountId, qrCode)
    - in_function: QRService.getQRCodeHierarchy

[DEBUG] DUPLICATE #2512:
  File: backend/src/services/qr.registry.service.ts
  Line: 609
  Target: hierarchy: QRHierarchy
  First occurrence: batch index 2484
    - source_expr: {
      qr_code: qrEntry.qr_code,
      entity_type: qrEntry.entity_type,
      entity_id: qrEntry.e
    - in_function: QRService.getQRCodeHierarchy
  Second occurrence: batch index 2512
    - source_expr: {
      qr_code: qrEntry.qr_code,
      entity_type: qrEntry.entity_type,
      entity_id: qrEntry.e
    - in_function: QRService.getQRCodeHierarchy

[DEBUG] DUPLICATE #2513:
  File: backend/src/services/qr.registry.service.ts
  Line: 616
  Target: entity
  First occurrence: batch index 2485
    - source_expr: qrEntry.entity_id ? await this.fetchEntity(
      qrEntry.entity_type,
      qrEntry.entity_id,
    
    - in_function: QRService.getQRCodeHierarchy
  Second occurrence: batch index 2513
    - source_expr: qrEntry.entity_id ? await this.fetchEntity(
      qrEntry.entity_type,
      qrEntry.entity_id,
    
    - in_function: QRService.getQRCodeHierarchy

[DEBUG] DUPLICATE #2514:
  File: backend/src/services/qr.registry.service.ts
  Line: 629
  Target: batch
  First occurrence: batch index 2486
    - source_expr: entity as Batch
    - in_function: QRService.getQRCodeHierarchy
  Second occurrence: batch index 2514
    - source_expr: entity as Batch
    - in_function: QRService.getQRCodeHierarchy

[DEBUG] DUPLICATE #2515:
  File: backend/src/services/qr.registry.service.ts
  Line: 635
  Target: area
  First occurrence: batch index 2487
    - source_expr: entity as Area
    - in_function: QRService.getQRCodeHierarchy
  Second occurrence: batch index 2515
    - source_expr: entity as Area
    - in_function: QRService.getQRCodeHierarchy

[DEBUG] DUPLICATE #2516:
  File: backend/src/services/qr.registry.service.ts
  Line: 660
  Target: result
  First occurrence: batch index 2488
    - source_expr: await this.scanQRCode(
      accountId,
      userId || 'anonymous',
      qrCode,
      metadata ||
    - in_function: QRService.lookupQRCode
  Second occurrence: batch index 2516
    - source_expr: await this.scanQRCode(
      accountId,
      userId || 'anonymous',
      qrCode,
      metadata ||
    - in_function: QRService.lookupQRCode

[DEBUG] DUPLICATE #2517:
  File: backend/src/services/qr.registry.service.ts
  Line: 683
  Target: results
  First occurrence: batch index 2489
    - source_expr: []
    - in_function: QRService.bulkLookupQRCodes
  Second occurrence: batch index 2517
    - source_expr: []
    - in_function: QRService.bulkLookupQRCodes

[DEBUG] DUPLICATE #2518:
  File: backend/src/services/qr.registry.service.ts
  Line: 686
  Target: result
  First occurrence: batch index 2490
    - source_expr: await this.lookupQRCode(accountId, qrCode, userId)
    - in_function: QRService.bulkLookupQRCodes
  Second occurrence: batch index 2518
    - source_expr: await this.lookupQRCode(accountId, qrCode, userId)
    - in_function: QRService.bulkLookupQRCodes

[DEBUG] DUPLICATE #2527:
  File: backend/src/services/signature.service.ts
  Line: 31
  Target: hashInput
  First occurrence: batch index 2520
    - source_expr: Buffer.from(
        data.signature_data +
        data.entity_id +
        data.entity_type +
 
    - in_function: SignatureService.captureSignature
  Second occurrence: batch index 2527
    - source_expr: Buffer.from(
        data.signature_data +
        data.entity_id +
        data.entity_type +
 
    - in_function: SignatureService.captureSignature

[DEBUG] DUPLICATE #2528:
  File: backend/src/services/signature.service.ts
  Line: 38
  Target: signatureHash
  First occurrence: batch index 2521
    - source_expr: cryptoService.generateChecksum(hashInput)
    - in_function: SignatureService.captureSignature
  Second occurrence: batch index 2528
    - source_expr: cryptoService.generateChecksum(hashInput)
    - in_function: SignatureService.captureSignature

[DEBUG] DUPLICATE #2529:
  File: backend/src/services/signature.service.ts
  Line: 41
  Target: signature
  First occurrence: batch index 2522
    - source_expr: await Signature.create({
        account_id: accountId,
        entity_type: data.entity_type,
  
    - in_function: SignatureService.captureSignature
  Second occurrence: batch index 2529
    - source_expr: await Signature.create({
        account_id: accountId,
        entity_type: data.entity_type,
  
    - in_function: SignatureService.captureSignature

[DEBUG] DUPLICATE #2530:
  File: backend/src/services/signature.service.ts
  Line: 115
  Target: signature
  First occurrence: batch index 2523
    - source_expr: await this.findById(accountId, signatureId)
    - in_function: SignatureService.verifySignature
  Second occurrence: batch index 2530
    - source_expr: await this.findById(accountId, signatureId)
    - in_function: SignatureService.verifySignature

[DEBUG] DUPLICATE #2531:
  File: backend/src/services/signature.service.ts
  Line: 118
  Target: hashInput
  First occurrence: batch index 2524
    - source_expr: Buffer.from(
        signature.signature_data +
        signature.entity_id +
        signature.e
    - in_function: SignatureService.verifySignature
  Second occurrence: batch index 2531
    - source_expr: Buffer.from(
        signature.signature_data +
        signature.entity_id +
        signature.e
    - in_function: SignatureService.verifySignature

[DEBUG] DUPLICATE #2532:
  File: backend/src/services/signature.service.ts
  Line: 125
  Target: calculatedHash
  First occurrence: batch index 2525
    - source_expr: cryptoService.generateChecksum(hashInput)
    - in_function: SignatureService.verifySignature
  Second occurrence: batch index 2532
    - source_expr: cryptoService.generateChecksum(hashInput)
    - in_function: SignatureService.verifySignature

[DEBUG] DUPLICATE #2533:
  File: backend/src/services/signature.service.ts
  Line: 127
  Target: valid
  First occurrence: batch index 2526
    - source_expr: calculatedHash === signature.signature_hash
    - in_function: SignatureService.verifySignature
  Second occurrence: batch index 2533
    - source_expr: calculatedHash === signature.signature_hash
    - in_function: SignatureService.verifySignature

[DEBUG] DUPLICATE #2546:
  File: backend/src/services/sop.service.ts
  Line: 23
  Target: facility
  First occurrence: batch index 2535
    - source_expr: await Facility.findOne({
      where: {
        id: data.facility_id,
        account_id: accountId

    - in_function: SopService.beforeCreate
  Second occurrence: batch index 2546
    - source_expr: await Facility.findOne({
      where: {
        id: data.facility_id,
        account_id: accountId

    - in_function: SopService.beforeCreate

[DEBUG] DUPLICATE #2547:
  File: backend/src/services/sop.service.ts
  Line: 36
  Target: existing
  First occurrence: batch index 2536
    - source_expr: await Sop.findOne({
      where: {
        account_id: accountId,
        facility_id: data.facility
    - in_function: SopService.beforeCreate
  Second occurrence: batch index 2547
    - source_expr: await Sop.findOne({
      where: {
        account_id: accountId,
        facility_id: data.facility
    - in_function: SopService.beforeCreate

[DEBUG] DUPLICATE #2548:
  File: backend/src/services/sop.service.ts
  Line: 63
  Target: existing
  First occurrence: batch index 2537
    - source_expr: await Sop.findOne({
        where: {
          account_id: sop.account_id,
          facility_id: so
    - in_function: SopService.beforeUpdate
  Second occurrence: batch index 2548
    - source_expr: await Sop.findOne({
        where: {
          account_id: sop.account_id,
          facility_id: so
    - in_function: SopService.beforeUpdate

[DEBUG] DUPLICATE #2549:
  File: backend/src/services/sop.service.ts
  Line: 92
  Target: newParts
  First occurrence: batch index 2538
    - source_expr: newVersion.split('.').map(Number)
    - in_function: SopService.isVersionHigher
  Second occurrence: batch index 2549
    - source_expr: newVersion.split('.').map(Number)
    - in_function: SopService.isVersionHigher

[DEBUG] DUPLICATE #2550:
  File: backend/src/services/sop.service.ts
  Line: 93
  Target: oldParts
  First occurrence: batch index 2539
    - source_expr: oldVersion.split('.').map(Number)
    - in_function: SopService.isVersionHigher
  Second occurrence: batch index 2550
    - source_expr: oldVersion.split('.').map(Number)
    - in_function: SopService.isVersionHigher

[DEBUG] DUPLICATE #2551:
  File: backend/src/services/sop.service.ts
  Line: 95
  Target: i
  First occurrence: batch index 2540
    - source_expr: 0
    - in_function: SopService.isVersionHigher
  Second occurrence: batch index 2551
    - source_expr: 0
    - in_function: SopService.isVersionHigher

[DEBUG] DUPLICATE #2552:
  File: backend/src/services/sop.service.ts
  Line: 144
  Target: whereClause: WhereOptions<SopAttributes>
  First occurrence: batch index 2541
    - source_expr: {}
    - in_function: SopService.listSops
  Second occurrence: batch index 2552
    - source_expr: {}
    - in_function: SopService.listSops

[DEBUG] DUPLICATE #2553:
  File: backend/src/services/sop.service.ts
  Line: 152
  Target: result
  First occurrence: batch index 2542
    - source_expr: await this.findAll(accountId, {
      where: whereClause,
      limit: filters?.limit || 50,
      o
    - in_function: SopService.listSops
  Second occurrence: batch index 2553
    - source_expr: await this.findAll(accountId, {
      where: whereClause,
      limit: filters?.limit || 50,
      o
    - in_function: SopService.listSops

[DEBUG] DUPLICATE #2554:
  File: backend/src/services/sop.service.ts
  Line: 206
  Target: existingSop
  First occurrence: batch index 2543
    - source_expr: await this.findById(accountId, sopId)
    - in_function: SopService.createNewVersion
  Second occurrence: batch index 2554
    - source_expr: await this.findById(accountId, sopId)
    - in_function: SopService.createNewVersion

[DEBUG] DUPLICATE #2555:
  File: backend/src/services/sop.service.ts
  Line: 212
  Target: newSopData: SopCreateInput
  First occurrence: batch index 2544
    - source_expr: {
      facility_id: existingSop.facility_id,
      name: existingSop.name,
      description: exist
    - in_function: SopService.createNewVersion
  Second occurrence: batch index 2555
    - source_expr: {
      facility_id: existingSop.facility_id,
      name: existingSop.name,
      description: exist
    - in_function: SopService.createNewVersion

[DEBUG] DUPLICATE #2556:
  File: backend/src/services/sop.service.ts
  Line: 237
  Target: result
  First occurrence: batch index 2545
    - source_expr: await this.findAll(accountId, {
      where: {
        facility_id: facilityId,
        name: sopNam
    - in_function: SopService.getSopVersions
  Second occurrence: batch index 2556
    - source_expr: await this.findAll(accountId, {
      where: {
        facility_id: facilityId,
        name: sopNam
    - in_function: SopService.getSopVersions

[DEBUG] DUPLICATE #2580:
  File: backend/src/services/superadmin.service.ts
  Line: 26
  Target: superAdmin
  First occurrence: batch index 2557
    - source_expr: await SuperAdmin.findOne({
      where: {
        ...(username.includes('@') ? { email: username }
    - in_function: SuperAdminService.login
  Second occurrence: batch index 2580
    - source_expr: await SuperAdmin.findOne({
      where: {
        ...(username.includes('@') ? { email: username }
    - in_function: SuperAdminService.login

[DEBUG] DUPLICATE #2581:
  File: backend/src/services/superadmin.service.ts
  Line: 40
  Target: minutesLeft
  First occurrence: batch index 2558
    - source_expr: Math.ceil((superAdmin.locked_until.getTime() - Date.now()) / 60000)
    - in_function: SuperAdminService.login
  Second occurrence: batch index 2581
    - source_expr: Math.ceil((superAdmin.locked_until.getTime() - Date.now()) / 60000)
    - in_function: SuperAdminService.login

[DEBUG] DUPLICATE #2582:
  File: backend/src/services/superadmin.service.ts
  Line: 45
  Target: isValid
  First occurrence: batch index 2559
    - source_expr: await argon2.verify(superAdmin.password_hash, password)
    - in_function: SuperAdminService.login
  Second occurrence: batch index 2582
    - source_expr: await argon2.verify(superAdmin.password_hash, password)
    - in_function: SuperAdminService.login

[DEBUG] DUPLICATE #2583:
  File: backend/src/services/superadmin.service.ts
  Line: 49
  Target: attempts
  First occurrence: batch index 2560
    - source_expr: (superAdmin.login_attempts || 0) + 1
    - in_function: SuperAdminService.login
  Second occurrence: batch index 2583
    - source_expr: (superAdmin.login_attempts || 0) + 1
    - in_function: SuperAdminService.login

[DEBUG] DUPLICATE #2584:
  File: backend/src/services/superadmin.service.ts
  Line: 50
  Target: updates: Record<string, unknown>
  First occurrence: batch index 2561
    - source_expr: { login_attempts: attempts }
    - in_function: SuperAdminService.login
  Second occurrence: batch index 2584
    - source_expr: { login_attempts: attempts }
    - in_function: SuperAdminService.login

[DEBUG] DUPLICATE #2585:
  File: backend/src/services/superadmin.service.ts
  Line: 70
  Target: { accessToken, refreshToken }
  First occurrence: batch index 2562
    - source_expr: this.generateTokens(superAdmin)
    - in_function: SuperAdminService.login
  Second occurrence: batch index 2585
    - source_expr: this.generateTokens(superAdmin)
    - in_function: SuperAdminService.login

[DEBUG] DUPLICATE #2586:
  File: backend/src/services/superadmin.service.ts
  Line: 73
  Target: refreshTokenHash
  First occurrence: batch index 2563
    - source_expr: await argon2.hash(refreshToken)
    - in_function: SuperAdminService.login
  Second occurrence: batch index 2586
    - source_expr: await argon2.hash(refreshToken)
    - in_function: SuperAdminService.login

[DEBUG] DUPLICATE #2587:
  File: backend/src/services/superadmin.service.ts
  Line: 90
  Target: payload
  First occurrence: batch index 2564
    - source_expr: jwt.verify(
        refreshToken,
        process.env.JWT_REFRESH_SECRET!
      ) as TokenPayload
    - in_function: SuperAdminService.refreshToken
  Second occurrence: batch index 2587
    - source_expr: jwt.verify(
        refreshToken,
        process.env.JWT_REFRESH_SECRET!
      ) as TokenPayload
    - in_function: SuperAdminService.refreshToken

[DEBUG] DUPLICATE #2588:
  File: backend/src/services/superadmin.service.ts
  Line: 96
  Target: superAdmin
  First occurrence: batch index 2565
    - source_expr: await SuperAdmin.findOne({
        where: {
          id: payload.id,
          is_active: true,
    - in_function: SuperAdminService.refreshToken
  Second occurrence: batch index 2588
    - source_expr: await SuperAdmin.findOne({
        where: {
          id: payload.id,
          is_active: true,
    - in_function: SuperAdminService.refreshToken

[DEBUG] DUPLICATE #2589:
  File: backend/src/services/superadmin.service.ts
  Line: 109
  Target: isValid
  First occurrence: batch index 2566
    - source_expr: await argon2.verify(superAdmin.refresh_token_hash, refreshToken)
    - in_function: SuperAdminService.refreshToken
  Second occurrence: batch index 2589
    - source_expr: await argon2.verify(superAdmin.refresh_token_hash, refreshToken)
    - in_function: SuperAdminService.refreshToken

[DEBUG] DUPLICATE #2590:
  File: backend/src/services/superadmin.service.ts
  Line: 115
  Target: accessToken
  First occurrence: batch index 2567
    - source_expr: jwt.sign(
        {
          id: superAdmin.id,
          type: 'super_admin',
          userna
    - in_function: SuperAdminService.refreshToken
  Second occurrence: batch index 2590
    - source_expr: jwt.sign(
        {
          id: superAdmin.id,
          type: 'super_admin',
          userna
    - in_function: SuperAdminService.refreshToken

[DEBUG] DUPLICATE #2591:
  File: backend/src/services/superadmin.service.ts
  Line: 136
  Target: superAdmin
  First occurrence: batch index 2568
    - source_expr: await SuperAdmin.findByPk(superAdminId)
    - in_function: SuperAdminService.logout
  Second occurrence: batch index 2591
    - source_expr: await SuperAdmin.findByPk(superAdminId)
    - in_function: SuperAdminService.logout

[DEBUG] DUPLICATE #2592:
  File: backend/src/services/superadmin.service.ts
  Line: 150
  Target: superAdmin
  First occurrence: batch index 2569
    - source_expr: await SuperAdmin.findByPk(superAdminId)
    - in_function: SuperAdminService.changePassword
  Second occurrence: batch index 2592
    - source_expr: await SuperAdmin.findByPk(superAdminId)
    - in_function: SuperAdminService.changePassword

[DEBUG] DUPLICATE #2593:
  File: backend/src/services/superadmin.service.ts
  Line: 156
  Target: isValid
  First occurrence: batch index 2570
    - source_expr: await argon2.verify(superAdmin.password_hash, currentPassword)
    - in_function: SuperAdminService.changePassword
  Second occurrence: batch index 2593
    - source_expr: await argon2.verify(superAdmin.password_hash, currentPassword)
    - in_function: SuperAdminService.changePassword

[DEBUG] DUPLICATE #2594:
  File: backend/src/services/superadmin.service.ts
  Line: 162
  Target: newPasswordHash
  First occurrence: batch index 2571
    - source_expr: await argon2.hash(newPassword)
    - in_function: SuperAdminService.changePassword
  Second occurrence: batch index 2594
    - source_expr: await argon2.hash(newPassword)
    - in_function: SuperAdminService.changePassword

[DEBUG] DUPLICATE #2595:
  File: backend/src/services/superadmin.service.ts
  Line: 184
  Target: existingCount
  First occurrence: batch index 2572
    - source_expr: await SuperAdmin.count({ where: { deleted_at: null } })
    - in_function: SuperAdminService.create
  Second occurrence: batch index 2595
    - source_expr: await SuperAdmin.count({ where: { deleted_at: null } })
    - in_function: SuperAdminService.create

[DEBUG] DUPLICATE #2596:
  File: backend/src/services/superadmin.service.ts
  Line: 192
  Target: passwordHash
  First occurrence: batch index 2573
    - source_expr: await argon2.hash(data.password)
    - in_function: SuperAdminService.create
  Second occurrence: batch index 2596
    - source_expr: await argon2.hash(data.password)
    - in_function: SuperAdminService.create

[DEBUG] DUPLICATE #2597:
  File: backend/src/services/superadmin.service.ts
  Line: 195
  Target: superAdmin
  First occurrence: batch index 2574
    - source_expr: await SuperAdmin.create({
      ...data,
      password_hash: passwordHash,
      is_active: true
    - in_function: SuperAdminService.create
  Second occurrence: batch index 2597
    - source_expr: await SuperAdmin.create({
      ...data,
      password_hash: passwordHash,
      is_active: true
    - in_function: SuperAdminService.create

[DEBUG] DUPLICATE #2598:
  File: backend/src/services/superadmin.service.ts
  Line: 214
  Target: payload
  First occurrence: batch index 2575
    - source_expr: jwt.verify(token, process.env.JWT_SECRET!) as TokenPayload
    - in_function: SuperAdminService.verifyToken
  Second occurrence: batch index 2598
    - source_expr: jwt.verify(token, process.env.JWT_SECRET!) as TokenPayload
    - in_function: SuperAdminService.verifyToken

[DEBUG] DUPLICATE #2599:
  File: backend/src/services/superadmin.service.ts
  Line: 220
  Target: superAdmin
  First occurrence: batch index 2576
    - source_expr: await SuperAdmin.findOne({
        where: {
          id: payload.id,
          is_active: true,
    - in_function: SuperAdminService.verifyToken
  Second occurrence: batch index 2599
    - source_expr: await SuperAdmin.findOne({
        where: {
          id: payload.id,
          is_active: true,
    - in_function: SuperAdminService.verifyToken

[DEBUG] DUPLICATE #2600:
  File: backend/src/services/superadmin.service.ts
  Line: 245
  Target: payload: TokenPayload
  First occurrence: batch index 2577
    - source_expr: {
      id: superAdmin.id,
      type: 'super_admin',
      username: superAdmin.username,
     
    - in_function: SuperAdminService.generateTokens
  Second occurrence: batch index 2600
    - source_expr: {
      id: superAdmin.id,
      type: 'super_admin',
      username: superAdmin.username,
     
    - in_function: SuperAdminService.generateTokens

[DEBUG] DUPLICATE #2601:
  File: backend/src/services/superadmin.service.ts
  Line: 252
  Target: accessToken
  First occurrence: batch index 2578
    - source_expr: jwt.sign(payload, process.env.JWT_SECRET!, {
      expiresIn: '15m'
    })
    - in_function: SuperAdminService.generateTokens
  Second occurrence: batch index 2601
    - source_expr: jwt.sign(payload, process.env.JWT_SECRET!, {
      expiresIn: '15m'
    })
    - in_function: SuperAdminService.generateTokens

[DEBUG] DUPLICATE #2602:
  File: backend/src/services/superadmin.service.ts
  Line: 256
  Target: refreshToken
  First occurrence: batch index 2579
    - source_expr: jwt.sign(payload, process.env.JWT_REFRESH_SECRET!, {
      expiresIn: '7d'
    })
    - in_function: SuperAdminService.generateTokens
  Second occurrence: batch index 2602
    - source_expr: jwt.sign(payload, process.env.JWT_REFRESH_SECRET!, {
      expiresIn: '7d'
    })
    - in_function: SuperAdminService.generateTokens

[DEBUG] DUPLICATE #2616:
  File: backend/src/services/sync.service.ts
  Line: 26
  Target: queueEntry
  First occurrence: batch index 2603
    - source_expr: await SyncQueue.create({
        account_id: accountId,
        operation_type: operation.operatio
    - in_function: SyncService.queueOperation
  Second occurrence: batch index 2616
    - source_expr: await SyncQueue.create({
        account_id: accountId,
        operation_type: operation.operatio
    - in_function: SyncService.queueOperation

[DEBUG] DUPLICATE #2617:
  File: backend/src/services/sync.service.ts
  Line: 64
  Target: processed
  First occurrence: batch index 2604
    - source_expr: 0
    - in_function: SyncService.processPendingSync
  Second occurrence: batch index 2617
    - source_expr: 0
    - in_function: SyncService.processPendingSync

[DEBUG] DUPLICATE #2618:
  File: backend/src/services/sync.service.ts
  Line: 65
  Target: failed
  First occurrence: batch index 2605
    - source_expr: 0
    - in_function: SyncService.processPendingSync
  Second occurrence: batch index 2618
    - source_expr: 0
    - in_function: SyncService.processPendingSync

[DEBUG] DUPLICATE #2619:
  File: backend/src/services/sync.service.ts
  Line: 68
  Target: pendingItems
  First occurrence: batch index 2606
    - source_expr: await SyncQueue.findAll({
      where: {
        account_id: accountId,
        status: 'pending'
    - in_function: SyncService.processPendingSync
  Second occurrence: batch index 2619
    - source_expr: await SyncQueue.findAll({
      where: {
        account_id: accountId,
        status: 'pending'
    - in_function: SyncService.processPendingSync

[DEBUG] DUPLICATE #2620:
  File: backend/src/services/sync.service.ts
  Line: 155
  Target: data
  First occurrence: batch index 2607
    - source_expr: item.operation_data as OperationAttributes
    - in_function: SyncService.syncOperation
  Second occurrence: batch index 2620
    - source_expr: item.operation_data as OperationAttributes
    - in_function: SyncService.syncOperation

[DEBUG] DUPLICATE #2621:
  File: backend/src/services/sync.service.ts
  Line: 159
  Target: existing
  First occurrence: batch index 2608
    - source_expr: await Operation.findOne({
        where: { id: item.entity_id, account_id: accountId },
        tr
    - in_function: SyncService.syncOperation
  Second occurrence: batch index 2621
    - source_expr: await Operation.findOne({
        where: { id: item.entity_id, account_id: accountId },
        tr
    - in_function: SyncService.syncOperation

[DEBUG] DUPLICATE #2622:
  File: backend/src/services/sync.service.ts
  Line: 171
  Target: operation
  First occurrence: batch index 2609
    - source_expr: await Operation.create({
        batch_id: data.batch_id,
        type: data.type,
        perfor
    - in_function: SyncService.syncOperation
  Second occurrence: batch index 2622
    - source_expr: await Operation.create({
        batch_id: data.batch_id,
        type: data.type,
        perfor
    - in_function: SyncService.syncOperation

[DEBUG] DUPLICATE #2623:
  File: backend/src/services/sync.service.ts
  Line: 250
  Target: counts
  First occurrence: batch index 2610
    - source_expr: await SyncQueue.findAll({
      where: {
        account_id: accountId,
        device_id: device
    - in_function: SyncService.getDeviceStatus
  Second occurrence: batch index 2623
    - source_expr: await SyncQueue.findAll({
      where: {
        account_id: accountId,
        device_id: device
    - in_function: SyncService.getDeviceStatus

[DEBUG] DUPLICATE #2624:
  File: backend/src/services/sync.service.ts
  Line: 263
  Target: result
  First occurrence: batch index 2611
    - source_expr: {
      pending: 0,
      processing: 0,
      completed: 0,
      failed: 0
    }
    - in_function: SyncService.getDeviceStatus
  Second occurrence: batch index 2624
    - source_expr: {
      pending: 0,
      processing: 0,
      completed: 0,
      failed: 0
    }
    - in_function: SyncService.getDeviceStatus

[DEBUG] DUPLICATE #2625:
  File: backend/src/services/sync.service.ts
  Line: 284
  Target: whereClause: WhereOptions<SyncQueueAttributes>
  First occurrence: batch index 2612
    - source_expr: {
      account_id: accountId,
      status: 'failed'
    }
    - in_function: SyncService.retryFailed
  Second occurrence: batch index 2625
    - source_expr: {
      account_id: accountId,
      status: 'failed'
    }
    - in_function: SyncService.retryFailed

[DEBUG] DUPLICATE #2626:
  File: backend/src/services/sync.service.ts
  Line: 293
  Target: [affectedRows]
  First occurrence: batch index 2613
    - source_expr: await SyncQueue.update({
      status: 'pending',
      attempts: 0,
      last_error: null
    
    - in_function: SyncService.retryFailed
  Second occurrence: batch index 2626
    - source_expr: await SyncQueue.update({
      status: 'pending',
      attempts: 0,
      last_error: null
    
    - in_function: SyncService.retryFailed

[DEBUG] DUPLICATE #2627:
  File: backend/src/services/sync.service.ts
  Line: 309
  Target: cutoffDate
  First occurrence: batch index 2614
    - source_expr: new Date()
    - in_function: SyncService.cleanupCompleted
  Second occurrence: batch index 2627
    - source_expr: new Date()
    - in_function: SyncService.cleanupCompleted

[DEBUG] DUPLICATE #2628:
  File: backend/src/services/sync.service.ts
  Line: 312
  Target: deleted
  First occurrence: batch index 2615
    - source_expr: await SyncQueue.destroy({
      where: {
        account_id: accountId,
        status: 'complete
    - in_function: SyncService.cleanupCompleted
  Second occurrence: batch index 2628
    - source_expr: await SyncQueue.destroy({
      where: {
        account_id: accountId,
        status: 'complete
    - in_function: SyncService.cleanupCompleted

[DEBUG] DUPLICATE #2653:
  File: backend/src/services/task.service.ts
  Line: 99
  Target: sop
  First occurrence: batch index 2630
    - source_expr: await Sop.findOne({
        where: {
          id: data.sop_id,
          account_id: accountId,
    - in_function: TaskService.createTask
  Second occurrence: batch index 2653
    - source_expr: await Sop.findOne({
        where: {
          id: data.sop_id,
          account_id: accountId,
    - in_function: TaskService.createTask

[DEBUG] DUPLICATE #2654:
  File: backend/src/services/task.service.ts
  Line: 132
  Target: task
  First occurrence: batch index 2631
    - source_expr: await Task.findOne({
      where: {
        id: taskId,
        account_id: accountId,
        d
    - in_function: TaskService.updateTask
  Second occurrence: batch index 2654
    - source_expr: await Task.findOne({
      where: {
        id: taskId,
        account_id: accountId,
        d
    - in_function: TaskService.updateTask

[DEBUG] DUPLICATE #2655:
  File: backend/src/services/task.service.ts
  Line: 154
  Target: sop
  First occurrence: batch index 2632
    - source_expr: await Sop.findOne({
        where: {
          id: data.sop_id,
          account_id: accountId,
    - in_function: TaskService.updateTask
  Second occurrence: batch index 2655
    - source_expr: await Sop.findOne({
        where: {
          id: data.sop_id,
          account_id: accountId,
    - in_function: TaskService.updateTask

[DEBUG] DUPLICATE #2656:
  File: backend/src/services/task.service.ts
  Line: 177
  Target: updateData: Partial<TaskUpdateData>
  First occurrence: batch index 2633
    - source_expr: { ...data }
    - in_function: TaskService.updateTask
  Second occurrence: batch index 2656
    - source_expr: { ...data }
    - in_function: TaskService.updateTask

[DEBUG] DUPLICATE #2657:
  File: backend/src/services/task.service.ts
  Line: 183
  Target: oldValues
  First occurrence: batch index 2634
    - source_expr: task.toJSON()
    - in_function: TaskService.updateTask
  Second occurrence: batch index 2657
    - source_expr: task.toJSON()
    - in_function: TaskService.updateTask

[DEBUG] DUPLICATE #2658:
  File: backend/src/services/task.service.ts
  Line: 214
  Target: task
  First occurrence: batch index 2635
    - source_expr: await this.findById(accountId, taskId)
    - in_function: TaskService.assignTask
  Second occurrence: batch index 2658
    - source_expr: await this.findById(accountId, taskId)
    - in_function: TaskService.assignTask

[DEBUG] DUPLICATE #2659:
  File: backend/src/services/task.service.ts
  Line: 226
  Target: isWorkerCode
  First occurrence: batch index 2636
    - source_expr: /^[A-Z]{3,4}\d{1,3}$/.test(assigneeId)
    - in_function: TaskService.assignTask
  Second occurrence: batch index 2659
    - source_expr: /^[A-Z]{3,4}\d{1,3}$/.test(assigneeId)
    - in_function: TaskService.assignTask

[DEBUG] DUPLICATE #2660:
  File: backend/src/services/task.service.ts
  Line: 227
  Target: actualAssigneeId
  First occurrence: batch index 2637
    - source_expr: assigneeId
    - in_function: TaskService.assignTask
  Second occurrence: batch index 2660
    - source_expr: assigneeId
    - in_function: TaskService.assignTask

[DEBUG] DUPLICATE #2661:
  File: backend/src/services/task.service.ts
  Line: 231
  Target: worker
  First occurrence: batch index 2638
    - source_expr: await Worker.findOne({
        where: {
          worker_code: assigneeId,
          account_id: 
    - in_function: TaskService.assignTask
  Second occurrence: batch index 2661
    - source_expr: await Worker.findOne({
        where: {
          worker_code: assigneeId,
          account_id: 
    - in_function: TaskService.assignTask

[DEBUG] DUPLICATE #2662:
  File: backend/src/services/task.service.ts
  Line: 248
  Target: worker
  First occurrence: batch index 2639
    - source_expr: await Worker.findOne({
        where: {
          id: assigneeId,
          account_id: accountId
    - in_function: TaskService.assignTask
  Second occurrence: batch index 2662
    - source_expr: await Worker.findOne({
        where: {
          id: assigneeId,
          account_id: accountId
    - in_function: TaskService.assignTask

[DEBUG] DUPLICATE #2663:
  File: backend/src/services/task.service.ts
  Line: 261
  Target: user
  First occurrence: batch index 2640
    - source_expr: await User.findOne({
          where: {
            id: assigneeId,
            account_id: accou
    - in_function: TaskService.assignTask
  Second occurrence: batch index 2663
    - source_expr: await User.findOne({
          where: {
            id: assigneeId,
            account_id: accou
    - in_function: TaskService.assignTask

[DEBUG] DUPLICATE #2664:
  File: backend/src/services/task.service.ts
  Line: 299
  Target: task
  First occurrence: batch index 2641
    - source_expr: await this.findById(accountId, taskId)
    - in_function: TaskService.startTask
  Second occurrence: batch index 2664
    - source_expr: await this.findById(accountId, taskId)
    - in_function: TaskService.startTask

[DEBUG] DUPLICATE #2665:
  File: backend/src/services/task.service.ts
  Line: 304
  Target: worker
  First occurrence: batch index 2642
    - source_expr: await Worker.findOne({ where: { id: workerId, account_id: accountId } })
    - in_function: TaskService.startTask
  Second occurrence: batch index 2665
    - source_expr: await Worker.findOne({ where: { id: workerId, account_id: accountId } })
    - in_function: TaskService.startTask

[DEBUG] DUPLICATE #2666:
  File: backend/src/services/task.service.ts
  Line: 333
  Target: task
  First occurrence: batch index 2643
    - source_expr: await this.findById(accountId, taskId)
    - in_function: TaskService.completeTask
  Second occurrence: batch index 2666
    - source_expr: await this.findById(accountId, taskId)
    - in_function: TaskService.completeTask

[DEBUG] DUPLICATE #2667:
  File: backend/src/services/task.service.ts
  Line: 346
  Target: operation
  First occurrence: batch index 2644
    - source_expr: await Operation.findOne({
        where: {
          id: operationId,
          account_id: accou
    - in_function: TaskService.completeTask
  Second occurrence: batch index 2667
    - source_expr: await Operation.findOne({
        where: {
          id: operationId,
          account_id: accou
    - in_function: TaskService.completeTask

[DEBUG] DUPLICATE #2668:
  File: backend/src/services/task.service.ts
  Line: 373
  Target: hoursWorked
  First occurrence: batch index 2645
    - source_expr: (new Date().getTime() - task.started_at.getTime()) / 3600000
    - in_function: TaskService.completeTask
  Second occurrence: batch index 2668
    - source_expr: (new Date().getTime() - task.started_at.getTime()) / 3600000
    - in_function: TaskService.completeTask

[DEBUG] DUPLICATE #2669:
  File: backend/src/services/task.service.ts
  Line: 403
  Target: task
  First occurrence: batch index 2646
    - source_expr: await this.findById(accountId, taskId)
    - in_function: TaskService.cancelTask
  Second occurrence: batch index 2669
    - source_expr: await this.findById(accountId, taskId)
    - in_function: TaskService.cancelTask

[DEBUG] DUPLICATE #2670:
  File: backend/src/services/task.service.ts
  Line: 409
  Target: previousStatus
  First occurrence: batch index 2647
    - source_expr: task.status
    - in_function: TaskService.cancelTask
  Second occurrence: batch index 2670
    - source_expr: task.status
    - in_function: TaskService.cancelTask

[DEBUG] DUPLICATE #2671:
  File: backend/src/services/task.service.ts
  Line: 427
  Target: assignedToValues
  First occurrence: batch index 2648
    - source_expr: [workerId]
    - in_function: TaskService.getWorkerTasks
  Second occurrence: batch index 2671
    - source_expr: [workerId]
    - in_function: TaskService.getWorkerTasks

[DEBUG] DUPLICATE #2672:
  File: backend/src/services/task.service.ts
  Line: 428
  Target: isUUID
  First occurrence: batch index 2649
    - source_expr: /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(workerId)
    - in_function: TaskService.getWorkerTasks
  Second occurrence: batch index 2672
    - source_expr: /^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(workerId)
    - in_function: TaskService.getWorkerTasks

[DEBUG] DUPLICATE #2673:
  File: backend/src/services/task.service.ts
  Line: 431
  Target: worker
  First occurrence: batch index 2650
    - source_expr: await Worker.findOne({ where: { id: workerId, account_id: accountId } })
    - in_function: TaskService.getWorkerTasks
  Second occurrence: batch index 2673
    - source_expr: await Worker.findOne({ where: { id: workerId, account_id: accountId } })
    - in_function: TaskService.getWorkerTasks

[DEBUG] DUPLICATE #2674:
  File: backend/src/services/task.service.ts
  Line: 490
  Target: stats
  First occurrence: batch index 2651
    - source_expr: await Task.findAll({
      where: {
        account_id: accountId,
        deleted_at: null
    
    - in_function: TaskService.getTaskStats
  Second occurrence: batch index 2674
    - source_expr: await Task.findAll({
      where: {
        account_id: accountId,
        deleted_at: null
    
    - in_function: TaskService.getTaskStats

[DEBUG] DUPLICATE #2675:
  File: backend/src/services/task.service.ts
  Line: 503
  Target: overdue
  First occurrence: batch index 2652
    - source_expr: await Task.count({
      where: {
        account_id: accountId,
        status: {
          [Op
    - in_function: TaskService.getTaskStats
  Second occurrence: batch index 2675
    - source_expr: await Task.count({
      where: {
        account_id: accountId,
        status: {
          [Op
    - in_function: TaskService.getTaskStats

[DEBUG] DUPLICATE #2691:
  File: backend/src/services/translation.service.ts
  Line: 29
  Target: localesDir
  First occurrence: batch index 2676
    - source_expr: path.join(process.cwd(), 'locales')
    - in_function: TranslationService.initialize
  Second occurrence: batch index 2691
    - source_expr: path.join(process.cwd(), 'locales')
    - in_function: TranslationService.initialize

[DEBUG] DUPLICATE #2692:
  File: backend/src/services/translation.service.ts
  Line: 32
  Target: enPath
  First occurrence: batch index 2677
    - source_expr: path.join(localesDir, 'en.json')
    - in_function: TranslationService.initialize
  Second occurrence: batch index 2692
    - source_expr: path.join(localesDir, 'en.json')
    - in_function: TranslationService.initialize

[DEBUG] DUPLICATE #2693:
  File: backend/src/services/translation.service.ts
  Line: 33
  Target: enContent
  First occurrence: batch index 2678
    - source_expr: await fs.readFile(enPath, 'utf8')
    - in_function: TranslationService.initialize
  Second occurrence: batch index 2693
    - source_expr: await fs.readFile(enPath, 'utf8')
    - in_function: TranslationService.initialize

[DEBUG] DUPLICATE #2694:
  File: backend/src/services/translation.service.ts
  Line: 37
  Target: thPath
  First occurrence: batch index 2679
    - source_expr: path.join(localesDir, 'th.json')
    - in_function: TranslationService.initialize
  Second occurrence: batch index 2694
    - source_expr: path.join(localesDir, 'th.json')
    - in_function: TranslationService.initialize

[DEBUG] DUPLICATE #2695:
  File: backend/src/services/translation.service.ts
  Line: 38
  Target: thContent
  First occurrence: batch index 2680
    - source_expr: await fs.readFile(thPath, 'utf8')
    - in_function: TranslationService.initialize
  Second occurrence: batch index 2695
    - source_expr: await fs.readFile(thPath, 'utf8')
    - in_function: TranslationService.initialize

[DEBUG] DUPLICATE #2696:
  File: backend/src/services/translation.service.ts
  Line: 42
  Target: enKeys
  First occurrence: batch index 2681
    - source_expr: Object.keys(this.translations.get('en') || {}).length
    - in_function: TranslationService.initialize
  Second occurrence: batch index 2696
    - source_expr: Object.keys(this.translations.get('en') || {}).length
    - in_function: TranslationService.initialize

[DEBUG] DUPLICATE #2697:
  File: backend/src/services/translation.service.ts
  Line: 43
  Target: thKeys
  First occurrence: batch index 2682
    - source_expr: Object.keys(this.translations.get('th') || {}).length
    - in_function: TranslationService.initialize
  Second occurrence: batch index 2697
    - source_expr: Object.keys(this.translations.get('th') || {}).length
    - in_function: TranslationService.initialize

[DEBUG] DUPLICATE #2698:
  File: backend/src/services/translation.service.ts
  Line: 75
  Target: langData
  First occurrence: batch index 2683
    - source_expr: this.translations.get(locale) || this.translations.get('en') || {}
    - in_function: TranslationService.translate
  Second occurrence: batch index 2698
    - source_expr: this.translations.get(locale) || this.translations.get('en') || {}
    - in_function: TranslationService.translate

[DEBUG] DUPLICATE #2699:
  File: backend/src/services/translation.service.ts
  Line: 78
  Target: keys
  First occurrence: batch index 2684
    - source_expr: key.split('.')
    - in_function: TranslationService.translate
  Second occurrence: batch index 2699
    - source_expr: key.split('.')
    - in_function: TranslationService.translate

[DEBUG] DUPLICATE #2700:
  File: backend/src/services/translation.service.ts
  Line: 79
  Target: value: string | TranslationData | undefined
  First occurrence: batch index 2685
    - source_expr: langData
    - in_function: TranslationService.translate
  Second occurrence: batch index 2700
    - source_expr: langData
    - in_function: TranslationService.translate

[DEBUG] DUPLICATE #2701:
  File: backend/src/services/translation.service.ts
  Line: 92
  Target: enData
  First occurrence: batch index 2686
    - source_expr: this.translations.get('en') || {}
    - in_function: TranslationService.translate
  Second occurrence: batch index 2701
    - source_expr: this.translations.get('en') || {}
    - in_function: TranslationService.translate

[DEBUG] DUPLICATE #2702:
  File: backend/src/services/translation.service.ts
  Line: 110
  Target: paramValue
  First occurrence: batch index 2687
    - source_expr: params[paramKey as keyof typeof params]
    - in_function: TranslationService.translate
  Second occurrence: batch index 2702
    - source_expr: params[paramKey as keyof typeof params]
    - in_function: TranslationService.translate

[DEBUG] DUPLICATE #2703:
  File: backend/src/services/translation.service.ts
  Line: 130
  Target: langData
  First occurrence: batch index 2688
    - source_expr: this.translations.get(locale) || {}
    - in_function: TranslationService.has
  Second occurrence: batch index 2703
    - source_expr: this.translations.get(locale) || {}
    - in_function: TranslationService.has

[DEBUG] DUPLICATE #2704:
  File: backend/src/services/translation.service.ts
  Line: 131
  Target: keys
  First occurrence: batch index 2689
    - source_expr: key.split('.')
    - in_function: TranslationService.has
  Second occurrence: batch index 2704
    - source_expr: key.split('.')
    - in_function: TranslationService.has

[DEBUG] DUPLICATE #2705:
  File: backend/src/services/translation.service.ts
  Line: 132
  Target: value: string | TranslationData | undefined
  First occurrence: batch index 2690
    - source_expr: langData
    - in_function: TranslationService.has
  Second occurrence: batch index 2705
    - source_expr: langData
    - in_function: TranslationService.has

[DEBUG] DUPLICATE #2720:
  File: backend/src/services/user.service.ts
  Line: 33
  Target: internalData: CreateUserInternal
  First occurrence: batch index 2711
    - source_expr: {
      username: data.username,
      email: data.email,
      first_name: data.first_name,
      l
    - in_function: UserService.createUser
  Second occurrence: batch index 2720
    - source_expr: {
      username: data.username,
      email: data.email,
      first_name: data.first_name,
      l
    - in_function: UserService.createUser

[DEBUG] DUPLICATE #2721:
  File: backend/src/services/user.service.ts
  Line: 61
  Target: internalData: UpdateUserInternal
  First occurrence: batch index 2712
    - source_expr: {
      email: data.email,
      first_name: data.first_name,
      last_name: data.last_name,
     
    - in_function: UserService.updateUser
  Second occurrence: batch index 2721
    - source_expr: {
      email: data.email,
      first_name: data.first_name,
      last_name: data.last_name,
     
    - in_function: UserService.updateUser

[DEBUG] DUPLICATE #2722:
  File: backend/src/services/user.service.ts
  Line: 85
  Target: existing
  First occurrence: batch index 2713
    - source_expr: await User.findOne({
      where: {
        account_id: accountId,
        username: data.username
 
    - in_function: UserService.beforeCreate
  Second occurrence: batch index 2722
    - source_expr: await User.findOne({
      where: {
        account_id: accountId,
        username: data.username
 
    - in_function: UserService.beforeCreate

[DEBUG] DUPLICATE #2723:
  File: backend/src/services/user.service.ts
  Line: 121
  Target: whereClause: WhereOptions<UserAttributes>
  First occurrence: batch index 2714
    - source_expr: {
      account_id: accountId
    }
    - in_function: UserService.listUsers
  Second occurrence: batch index 2723
    - source_expr: {
      account_id: accountId
    }
    - in_function: UserService.listUsers

[DEBUG] DUPLICATE #2724:
  File: backend/src/services/user.service.ts
  Line: 139
  Target: result
  First occurrence: batch index 2715
    - source_expr: await this.findAll(accountId, {
      where: whereClause,
      limit: filters.limit || 50,
      of
    - in_function: UserService.listUsers
  Second occurrence: batch index 2724
    - source_expr: await this.findAll(accountId, {
      where: whereClause,
      limit: filters.limit || 50,
      of
    - in_function: UserService.listUsers

[DEBUG] DUPLICATE #2725:
  File: backend/src/services/user.service.ts
  Line: 175
  Target: user
  First occurrence: batch index 2716
    - source_expr: await User.findOne({
      where: {
        account_id: accountId,
        username,
        is_acti
    - in_function: UserService.authenticatePassword
  Second occurrence: batch index 2725
    - source_expr: await User.findOne({
      where: {
        account_id: accountId,
        username,
        is_acti
    - in_function: UserService.authenticatePassword

[DEBUG] DUPLICATE #2726:
  File: backend/src/services/user.service.ts
  Line: 187
  Target: isValid
  First occurrence: batch index 2717
    - source_expr: await verify(user.password_hash, password)
    - in_function: UserService.authenticatePassword
  Second occurrence: batch index 2726
    - source_expr: await verify(user.password_hash, password)
    - in_function: UserService.authenticatePassword

[DEBUG] DUPLICATE #2727:
  File: backend/src/services/user.service.ts
  Line: 194
  Target: { AuditService }
  First occurrence: batch index 2718
    - source_expr: await import('./audit.service')
    - in_function: UserService.authenticatePassword
  Second occurrence: batch index 2727
    - source_expr: await import('./audit.service')
    - in_function: UserService.authenticatePassword

[DEBUG] DUPLICATE #2728:
  File: backend/src/services/user.service.ts
  Line: 195
  Target: auditService
  First occurrence: batch index 2719
    - source_expr: new AuditService()
    - in_function: UserService.authenticatePassword
  Second occurrence: batch index 2728
    - source_expr: new AuditService()
    - in_function: UserService.authenticatePassword

[DEBUG] DUPLICATE #2756:
  File: backend/src/services/worker.assignment.service.ts
  Line: 54
  Target: transaction
  First occurrence: batch index 2730
    - source_expr: options?.transaction
    - in_function: WorkerAssignmentService.assignWorker
  Second occurrence: batch index 2756
    - source_expr: options?.transaction
    - in_function: WorkerAssignmentService.assignWorker

[DEBUG] DUPLICATE #2757:
  File: backend/src/services/worker.assignment.service.ts
  Line: 57
  Target: worker
  First occurrence: batch index 2731
    - source_expr: await Worker.findOne({
      where: {
        id: data.worker_id,
        account_id: accountId

    - in_function: WorkerAssignmentService.assignWorker
  Second occurrence: batch index 2757
    - source_expr: await Worker.findOne({
      where: {
        id: data.worker_id,
        account_id: accountId

    - in_function: WorkerAssignmentService.assignWorker

[DEBUG] DUPLICATE #2758:
  File: backend/src/services/worker.assignment.service.ts
  Line: 70
  Target: facility
  First occurrence: batch index 2732
    - source_expr: await Facility.findOne({
      where: {
        id: data.facility_id,
        account_id: account
    - in_function: WorkerAssignmentService.assignWorker
  Second occurrence: batch index 2758
    - source_expr: await Facility.findOne({
      where: {
        id: data.facility_id,
        account_id: account
    - in_function: WorkerAssignmentService.assignWorker

[DEBUG] DUPLICATE #2759:
  File: backend/src/services/worker.assignment.service.ts
  Line: 83
  Target: assignments
  First occurrence: batch index 2733
    - source_expr: (worker.assignments as WorkerAssignment[]) || []
    - in_function: WorkerAssignmentService.assignWorker
  Second occurrence: batch index 2759
    - source_expr: (worker.assignments as WorkerAssignment[]) || []
    - in_function: WorkerAssignmentService.assignWorker

[DEBUG] DUPLICATE #2760:
  File: backend/src/services/worker.assignment.service.ts
  Line: 86
  Target: existingActive
  First occurrence: batch index 2734
    - source_expr: assignments.find(
      (a: WorkerAssignment) => a.facility_id === data.facility_id && a.is_active
    - in_function: WorkerAssignmentService.assignWorker
  Second occurrence: batch index 2760
    - source_expr: assignments.find(
      (a: WorkerAssignment) => a.facility_id === data.facility_id && a.is_active
    - in_function: WorkerAssignmentService.assignWorker

[DEBUG] DUPLICATE #2761:
  File: backend/src/services/worker.assignment.service.ts
  Line: 95
  Target: updatedAssignments
  First occurrence: batch index 2735
    - source_expr: assignments.map(assignment => ({
      ...assignment,
      is_active: false,
      unassigned_da
    - in_function: WorkerAssignmentService.assignWorker
  Second occurrence: batch index 2761
    - source_expr: assignments.map(assignment => ({
      ...assignment,
      is_active: false,
      unassigned_da
    - in_function: WorkerAssignmentService.assignWorker

[DEBUG] DUPLICATE #2762:
  File: backend/src/services/worker.assignment.service.ts
  Line: 102
  Target: newAssignment: WorkerAssignmentData
  First occurrence: batch index 2736
    - source_expr: {
      facility_id: data.facility_id || '',  // Ensure it's always a string
      role: data.role
    - in_function: WorkerAssignmentService.assignWorker
  Second occurrence: batch index 2762
    - source_expr: {
      facility_id: data.facility_id || '',  // Ensure it's always a string
      role: data.role
    - in_function: WorkerAssignmentService.assignWorker

[DEBUG] DUPLICATE #2763:
  File: backend/src/services/worker.assignment.service.ts
  Line: 147
  Target: transaction
  First occurrence: batch index 2737
    - source_expr: options?.transaction
    - in_function: WorkerAssignmentService.unassignWorker
  Second occurrence: batch index 2763
    - source_expr: options?.transaction
    - in_function: WorkerAssignmentService.unassignWorker

[DEBUG] DUPLICATE #2764:
  File: backend/src/services/worker.assignment.service.ts
  Line: 150
  Target: worker
  First occurrence: batch index 2738
    - source_expr: await Worker.findOne({
      where: {
        id: workerId,
        account_id: accountId
      
    - in_function: WorkerAssignmentService.unassignWorker
  Second occurrence: batch index 2764
    - source_expr: await Worker.findOne({
      where: {
        id: workerId,
        account_id: accountId
      
    - in_function: WorkerAssignmentService.unassignWorker

[DEBUG] DUPLICATE #2765:
  File: backend/src/services/worker.assignment.service.ts
  Line: 163
  Target: assignments
  First occurrence: batch index 2739
    - source_expr: (worker.assignments as WorkerAssignment[]) || []
    - in_function: WorkerAssignmentService.unassignWorker
  Second occurrence: batch index 2765
    - source_expr: (worker.assignments as WorkerAssignment[]) || []
    - in_function: WorkerAssignmentService.unassignWorker

[DEBUG] DUPLICATE #2766:
  File: backend/src/services/worker.assignment.service.ts
  Line: 166
  Target: assignmentIndex
  First occurrence: batch index 2740
    - source_expr: assignments.findIndex(
      (a: WorkerAssignment) => a.facility_id === facilityId && a.is_active

    - in_function: WorkerAssignmentService.unassignWorker
  Second occurrence: batch index 2766
    - source_expr: assignments.findIndex(
      (a: WorkerAssignment) => a.facility_id === facilityId && a.is_active

    - in_function: WorkerAssignmentService.unassignWorker

[DEBUG] DUPLICATE #2767:
  File: backend/src/services/worker.assignment.service.ts
  Line: 175
  Target: updatedAssignments: WorkerAssignment[]
  First occurrence: batch index 2741
    - source_expr: [...assignments]
    - in_function: WorkerAssignmentService.unassignWorker
  Second occurrence: batch index 2767
    - source_expr: [...assignments]
    - in_function: WorkerAssignmentService.unassignWorker

[DEBUG] DUPLICATE #2768:
  File: backend/src/services/worker.assignment.service.ts
  Line: 183
  Target: updateData: { assignments: WorkerAssignment[]; facility_id?: string | null }
  First occurrence: batch index 2742
    - source_expr: { assignments: updatedAssignments }
    - in_function: WorkerAssignmentService.unassignWorker
  Second occurrence: batch index 2768
    - source_expr: { assignments: updatedAssignments }
    - in_function: WorkerAssignmentService.unassignWorker

[DEBUG] DUPLICATE #2769:
  File: backend/src/services/worker.assignment.service.ts
  Line: 216
  Target: worker
  First occurrence: batch index 2743
    - source_expr: await Worker.findOne({
      where: {
        id: workerId,
        account_id: accountId
      
    - in_function: WorkerAssignmentService.getWorkerAssignments
  Second occurrence: batch index 2769
    - source_expr: await Worker.findOne({
      where: {
        id: workerId,
        account_id: accountId
      
    - in_function: WorkerAssignmentService.getWorkerAssignments

[DEBUG] DUPLICATE #2770:
  File: backend/src/services/worker.assignment.service.ts
  Line: 227
  Target: assignments
  First occurrence: batch index 2744
    - source_expr: (worker.assignments as WorkerAssignmentData[]) || []
    - in_function: WorkerAssignmentService.getWorkerAssignments
  Second occurrence: batch index 2770
    - source_expr: (worker.assignments as WorkerAssignmentData[]) || []
    - in_function: WorkerAssignmentService.getWorkerAssignments

[DEBUG] DUPLICATE #2771:
  File: backend/src/services/worker.assignment.service.ts
  Line: 247
  Target: workers
  First occurrence: batch index 2745
    - source_expr: await Worker.findAll({
      where: {
        account_id: accountId,
        facility_id: facilit
    - in_function: WorkerAssignmentService.getFacilityWorkers
  Second occurrence: batch index 2771
    - source_expr: await Worker.findAll({
      where: {
        account_id: accountId,
        facility_id: facilit
    - in_function: WorkerAssignmentService.getFacilityWorkers

[DEBUG] DUPLICATE #2772:
  File: backend/src/services/worker.assignment.service.ts
  Line: 270
  Target: workers
  First occurrence: batch index 2746
    - source_expr: await Worker.findAll({
      where: {
        account_id: accountId
      }
    })
    - in_function: WorkerAssignmentService.getFacilityAssignmentHistory
  Second occurrence: batch index 2772
    - source_expr: await Worker.findAll({
      where: {
        account_id: accountId
      }
    })
    - in_function: WorkerAssignmentService.getFacilityAssignmentHistory

[DEBUG] DUPLICATE #2773:
  File: backend/src/services/worker.assignment.service.ts
  Line: 276
  Target: results: Array<{
      worker_id: string;
      worker_name: string;
      worker_code: string;
      assignment: WorkerAssignmentData;
    }>
  First occurrence: batch index 2747
    - source_expr: []
    - in_function: WorkerAssignmentService.getFacilityAssignmentHistory
  Second occurrence: batch index 2773
    - source_expr: []
    - in_function: WorkerAssignmentService.getFacilityAssignmentHistory

[DEBUG] DUPLICATE #2774:
  File: backend/src/services/worker.assignment.service.ts
  Line: 285
  Target: assignments
  First occurrence: batch index 2748
    - source_expr: (worker.assignments as WorkerAssignment[]) || []
    - in_function: WorkerAssignmentService.getFacilityAssignmentHistory
  Second occurrence: batch index 2774
    - source_expr: (worker.assignments as WorkerAssignment[]) || []
    - in_function: WorkerAssignmentService.getFacilityAssignmentHistory

[DEBUG] DUPLICATE #2775:
  File: backend/src/services/worker.assignment.service.ts
  Line: 286
  Target: facilityAssignments
  First occurrence: batch index 2749
    - source_expr: assignments.filter((a: WorkerAssignment) => a.facility_id === facilityId)
    - in_function: WorkerAssignmentService.getFacilityAssignmentHistory
  Second occurrence: batch index 2775
    - source_expr: assignments.filter((a: WorkerAssignment) => a.facility_id === facilityId)
    - in_function: WorkerAssignmentService.getFacilityAssignmentHistory

[DEBUG] DUPLICATE #2776:
  File: backend/src/services/worker.assignment.service.ts
  Line: 315
  Target: transaction
  First occurrence: batch index 2750
    - source_expr: options?.transaction || await Worker.sequelize!.transaction()
    - in_function: WorkerAssignmentService.bulkAssignToFacility
  Second occurrence: batch index 2776
    - source_expr: options?.transaction || await Worker.sequelize!.transaction()
    - in_function: WorkerAssignmentService.bulkAssignToFacility

[DEBUG] DUPLICATE #2777:
  File: backend/src/services/worker.assignment.service.ts
  Line: 316
  Target: assignedWorkers: Worker[]
  First occurrence: batch index 2751
    - source_expr: []
    - in_function: WorkerAssignmentService.bulkAssignToFacility
  Second occurrence: batch index 2777
    - source_expr: []
    - in_function: WorkerAssignmentService.bulkAssignToFacility

[DEBUG] DUPLICATE #2778:
  File: backend/src/services/worker.assignment.service.ts
  Line: 320
  Target: facility
  First occurrence: batch index 2752
    - source_expr: await Facility.findOne({
        where: {
          id: facilityId,
          account_id: account
    - in_function: WorkerAssignmentService.bulkAssignToFacility
  Second occurrence: batch index 2778
    - source_expr: await Facility.findOne({
        where: {
          id: facilityId,
          account_id: account
    - in_function: WorkerAssignmentService.bulkAssignToFacility

[DEBUG] DUPLICATE #2779:
  File: backend/src/services/worker.assignment.service.ts
  Line: 334
  Target: worker
  First occurrence: batch index 2753
    - source_expr: await this.assignWorker(
          accountId,
          {
            worker_id: workerId,
     
    - in_function: WorkerAssignmentService.bulkAssignToFacility
  Second occurrence: batch index 2779
    - source_expr: await this.assignWorker(
          accountId,
          {
            worker_id: workerId,
     
    - in_function: WorkerAssignmentService.bulkAssignToFacility

[DEBUG] DUPLICATE #2780:
  File: backend/src/services/worker.assignment.service.ts
  Line: 375
  Target: transaction
  First occurrence: batch index 2754
    - source_expr: options?.transaction || await Worker.sequelize!.transaction()
    - in_function: WorkerAssignmentService.transferWorker
  Second occurrence: batch index 2780
    - source_expr: options?.transaction || await Worker.sequelize!.transaction()
    - in_function: WorkerAssignmentService.transferWorker

[DEBUG] DUPLICATE #2781:
  File: backend/src/services/worker.assignment.service.ts
  Line: 388
  Target: worker
  First occurrence: batch index 2755
    - source_expr: await this.assignWorker(
        accountId,
        {
          worker_id: workerId,
          f
    - in_function: WorkerAssignmentService.transferWorker
  Second occurrence: batch index 2781
    - source_expr: await this.assignWorker(
        accountId,
        {
          worker_id: workerId,
          f
    - in_function: WorkerAssignmentService.transferWorker

[DEBUG] DUPLICATE #2797:
  File: backend/src/services/worker.service.ts
  Line: 28
  Target: facility
  First occurrence: batch index 2783
    - source_expr: await Facility.findOne({
          where: {
            id: data.facility_id,
            account_id
    - in_function: WorkerService.create
  Second occurrence: batch index 2797
    - source_expr: await Facility.findOne({
          where: {
            id: data.facility_id,
            account_id
    - in_function: WorkerService.create

[DEBUG] DUPLICATE #2798:
  File: backend/src/services/worker.service.ts
  Line: 41
  Target: workerCode
  First occurrence: batch index 2784
    - source_expr: await Worker.generateWorkerCode(accountId)
    - in_function: WorkerService.create
  Second occurrence: batch index 2798
    - source_expr: await Worker.generateWorkerCode(accountId)
    - in_function: WorkerService.create

[DEBUG] DUPLICATE #2799:
  File: backend/src/services/worker.service.ts
  Line: 44
  Target: pinHash
  First occurrence: batch index 2785
    - source_expr: await authService.hashPin(data.pin)
    - in_function: WorkerService.create
  Second occurrence: batch index 2799
    - source_expr: await authService.hashPin(data.pin)
    - in_function: WorkerService.create

[DEBUG] DUPLICATE #2800:
  File: backend/src/services/worker.service.ts
  Line: 47
  Target: createData
  First occurrence: batch index 2786
    - source_expr: {
        account_id: accountId,
        worker_code: workerCode,
        pin_hash: pinHash,
       
    - in_function: WorkerService.create
  Second occurrence: batch index 2800
    - source_expr: {
        account_id: accountId,
        worker_code: workerCode,
        pin_hash: pinHash,
       
    - in_function: WorkerService.create

[DEBUG] DUPLICATE #2801:
  File: backend/src/services/worker.service.ts
  Line: 59
  Target: worker
  First occurrence: batch index 2787
    - source_expr: await Worker.create(createData, { transaction })
    - in_function: WorkerService.create
  Second occurrence: batch index 2801
    - source_expr: await Worker.create(createData, { transaction })
    - in_function: WorkerService.create

[DEBUG] DUPLICATE #2802:
  File: backend/src/services/worker.service.ts
  Line: 88
  Target: worker
  First occurrence: batch index 2788
    - source_expr: await Worker.findOne({
      where: {
        account_id: accountId,
        worker_code: workerCode
    - in_function: WorkerService.authenticatePin
  Second occurrence: batch index 2802
    - source_expr: await Worker.findOne({
      where: {
        account_id: accountId,
        worker_code: workerCode
    - in_function: WorkerService.authenticatePin

[DEBUG] DUPLICATE #2803:
  File: backend/src/services/worker.service.ts
  Line: 100
  Target: isValid
  First occurrence: batch index 2789
    - source_expr: await verify(worker.pin_hash, pin)
    - in_function: WorkerService.authenticatePin
  Second occurrence: batch index 2803
    - source_expr: await verify(worker.pin_hash, pin)
    - in_function: WorkerService.authenticatePin

[DEBUG] DUPLICATE #2804:
  File: backend/src/services/worker.service.ts
  Line: 110
  Target: { AuditService }
  First occurrence: batch index 2790
    - source_expr: await import('./audit.service')
    - in_function: WorkerService.authenticatePin
  Second occurrence: batch index 2804
    - source_expr: await import('./audit.service')
    - in_function: WorkerService.authenticatePin

[DEBUG] DUPLICATE #2805:
  File: backend/src/services/worker.service.ts
  Line: 111
  Target: auditService
  First occurrence: batch index 2791
    - source_expr: new AuditService()
    - in_function: WorkerService.authenticatePin
  Second occurrence: batch index 2805
    - source_expr: new AuditService()
    - in_function: WorkerService.authenticatePin

[DEBUG] DUPLICATE #2806:
  File: backend/src/services/worker.service.ts
  Line: 128
  Target: worker
  First occurrence: batch index 2792
    - source_expr: await Worker.findOne({
        where: {
          id,
          account_id: accountId
        },
   
    - in_function: WorkerService.update
  Second occurrence: batch index 2806
    - source_expr: await Worker.findOne({
        where: {
          id,
          account_id: accountId
        },
   
    - in_function: WorkerService.update

[DEBUG] DUPLICATE #2807:
  File: backend/src/services/worker.service.ts
  Line: 140
  Target: oldValues
  First occurrence: batch index 2793
    - source_expr: worker.toJSON()
    - in_function: WorkerService.update
  Second occurrence: batch index 2807
    - source_expr: worker.toJSON()
    - in_function: WorkerService.update

[DEBUG] DUPLICATE #2808:
  File: backend/src/services/worker.service.ts
  Line: 141
  Target: { pin, ...dataWithoutPin }
  First occurrence: batch index 2794
    - source_expr: data
    - in_function: WorkerService.update
  Second occurrence: batch index 2808
    - source_expr: data
    - in_function: WorkerService.update

[DEBUG] DUPLICATE #2809:
  File: backend/src/services/worker.service.ts
  Line: 142
  Target: updateData: Partial<WorkerAttributes>
  First occurrence: batch index 2795
    - source_expr: { ...dataWithoutPin }
    - in_function: WorkerService.update
  Second occurrence: batch index 2809
    - source_expr: { ...dataWithoutPin }
    - in_function: WorkerService.update

[DEBUG] DUPLICATE #2810:
  File: backend/src/services/worker.service.ts
  Line: 151
  Target: facility
  First occurrence: batch index 2796
    - source_expr: await Facility.findOne({
          where: {
            id: data.facility_id,
            account_id
    - in_function: WorkerService.update
  Second occurrence: batch index 2810
    - source_expr: await Facility.findOne({
          where: {
            id: data.facility_id,
            account_id
    - in_function: WorkerService.update

[DEBUG] DUPLICATE #2831:
  File: backend/src/services/zone.service.ts
  Line: 27
  Target: facility
  First occurrence: batch index 2812
    - source_expr: await Facility.findOne({
      where: {
        id: data.facility_id,
        account_id: account
    - in_function: ZoneService.beforeCreate
  Second occurrence: batch index 2831
    - source_expr: await Facility.findOne({
      where: {
        id: data.facility_id,
        account_id: account
    - in_function: ZoneService.beforeCreate

[DEBUG] DUPLICATE #2832:
  File: backend/src/services/zone.service.ts
  Line: 40
  Target: existing
  First occurrence: batch index 2813
    - source_expr: await Zone.findOne({
      where: {
        account_id: accountId,
        facility_id: data.faci
    - in_function: ZoneService.beforeCreate
  Second occurrence: batch index 2832
    - source_expr: await Zone.findOne({
      where: {
        account_id: accountId,
        facility_id: data.faci
    - in_function: ZoneService.beforeCreate

[DEBUG] DUPLICATE #2833:
  File: backend/src/services/zone.service.ts
  Line: 75
  Target: zone
  First occurrence: batch index 2814
    - source_expr: await Zone.findOne({
        where: {
          id: data.zone_id,
          account_id: accountId
    - in_function: ZoneService.createArea
  Second occurrence: batch index 2833
    - source_expr: await Zone.findOne({
        where: {
          id: data.zone_id,
          account_id: accountId
    - in_function: ZoneService.createArea

[DEBUG] DUPLICATE #2834:
  File: backend/src/services/zone.service.ts
  Line: 88
  Target: existing
  First occurrence: batch index 2815
    - source_expr: await Area.findOne({
        where: {
          account_id: accountId,
          zone_id: data.zo
    - in_function: ZoneService.createArea
  Second occurrence: batch index 2834
    - source_expr: await Area.findOne({
        where: {
          account_id: accountId,
          zone_id: data.zo
    - in_function: ZoneService.createArea

[DEBUG] DUPLICATE #2835:
  File: backend/src/services/zone.service.ts
  Line: 102
  Target: area
  First occurrence: batch index 2816
    - source_expr: await Area.create({
        account_id: accountId,
        zone_id: data.zone_id,
        name: d
    - in_function: ZoneService.createArea
  Second occurrence: batch index 2835
    - source_expr: await Area.create({
        account_id: accountId,
        zone_id: data.zone_id,
        name: d
    - in_function: ZoneService.createArea

[DEBUG] DUPLICATE #2836:
  File: backend/src/services/zone.service.ts
  Line: 140
  Target: whereClause: WhereOptions<ZoneAttributes>
  First occurrence: batch index 2817
    - source_expr: { account_id: accountId }
    - in_function: ZoneService.listZones
  Second occurrence: batch index 2836
    - source_expr: { account_id: accountId }
    - in_function: ZoneService.listZones

[DEBUG] DUPLICATE #2837:
  File: backend/src/services/zone.service.ts
  Line: 143
  Target: include
  First occurrence: batch index 2818
    - source_expr: includeAreas ? [{
      model: Area,
      as: 'areas',
      where: { is_active: true },
      
    - in_function: ZoneService.listZones
  Second occurrence: batch index 2837
    - source_expr: includeAreas ? [{
      model: Area,
      as: 'areas',
      where: { is_active: true },
      
    - in_function: ZoneService.listZones

[DEBUG] DUPLICATE #2838:
  File: backend/src/services/zone.service.ts
  Line: 164
  Target: zone
  First occurrence: batch index 2819
    - source_expr: await Zone.findOne({
      where: {
        id: zoneId,
        account_id: accountId
      },

    - in_function: ZoneService.getZone
  Second occurrence: batch index 2838
    - source_expr: await Zone.findOne({
      where: {
        id: zoneId,
        account_id: accountId
      },

    - in_function: ZoneService.getZone

[DEBUG] DUPLICATE #2839:
  File: backend/src/services/zone.service.ts
  Line: 194
  Target: zone
  First occurrence: batch index 2820
    - source_expr: await Zone.findOne({
        where: {
          id: zoneId,
          account_id: accountId
    
    - in_function: ZoneService.updateZone
  Second occurrence: batch index 2839
    - source_expr: await Zone.findOne({
        where: {
          id: zoneId,
          account_id: accountId
    
    - in_function: ZoneService.updateZone

[DEBUG] DUPLICATE #2840:
  File: backend/src/services/zone.service.ts
  Line: 206
  Target: oldValues
  First occurrence: batch index 2821
    - source_expr: zone.toJSON()
    - in_function: ZoneService.updateZone
  Second occurrence: batch index 2840
    - source_expr: zone.toJSON()
    - in_function: ZoneService.updateZone

[DEBUG] DUPLICATE #2841:
  File: backend/src/services/zone.service.ts
  Line: 234
  Target: area
  First occurrence: batch index 2822
    - source_expr: await Area.findOne({
        where: {
          id: areaId,
          account_id: accountId
    
    - in_function: ZoneService.updateArea
  Second occurrence: batch index 2841
    - source_expr: await Area.findOne({
        where: {
          id: areaId,
          account_id: accountId
    
    - in_function: ZoneService.updateArea

[DEBUG] DUPLICATE #2842:
  File: backend/src/services/zone.service.ts
  Line: 246
  Target: oldValues
  First occurrence: batch index 2823
    - source_expr: area.toJSON()
    - in_function: ZoneService.updateArea
  Second occurrence: batch index 2842
    - source_expr: area.toJSON()
    - in_function: ZoneService.updateArea

[DEBUG] DUPLICATE #2843:
  File: backend/src/services/zone.service.ts
  Line: 249
  Target: updateData
  First occurrence: batch index 2824
    - source_expr: { ...data }
    - in_function: ZoneService.updateArea
  Second occurrence: batch index 2843
    - source_expr: { ...data }
    - in_function: ZoneService.updateArea

[DEBUG] DUPLICATE #2844:
  File: backend/src/services/zone.service.ts
  Line: 281
  Target: zone
  First occurrence: batch index 2825
    - source_expr: await Zone.findOne({
      where: {
        id: zoneId,
        account_id: accountId
      },

    - in_function: ZoneService.getZoneCapacity
  Second occurrence: batch index 2844
    - source_expr: await Zone.findOne({
      where: {
        id: zoneId,
        account_id: accountId
      },

    - in_function: ZoneService.getZoneCapacity

[DEBUG] DUPLICATE #2845:
  File: backend/src/services/zone.service.ts
  Line: 301
  Target: areas
  First occurrence: batch index 2826
    - source_expr: zone.areas || []
    - in_function: ZoneService.getZoneCapacity
  Second occurrence: batch index 2845
    - source_expr: zone.areas || []
    - in_function: ZoneService.getZoneCapacity

[DEBUG] DUPLICATE #2846:
  File: backend/src/services/zone.service.ts
  Line: 302
  Target: totalCapacity
  First occurrence: batch index 2827
    - source_expr: areas.reduce((sum: number, area: Area) => sum + (area.capacity || 0), 0)
    - in_function: ZoneService.getZoneCapacity
  Second occurrence: batch index 2846
    - source_expr: areas.reduce((sum: number, area: Area) => sum + (area.capacity || 0), 0)
    - in_function: ZoneService.getZoneCapacity

[DEBUG] DUPLICATE #2847:
  File: backend/src/services/zone.service.ts
  Line: 305
  Target: areaIds
  First occurrence: batch index 2828
    - source_expr: areas.map(area => area.id)
    - in_function: ZoneService.getZoneCapacity
  Second occurrence: batch index 2847
    - source_expr: areas.map(area => area.id)
    - in_function: ZoneService.getZoneCapacity

[DEBUG] DUPLICATE #2848:
  File: backend/src/services/zone.service.ts
  Line: 307
  Target: usedCapacity
  First occurrence: batch index 2829
    - source_expr: areaIds.length > 0 ? await Plant.count({
      where: {
        account_id: accountId,
        ar
    - in_function: ZoneService.getZoneCapacity
  Second occurrence: batch index 2848
    - source_expr: areaIds.length > 0 ? await Plant.count({
      where: {
        account_id: accountId,
        ar
    - in_function: ZoneService.getZoneCapacity

[DEBUG] DUPLICATE #2849:
  File: backend/src/services/zone.service.ts
  Line: 333
  Target: zone
  First occurrence: batch index 2830
    - source_expr: await Zone.findOne({
        where: {
          id: zoneId,
          account_id: accountId
    
    - in_function: ZoneService.deactivateZone
  Second occurrence: batch index 2849
    - source_expr: await Zone.findOne({
        where: {
          id: zoneId,
          account_id: accountId
    
    - in_function: ZoneService.deactivateZone

[DEBUG] DUPLICATE #2860:
  File: backend/src/utils/crypto.service.ts
  Line: 42
  Target: key
  First occurrence: batch index 2852
    - source_expr: process.env.FILE_ENCRYPTION_KEY
    - in_function: CryptoService.loadEncryptionKey
  Second occurrence: batch index 2860
    - source_expr: process.env.FILE_ENCRYPTION_KEY
    - in_function: CryptoService.loadEncryptionKey

[DEBUG] DUPLICATE #2861:
  File: backend/src/utils/crypto.service.ts
  Line: 67
  Target: iv
  First occurrence: batch index 2853
    - source_expr: crypto.randomBytes(16)
    - in_function: CryptoService./**
   * Encrypt a file buffer
   * @param buffer - File content to encrypt
   * @returns Encrypted data with IV and auth tag
   */
  encryptFile
  Second occurrence: batch index 2861
    - source_expr: crypto.randomBytes(16)
    - in_function: CryptoService./**
   * Encrypt a file buffer
   * @param buffer - File content to encrypt
   * @returns Encrypted data with IV and auth tag
   */
  encryptFile

[DEBUG] DUPLICATE #2862:
  File: backend/src/utils/crypto.service.ts
  Line: 70
  Target: cipher
  First occurrence: batch index 2854
    - source_expr: crypto.createCipheriv(this.algorithm, this.secretKey, iv)
    - in_function: CryptoService./**
   * Encrypt a file buffer
   * @param buffer - File content to encrypt
   * @returns Encrypted data with IV and auth tag
   */
  encryptFile
  Second occurrence: batch index 2862
    - source_expr: crypto.createCipheriv(this.algorithm, this.secretKey, iv)
    - in_function: CryptoService./**
   * Encrypt a file buffer
   * @param buffer - File content to encrypt
   * @returns Encrypted data with IV and auth tag
   */
  encryptFile

[DEBUG] DUPLICATE #2863:
  File: backend/src/utils/crypto.service.ts
  Line: 73
  Target: encrypted
  First occurrence: batch index 2855
    - source_expr: Buffer.concat([
        cipher.update(buffer),
        cipher.final()
      ])
    - in_function: CryptoService./**
   * Encrypt a file buffer
   * @param buffer - File content to encrypt
   * @returns Encrypted data with IV and auth tag
   */
  encryptFile
  Second occurrence: batch index 2863
    - source_expr: Buffer.concat([
        cipher.update(buffer),
        cipher.final()
      ])
    - in_function: CryptoService./**
   * Encrypt a file buffer
   * @param buffer - File content to encrypt
   * @returns Encrypted data with IV and auth tag
   */
  encryptFile

[DEBUG] DUPLICATE #2864:
  File: backend/src/utils/crypto.service.ts
  Line: 79
  Target: authTag
  First occurrence: batch index 2856
    - source_expr: (cipher as crypto.CipherGCM).getAuthTag()
    - in_function: CryptoService./**
   * Encrypt a file buffer
   * @param buffer - File content to encrypt
   * @returns Encrypted data with IV and auth tag
   */
  encryptFile
  Second occurrence: batch index 2864
    - source_expr: (cipher as crypto.CipherGCM).getAuthTag()
    - in_function: CryptoService./**
   * Encrypt a file buffer
   * @param buffer - File content to encrypt
   * @returns Encrypted data with IV and auth tag
   */
  encryptFile

[DEBUG] DUPLICATE #2865:
  File: backend/src/utils/crypto.service.ts
  Line: 102
  Target: decipher
  First occurrence: batch index 2857
    - source_expr: crypto.createDecipheriv(
        this.algorithm,
        this.secretKey,
        Buffer.from(iv, 
    - in_function: CryptoService./**
   * Decrypt a file buffer
   * @param encrypted - Encrypted file content
   * @param iv - Initialization vector (hex string)
   * @param authTag - Authentication tag (hex string)
   * @returns Decrypted file content
   */
  decryptFile
  Second occurrence: batch index 2865
    - source_expr: crypto.createDecipheriv(
        this.algorithm,
        this.secretKey,
        Buffer.from(iv, 
    - in_function: CryptoService./**
   * Decrypt a file buffer
   * @param encrypted - Encrypted file content
   * @param iv - Initialization vector (hex string)
   * @param authTag - Authentication tag (hex string)
   * @returns Decrypted file content
   */
  decryptFile

[DEBUG] DUPLICATE #2866:
  File: backend/src/utils/crypto.service.ts
  Line: 112
  Target: decrypted
  First occurrence: batch index 2858
    - source_expr: Buffer.concat([
        decipher.update(encrypted),
        decipher.final()
      ])
    - in_function: CryptoService./**
   * Decrypt a file buffer
   * @param encrypted - Encrypted file content
   * @param iv - Initialization vector (hex string)
   * @param authTag - Authentication tag (hex string)
   * @returns Decrypted file content
   */
  decryptFile
  Second occurrence: batch index 2866
    - source_expr: Buffer.concat([
        decipher.update(encrypted),
        decipher.final()
      ])
    - in_function: CryptoService./**
   * Decrypt a file buffer
   * @param encrypted - Encrypted file content
   * @param iv - Initialization vector (hex string)
   * @param authTag - Authentication tag (hex string)
   * @returns Decrypted file content
   */
  decryptFile

[DEBUG] DUPLICATE #2867:
  File: backend/src/utils/crypto.service.ts
  Line: 149
  Target: actualChecksum
  First occurrence: batch index 2859
    - source_expr: this.generateChecksum(buffer)
    - in_function: CryptoService./**
   * Verify file integrity by comparing checksums
   * @param buffer - File content
   * @param expectedChecksum - Expected checksum
   * @returns True if checksums match
   */
  verifyChecksum
  Second occurrence: batch index 2867
    - source_expr: this.generateChecksum(buffer)
    - in_function: CryptoService./**
   * Verify file integrity by comparing checksums
   * @param buffer - File content
   * @param expectedChecksum - Expected checksum
   * @returns True if checksums match
   */
  verifyChecksum

[DEBUG] DUPLICATE #2899:
  File: backend/src/utils/qr.generator.ts
  Line: 25
  Target: timestamp
  First occurrence: batch index 2888
    - source_expr: Date.now()
    - in_function: QRGenerator.generateQRCode
  Second occurrence: batch index 2899
    - source_expr: Date.now()
    - in_function: QRGenerator.generateQRCode

[DEBUG] DUPLICATE #2900:
  File: backend/src/utils/qr.generator.ts
  Line: 28
  Target: data: QRData
  First occurrence: batch index 2889
    - source_expr: {
      type,
      id: entityId,
      code,
      account_id: accountId,
      timestamp
   
    - in_function: QRGenerator.generateQRCode
  Second occurrence: batch index 2900
    - source_expr: {
      type,
      id: entityId,
      code,
      account_id: accountId,
      timestamp
   
    - in_function: QRGenerator.generateQRCode

[DEBUG] DUPLICATE #2901:
  File: backend/src/utils/qr.generator.ts
  Line: 40
  Target: qrString
  First occurrence: batch index 2890
    - source_expr: `${type}:${code}:${timestamp}:${data.checksum}`
    - in_function: QRGenerator.generateQRCode
  Second occurrence: batch index 2901
    - source_expr: `${type}:${code}:${timestamp}:${data.checksum}`
    - in_function: QRGenerator.generateQRCode

[DEBUG] DUPLICATE #2902:
  File: backend/src/utils/qr.generator.ts
  Line: 43
  Target: qrDataUrl
  First occurrence: batch index 2891
    - source_expr: await QRCode.toDataURL(qrString, {
      errorCorrectionLevel: 'H', // 30% damage tolerance
      
    - in_function: QRGenerator.generateQRCode
  Second occurrence: batch index 2902
    - source_expr: await QRCode.toDataURL(qrString, {
      errorCorrectionLevel: 'H', // 30% damage tolerance
      
    - in_function: QRGenerator.generateQRCode

[DEBUG] DUPLICATE #2903:
  File: backend/src/utils/qr.generator.ts
  Line: 62
  Target: parts
  First occurrence: batch index 2892
    - source_expr: qrString.split(':')
    - in_function: QRGenerator.parseQRCode
  Second occurrence: batch index 2903
    - source_expr: qrString.split(':')
    - in_function: QRGenerator.parseQRCode

[DEBUG] DUPLICATE #2904:
  File: backend/src/utils/qr.generator.ts
  Line: 65
  Target: [type, code, timestamp, checksum]
  First occurrence: batch index 2893
    - source_expr: parts
    - in_function: QRGenerator.parseQRCode
  Second occurrence: batch index 2904
    - source_expr: parts
    - in_function: QRGenerator.parseQRCode

[DEBUG] DUPLICATE #2905:
  File: backend/src/utils/qr.generator.ts
  Line: 68
  Target: data: Partial<QRData>
  First occurrence: batch index 2894
    - source_expr: {
        type: type as QRData['type'],
        code,
        timestamp: parseInt(timestamp),
  
    - in_function: QRGenerator.parseQRCode
  Second occurrence: batch index 2905
    - source_expr: {
        type: type as QRData['type'],
        code,
        timestamp: parseInt(timestamp),
  
    - in_function: QRGenerator.parseQRCode

[DEBUG] DUPLICATE #2906:
  File: backend/src/utils/qr.generator.ts
  Line: 87
  Target: { checksum, ...dataWithoutChecksum }
  First occurrence: batch index 2895
    - source_expr: qrData
    - in_function: QRGenerator.verifyQRCode
  Second occurrence: batch index 2906
    - source_expr: qrData
    - in_function: QRGenerator.verifyQRCode

[DEBUG] DUPLICATE #2907:
  File: backend/src/utils/qr.generator.ts
  Line: 88
  Target: expectedChecksum
  First occurrence: batch index 2896
    - source_expr: this.generateChecksum(dataWithoutChecksum)
    - in_function: QRGenerator.verifyQRCode
  Second occurrence: batch index 2907
    - source_expr: this.generateChecksum(dataWithoutChecksum)
    - in_function: QRGenerator.verifyQRCode

[DEBUG] DUPLICATE #2908:
  File: backend/src/utils/qr.generator.ts
  Line: 96
  Target: str
  First occurrence: batch index 2897
    - source_expr: `${data.type}${data.code}${data.timestamp}`
    - in_function: QRGenerator.generateChecksum
  Second occurrence: batch index 2908
    - source_expr: `${data.type}${data.code}${data.timestamp}`
    - in_function: QRGenerator.generateChecksum

[DEBUG] DUPLICATE #2909:
  File: backend/src/utils/qr.generator.ts
  Line: 97
  Target: hash
  First occurrence: batch index 2898
    - source_expr: crypto.createHash('sha256')
    - in_function: QRGenerator.generateChecksum
  Second occurrence: batch index 2909
    - source_expr: crypto.createHash('sha256')
    - in_function: QRGenerator.generateChecksum

[DEBUG] DUPLICATE #2918:
  File: backend/src/utils/tenant.context.ts
  Line: 17
  Target: query
  First occurrence: batch index 2910
    - source_expr: `SET LOCAL app.current_account_id = :accountId`
    - in_function: TenantContext.setAccountId
  Second occurrence: batch index 2918
    - source_expr: `SET LOCAL app.current_account_id = :accountId`
    - in_function: TenantContext.setAccountId

[DEBUG] DUPLICATE #2919:
  File: backend/src/utils/tenant.context.ts
  Line: 39
  Target: query
  First occurrence: batch index 2911
    - source_expr: `RESET app.current_account_id`
    - in_function: TenantContext.clearAccountId
  Second occurrence: batch index 2919
    - source_expr: `RESET app.current_account_id`
    - in_function: TenantContext.clearAccountId

[DEBUG] DUPLICATE #2920:
  File: backend/src/utils/tenant.context.ts
  Line: 62
  Target: result
  First occurrence: batch index 2912
    - source_expr: await callback(transaction)
    - in_function: TenantContext.runWithTenant
  Second occurrence: batch index 2920
    - source_expr: await callback(transaction)
    - in_function: TenantContext.runWithTenant

[DEBUG] DUPLICATE #2921:
  File: backend/src/utils/tenant.context.ts
  Line: 79
  Target: originalMethod
  First occurrence: batch index 2913
    - source_expr: descriptor.value as (...args: unknown[]) => unknown
    - in_function: TenantContext.withTenant
  Second occurrence: batch index 2921
    - source_expr: descriptor.value as (...args: unknown[]) => unknown
    - in_function: TenantContext.withTenant

[DEBUG] DUPLICATE #2922:
  File: backend/src/utils/tenant.context.ts
  Line: 84
  Target: modifiedArgs
  First occurrence: batch index 2914
    - source_expr: [...args]
    - in_function: TenantContext.withTenant
  Second occurrence: batch index 2922
    - source_expr: [...args]
    - in_function: TenantContext.withTenant

[DEBUG] DUPLICATE #2923:
  File: backend/src/utils/tenant.context.ts
  Line: 85
  Target: lastArg
  First occurrence: batch index 2915
    - source_expr: modifiedArgs[modifiedArgs.length - 1] as Record<string, unknown> | undefined
    - in_function: TenantContext.withTenant
  Second occurrence: batch index 2923
    - source_expr: modifiedArgs[modifiedArgs.length - 1] as Record<string, unknown> | undefined
    - in_function: TenantContext.withTenant

[DEBUG] DUPLICATE #2924:
  File: backend/src/utils/tenant.context.ts
  Line: 107
  Target: query
  First occurrence: batch index 2916
    - source_expr: `SELECT current_setting('app.current_account_id', true) as account_id`
    - in_function: TenantContext.getCurrentAccountId
  Second occurrence: batch index 2924
    - source_expr: `SELECT current_setting('app.current_account_id', true) as account_id`
    - in_function: TenantContext.getCurrentAccountId

[DEBUG] DUPLICATE #2925:
  File: backend/src/utils/tenant.context.ts
  Line: 109
  Target: results
  First occurrence: batch index 2917
    - source_expr: await sequelize.query<{ account_id: string | null }>(query, {
      transaction,
      type: QueryTy
    - in_function: TenantContext.getCurrentAccountId
  Second occurrence: batch index 2925
    - source_expr: await sequelize.query<{ account_id: string | null }>(query, {
      transaction,
      type: QueryTy
    - in_function: TenantContext.getCurrentAccountId

[DEBUG] Full traceback:
Traceback (most recent call last):
  File "C:\Users\santa\Desktop\TheAuditor\theauditor\indexer\database.py", line 1654, in flush_batch
    cursor.executemany(
    ~~~~~~~~~~~~~~~~~~^
        "INSERT INTO assignments (file, line, target_var, source_expr, in_function) VALUES (?, ?, ?, ?, ?)",
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
        self.assignments_batch
        ^^^^^^^^^^^^^^^^^^^^^^
    )
    ^
sqlite3.IntegrityError: UNIQUE constraint failed: assignments.file, assignments.line, assignments.target_var

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Users\santa\Desktop\TheAuditor\theauditor\indexer_compat.py", line 246, in build_index
    extract_counts, _ = orchestrator.index()
                        ~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\santa\Desktop\TheAuditor\theauditor\indexer\__init__.py", line 316, in index
    self.db_manager.flush_batch()
    ~~~~~~~~~~~~~~~~~~~~~~~~~~~^^
  File "C:\Users\santa\Desktop\TheAuditor\theauditor\indexer\database.py", line 2015, in flush_batch
    raise RuntimeError(f"Batch insert failed: {e}")
RuntimeError: Batch insert failed: UNIQUE constraint failed: assignments.file, assignments.line, assignments.target_var

Error: Failed to create database: Batch insert failed: UNIQUE constraint failed: assignments.file, assignments.line, assignments.target_var
Error: ClickException: Failed to create database: Batch insert failed: UNIQUE constraint failed: assignments.file, assignments.line, assignments.target_var

Detailed error information has been logged to: .pf\error.log
Please check the log file for the full traceback and debugging information.
Warning: Semantic parser failed for C:\Users\santa\Desktop\plant\frontend\src\pages\operations\OperationsList.tsx: Batch TypeScript compiler failed (exit code 1): {"success":false,"error":"Invalid string length","stack":"RangeError: Invalid string length\n    at JSON.stringify (<anonymous>)\n    at main (file:///C:/Users/santa/Desktop/plant/.pf/tsc_batch_helper.js:799:43)"}, falling back to individual parsing
[Indexer] Successfully batch processed 319 JS/TS files
