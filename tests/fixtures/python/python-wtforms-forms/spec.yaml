name: python-wtforms-forms
description: WTForms form extraction test fixture
language: python

tables:
  python_wtforms_forms:
    min_rows: 3  # RegistrationForm, LoginForm, BlogPostForm
    queries:
      - name: verify_registration_form
        sql: SELECT * FROM python_wtforms_forms WHERE form_name = 'RegistrationForm'
        expect_rows: 1

      - name: verify_flask_forms
        sql: SELECT * FROM python_wtforms_forms WHERE has_csrf = 1
        expect_rows_min: 2  # FlaskForm subclasses have CSRF by default

      - name: verify_submit_method
        sql: SELECT * FROM python_wtforms_forms WHERE submit_method = 'validate_on_submit'
        expect_rows: 1  # LoginForm has validate_on_submit

  python_wtforms_fields:
    min_rows: 11  # 6 from RegistrationForm, 3 from LoginForm, 4 from BlogPostForm
    queries:
      - name: verify_string_fields
        sql: SELECT * FROM python_wtforms_fields WHERE field_type = 'StringField'
        expect_rows_min: 5  # username, email, title, etc.

      - name: verify_password_fields
        sql: SELECT * FROM python_wtforms_fields WHERE field_type = 'PasswordField'
        expect_rows: 3  # password, confirm_password from Registration, password from Login

      - name: verify_fields_with_validators
        sql: SELECT * FROM python_wtforms_fields WHERE validators IS NOT NULL
        expect_rows_min: 8  # Most fields have validators

      - name: verify_boolean_fields_with_defaults
        sql: SELECT * FROM python_wtforms_fields WHERE field_type = 'BooleanField' AND default_value IS NOT NULL
        expect_rows_min: 1  # is_published has default=False